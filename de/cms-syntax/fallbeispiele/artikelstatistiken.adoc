= Artikelstatistiken
:lang: de
include::{includedir}/_header.adoc[]
:keywords: Google Analytics, orderconfirmationitemslist, Artikelstatistik
:description: Artikelstatistik mit Google Analytics
:position: 0

toc::[]
== Artikel aus Bestellbestätigungen mit Google Analytics verfolgen

Um Ihren Webshop optimal an die Anforderungen Ihrer Kunden anzupassen und Produkte gezielt zu platzieren, ist es sinnvoll, Analysetechniken einzusetzen. Analysetechnologien wie Google Analytics erstellen z.B. anonyme Besucherstatistiken über das Nutzungsverhalten und geben Aufschluss darüber, welche Artikel sich gut verkaufen. +
In diesem Fallbeispiel wird eine Liste der bestellten Artikel im Template der Bestellbestätigung geladen und die einzelnen Artikel an Google Analytics gesendet.

== Voraussetzungen

Für dieses Fallbeispiel wird Folgendes vorausgesetzt:

* Account bei <<mandant-shop/conversion-tracking/universal-analytics#, **Google Universal Analytics**  >>
* Aktivierte **link:https://support.google.com/analytics/answer/1009612[E-Commerce-Funktion, window="_blank"]** in Google Analytics

== Artikeldaten an Google Analytics senden

Um Statistiken über den Bestellvorgang zu ermöglichen, fügen Sie das **link:https://support.google.com/analytics/answer/1008080[Tracking-Snippet, window="_blank"]**, das von Google generiert wurde, in ein Template ein, z.B. **CMS » Webdesign » Layout » PageDesign » PageDesignCheckout**. Nachdem das Tracking-Snippet eingefügt wurde, können Daten an Google Analytics gesendet werden.

=== Transaktion registrieren

Damit Google Analytics Artikeldaten einer Transaktion zuordnen kann, muss die Transaktion bei Google Analytics registiert werden. Dazu werden die Transaktions-ID und optional weitere Daten des Warenkorbs an Google Analytics gesendet. +
Die folgende Tabelle enthält die Transaktionsdaten, die an Google Analytics übertragen werden können.

[cols="a,a,a"]
|====
|Parameter |Erforderlich? |Erläuterung

|**id**
|Ja
|Transaktions-ID

|**affiliation**
|Nein
|Zugehörigkeit, d.h. der Shop, in dem die Transaktion erfolgt.

|**revenue**
|Nein
|Umsatz der Transaktion

|**shipping**
|Nein
|Versandkosten der Transaktion

|**tax**
|Nein
|Steuern der Transaktion
|====

__Tab. 1: Transaktionsdaten__

Unten finden Sie ein Beispiel für einen Code, mit dem Transaktionen bei Google Analytics registriert werden.

[.instruction]
Beispiel-Code in Design einbinden:

. Passen Sie den Beispiel-Code unten an Ihre Anforderungen an.
. Öffnen Sie das Menü **CMS » Webdesign** und dort **Layout » PageDesign » PageDesignCheckout**.
. Wählen Sie das Tab **PageDesignCheckoutMainFrame**.
. Fügen Sie das Code-Beispiel an geeigneter Stelle in das Template ein.

[source,plenty]
----
include::assets/EX-DE-Transaktion-registrieren.html[]

----

=== Artikelliste abrufen und Artikeldaten an Google Analytics senden

Wenn die Transaktion bei Google Analytics registriert wurde, können der Transaktion Informationen zu den darin enthaltenen Artikeln mit zusätzlichen Parametern hinzugefügt werden. Diese Artikeldaten werden für alle Artikel, die im Warenkorb abgelegt wurden, übergeben. Hierfür werden die folgenden Parameter benötigt:

[cols="a,a,a"]
|====
|Parameter |Erforderlich? |Erläuterung

|**id**
|Ja
|Transaktions-ID

|**name**
|Ja
|Name des Artikels

|**SKU**
|Nein
|Artikelnummer des Artikels

|**category**
|Nein
|Kategorie, zu der der Artikel gehört.

|**price**
|Nein
|Stückpreis des Artikels

|**quantity**
|Nein
|Anzahl der gekauften Artikel
|====

__Tab. 2: Artikeldaten__

Um Transaktionen und die dazugehörigen Artikel zu verfolgen, verwenden Sie im Bereich **CMS » Webdesign » Bestellvorgang » Bestellbestätigung » Tracking** den REST-Call <<cms-syntax/fallbeispiele/artikelstatistiken#checkout/orderconfirmationitemslist, **/rest/checkout/orderconfirmationitemslist/** >>. Dieser Aufruf gibt eine Liste der bestellten Artikel aus. Unten finden Sie ein Code-Beispiel, mit dem die Artikelliste einer Transaktion über diesen REST-Call abgerufen wird. Außerdem werden die einzelnen Artikeldaten an Google Analytics gesendet.

[.instruction]
Beispiel-Code in Design einbinden:

. Passen Sie den Beispiel-Code unten an Ihre Anforderungen an.
. Öffnen Sie das Menü **CMS » Webdesign** und dort **Bestellvorgang » Bestellbestätigung**.
. Wählen Sie das Tab **Tracking**.
. Fügen Sie das Code-Beispiel an geeigneter Stelle in das Template ein.

[source,plenty]
----
include::assets/EX-DE-Einzelne-Artikeldaten.html[]

----

