= Migrationsleitfaden plentymarkets 7
:lang: de
include::{includedir}/_header.adoc[]
:keywords: plentymarkets 7, Migration, Migrationsleitfaden
:description: Leitfaden zur Migration auf plentymarkets 7
:position: 80
:url: basics/admin-aufgaben/migrationsleitfaden

Diese Seite enthält wichtige Informationen zur Migration auf plentymarkets 7. Für plentymarkets 7 wurde die Artikelarchitektur grundlegend überarbeitet. Auf dieser Seite wird kurz die neue Architektur erläutert und ein Ausblick auf die weiteren Verbesserungen gegeben, die sich zurzeit noch in der Umsetzung befinden. Des Weiteren wird der Ablauf der Migration beschrieben. Du erfährst, welche Vorbereitungen du treffen musst, um dein System für die Migration vorzubereiten. Beachte, dass eine Migration nicht rückgängig gemacht werden kann. Wenn du die hier beschriebenen Vorbereitungen nicht triffst, musst du einen erheblichen Korrekturaufwand nach der Migration in Kauf nehmen. Im schlimmsten Fall kann es zu einem Verlust von Daten kommen. Lies daher die folgenden Informationen aufmerksam und bereite deine Daten wie hier beschrieben für die Migration vor.

[WARNING]
.SOAP API nur mit plentymarkets 7 Classic Tarif
====
Ab dem Wechsel auf plentymarkets 7 ist die SOAP-API nur für Kunden mit Classic-Tarif nutzbar. Kunden mit Zero-Vertrag können die SOAP-API nicht mehr nutzen. Die REST-API steht allen plentymarkets 7 Kunden zur Verfügung.
====

[#10]
== Überblick über die neue Artikelarchitektur

In der neuen Artikelarchitektur ist ein Artikel der vollständige Datensatz einer Hauptvariante sowie sämtlicher dazugehöriger Varianten. Ein Artikel besteht also aus globalen Daten, die für alle Varianten des Artikels gelten (Artikeldaten), und aus Daten, die pro Variante verwaltet werden (Variantendaten).

Artikeldaten:

* Globale Einstellungen (Zustand, Hersteller, Altersfreigabe, etc.)
* Texte
* Merkmale
* Cross-Selling-Einstellungen

Variantendaten:

* Bilder
* Marktplatz-Sichtbarkeit
* Verkaufspreise
* Barcodes
* Einheiten
* Lager
* Bestand
* Kategorien
* Lieferanten

Jeder Artikel verfügt über eine nicht löschbare Hauptvariante. Diese Hauptvariante ist nicht identisch mit dem Artikel, sondern unterscheidet sich von den anderen möglichen Varianten eines Artikels lediglich dadurch, dass Eigenschaften von der Hauptvariante an weitere Varianten des Artikels vererbt werden können. Die Hauptvariante kann selbst eine kaufbare Variante sein oder als virtuelle Variante dienen, um die weiteren Varianten des Artikels zu verwalten. plentymarkets empfiehlt, Hauptvarianten als virtuelle Varianten zu pflegen.

Bild 1 zeigt eine schematische Darstellung der Artikelarchitektur in plentymarkets 7.

.Aktueller Stand der neuen Artikelarchitektur
image::basics/versionswechsel/assets/DE-artikelarchitektur-1.png[Aktueller Stand der neuen Artikelarchitektur]

Die neue Artikelarchitektur bietet zahlreiche Vorteile. Wichtigstes Ziel war noch mehr Flexibilität bei der Verwaltung und Pflege der Preise, der Artikeldaten und vor allem auch der Varianten. Eine kurze Übersicht der Neuerungen und Vorteile findest du nachfolgend.

* Die Preissets mit den Preisspalten wurden durch Verkaufspreise ersetzt. Diese Verkaufspreise werden zentral definiert und verwaltet und Varianten zugewiesen. Dieses Konzept vereinfacht die Preispflege und bietet Ihnen gleichzeitig deutlich mehr Flexibilität bei der selektiven Preisgestaltung. Beispielsweise werden die Mengenrabattstaffeln von Artikeln und Kundenklassen zu Verkaufspreisen migriert. Diese neuen Verkaufspreise erlauben Ihnen noch mehr Flexibilität bei der Preisstaffelung.
* Mehr Flexibilität bei der Arbeit mit Varianten. Anders als bisher können für Varianten eigene Werte z.B. für Maße und Gewichte, Versandkosten, sonstige Kosten und Lieferanten hinterlegt werden. Um den Pflegeaufwand bei sehr ähnlichen Varianten zu minimieren, haben wir gleichzeitig die Möglichkeit geschaffen, Daten von der Hauptvariante an die Varianten zu vererben.
* Vererbung bestimmter Artikeldaten der Hauptvariante an die dazugehörigen Varianten. Damit reduzierst du deinen  Pflegeaufwand, ohne Abstriche bei der Flexibilität zu machen. Die Vererbung ermöglicht es Ihnen, Varianteneigenschaften zentral an der Hauptvariante zu verwalten und so die Werte vieler Varianten gleichzeitig zu aktualisieren. Beim Erstellen von Varianten werden viele Einstellungen der Hauptvariante automatisch auf die Varianten übertragen. Auch bei einer späteren Bearbeitung der Hauptvariante erben die Varianten automatisch die neuen Einstellungen, wenn die Vererbung aktiviert ist. Gleichzeitig kannst du die Vererbung jedoch auch an der Variante deaktivieren und so individuelle Einstellungen vornehmen.

== Ausblick

plentymarkets setzt auf agile Softwareentwicklung. Das bedeutet, dass Neuerungen nicht wie in klassischen Entwicklungszyklen als "große Würfe" veröffentlicht werden. Stattdessen werden Projekte in kleinere Einzelprojekte bzw. Inkremente heruntergebrochen, die in kürzeren, aber regelmäßigen Abständen veröffentlicht werden. Da die Artikelstruktur fast alle anderen Bereiche von plentymarkets beeinflusst, stellt in diesem Fall das kleinstmögliche Inkrement dennoch eine umfassende Umstrukturierung dar. Trotzdem setzen wir beim Artikelumbau auf agile Softwareentwicklung und stellen in der aktuellen Version einen ersten Zwischenstand vor. Er erlaubt Ihnen, sich mit der neuen Struktur vertraut zu machen, während wir weitere Verbesserungen planen und nach und nach auf agile Weise veröffentlichen. Für die nächsten Inkremente haben wir uns folgende Themen vorgenommen:

* Pflege von Namen, Kurzbeschreibung, Beschreibung etc. pro Variante und ggf. auch pro Variante und Mandant
* Definition von Merkmalen pro Variante
* Pflege von Preisen pro Kunde

Bild 2 zeigt das Ziel, die Datenpflege auf Variantenebene auf die Artikeltexte und Merkmale zu erweitern.

.Ausblick Datenpflege auf Variantenebene
image::basics/versionswechsel/assets/DE-artikelarchitektur-2.png[Ausblick Datenpflege auf Variantenebene]

[#200]
== Voraussetzungen für die Migration

Beachte die folgenden Voraussetzungen für eine Migration deines Systems auf plentymarkets 7.

* *Hosting*: Wenn du plentymarkets auf einem eigenen Server oder der plentymarkets eigenen Cloud (Cluster) nutzt, musst du das System auf die AWS-Cloud umziehen, um auf plentymarkets 7 zu migrieren. +
→ Wenn die Hauptdomain deines Systems eine externe Domain ist, musst du im Rahmen eines Umzugs auf die AWS-Cloud die neue IP-Adresse beim externen Domain-Provider speichern. Weitere Informationen findest du im link:https://forum.plentymarkets.com/t/leitfaden-aws-umzug/75863[Leitfaden AWS-Umzug].
* *SOAP*: Eigene SOAP-Anbindungen und SOAP-Anbindungen von Partnern oder Agenturen müssen vor der Migration auf die Stable 7-Tauglichkeit geprüft werden. Frage den Entwickler oder die Agentur, ob die Anbindung Stable 7-fähig ist.
* *plentymarkets Shipping*: plentymarkets Shipping ist nicht mit plentymarkets 7 kompatibel und wird nicht mehr unterstützt. Es wurde vollständig durch die Prozesse abgelöst.
Damit die Prozesse genutzt werden können, muss link:https://marketplace.plentymarkets.com/de/plugins/integration/plentyBase_5053[plentyBase] installiert sein. +
Die Software plentyBase läuft im Hintergrund. Ein Login zum plentymarkets Backend mit deinem Benutzer erfolgt wie gewohnt über den Browser.
* *Marktplätze*: In plentymarkets 7 sind noch nicht alle Marktplätze funktionsfähig. Prüfe vor der Migration die <<basics/admin-aufgaben/migrationsleitfaden#_migration_der_marktplätze, Liste>> der noch nicht migrierten Marktplätze.
* *Vorbereitungen*: Arbeite diesen Migrationsleitfaden durch und treffe die darin beschriebenen Vorbereitungen.

Beachte außerdem, dass die SOAP-API ab dem Wechsel auf plentymarkets 7 nur für Kunden mit Classic-Tarif nutzbar ist. Kunden mit Zero-Vertrag können die SOAP-API nicht mehr nutzen. Die REST-API steht allen plentymarkets 7 Kunden zur Verfügung.

[#20]
== Migration

Im folgenden Kapitel wird beschrieben, wie deine Daten in die neue Artikelarchitektur migriert werden. Zur besseren Übersichtlichkeit ist diese Migrationsbeschreibung in die Unterbereiche *Artikeldaten* und *Preisspalten* unterteilt. In beiden Bereichen sind teilweise Vorarbeiten deinerseits erforderlich. Diese Vorarbeiten werden in diesem Kapitel nur kurz umrissen, eine genaue Anleitung findest du im Kapitel <<basics/admin-aufgaben/migrationsleitfaden#30, Vorbereitungen im Detail>>.

[#21]
=== Migration der Artikeldaten

==== Migrationsmuster

Die Migration der Artikeldaten in die neue Artikelarchitektur erfolgt grundsätzlich nach dem folgenden Muster:

.Migration von Artikeldaten
[cols="1,3,3"]
|====
|Migrierter Datentyp |Verhalten |Ausnahmen

|Stammartikel (Artikel ohne Varianten) ⇒ Hauptvariante
|Einstellungen bzw. Daten des Artikels werden übernommen.
|

|Variante ⇒ Variante
|Einstellungen bzw. Daten der Variante werden übernommen.
|

|Varianten ohne Einstellungen +
⇒ Variante
|Einstellungen bzw. Daten der Hauptvariante werden übernommen.
|Artikel-/Variantennummer wird nur einmal vergeben. +
Für alle weiteren Varianten werden neue Variantennummern generiert (siehe unten).
|====

[IMPORTANT]
.Nicht alle Datenformate werden migriert
====
Aufgrund der neuen Artikeldatenstruktur werden nicht alle Item-Datenformate des Menüs *Datenaustausch » Dynamischer Export* migriert. Nicht kompatible Datenformate werden bei der Migration entfernt.
====

[.subhead]
Ausnahme: Artikel-/Variantennummern

In der neuen Artikelarchitektur ist die Variantennummer systemweit eindeutig. Bei der Migration werden daher in bestimmten Fällen neue Variantennummern vergeben. Die Migration läuft nach dem folgenden Muster ab:

.Migration der Artikel-/Variantennummern
[cols=""]
|====
|Einstellung |*Artikel-/Variantennummer*

|Neuer Pfad
|*Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Varianten-ID » Tab: Einstellungen*

|Sonderfall 1: +
Artikel/Varianten ohne Artikel-/Variantennummer
|Pro Variante wird eine neue, eindeutige Variantennummer generiert. Diese Variantennummer wird nach dem Muster aus Präfix und nächster Variantennummer vergeben, das vor der Migration im Menü <<artikel/artikel-verwalten#15, System » Systemeinstellungen » Artikel » Einstellungen>> über die Einstellungen *Präfix für neue Variantennummern (ab plentymarkets 7)* und *Nächste Variantennummer (ab plentymarkets 7)* festgelegt wurde.

|Sonderfall 2: +
Artikel/Varianten mit gleicher Artikel-/Variantennummer
|Die zuerst migrierte Variante übernimmt die Artikel-/Variantennummer. Für alle weiteren Varianten wird eine neue, eindeutige Variantennummer generiert. Diese Variantennummer wird nach dem Muster vergeben, das vor der Migration in den <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> des Menüs *System » Systemeinstellungen » Einstellungen » Daten » Migration* über die Einstellung *Doppelte Nummern* festgelegt wurde.

|Sonderfall 3: +
Artikel mit mehreren Preissets
|Aus einer Variante können mehrere Varianten entstehen. Bei dem zuerst migrierten Preisset übernimmt die Variante die Artikel-/Variantennummer. Für alle weiteren Varianten wird eine neue, eindeutige Variantennummer generiert. Diese Variantennummer wird nach dem Muster vergeben, das vor der Migration in den <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> des Menüs *System » Systemeinstellungen » Einstellungen » Daten » Migration* über die Einstellung *Doppelte Nummern* festgelegt wurde. +
*Hinweis:* Bei der Migration eines Artikels mit mehreren Preissets, in denen *Inhalt* und *Einheit* identisch sind, wird nur das erste Preisset migriert.

|Vorbereitungen
|<<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> vornehmen/prüfen. +
Einstellungen *Präfix für neue Variantennummern (ab plentymarkets 7)* und *Nächste Variantennummer (ab plentymarkets 7)* im Menü <<artikel/artikel-verwalten#15, System » Systemeinstellungen » Artikel » Einstellungen>> festlegen. +
<<basics/admin-aufgaben/migrationsleitfaden#50, Prüfen>>, ob es Artikel mit mehreren Preissets gibt, bei denen für mehrere Preissets die gleiche Einheit und der gleiche Inhalt hinterlegt wurden. Einheit und Inhalt der zusätzlichen Preissets ändern.
|====

[#22]
==== Besonderheiten

[.subhead]
*Einheit 1* und *Einheit 2*

In der neuen Artikelarchitektur werden die Felder *Einheit 1* und *Einheit 2* durch das Feld *Variantenname* ersetzt. Wie der Inhalt dieser Felder migriert wird, legst du in den <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> fest. Die Migration erfolgt nach dem folgenden Muster:

.Migration der Felder *Einheit 1* und *Einheit 2*
[cols=""]
|====
|Einstellung |*Einheit 1*, *Einheit 2*

|Neuer Pfad
|*Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Varianten-ID » Tab: Einstellungen*

|Verhalten
|Abhängig von den gewählten <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> wird entweder eine der beiden Einheiten verworfen oder beide Felder werden zusammengeführt. +
Werden die Felder *Einheit 1* und *Einheit 2* zum Feld *Variantenname* zusammengeführt, wird der Inhalt beider Felder mit dem in den <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> festgelegten Trennzeichen in das Feld *Variantenname* eingefügt.

|Vorbereitungen
|Einheiten <<basics/admin-aufgaben/migrationsleitfaden#50, prüfen>> und Trennzeichen festlegen. Ggf. die Felder *Einheit 1* und/oder *Einheit 2* ändern.
|====

[.subhead]
Webshop-Sichtbarkeit

Die Sichtbarkeit im Webshop wird nun über die Mandanten-Sichtbarkeit gesteuert. Es gibt keine zentrale Einstellung mehr, die die Sichtbarkeit des Artikels im Webshop steuert. Stattdessen wird die Mandanten-Sichtbarkeit im Tab *Verfügbarkeit* der Variante definiert.

.Migration der Webshop-Verfügbarkeit
[cols="1,2"]
|====
|Einstellung |*Webshop-Sichtbarkeit*

|Neuer Pfad
|*Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Varianten-ID » Tab: Verfügbarkeit*

|Vorbereitungen
|Keine
|====


[#25.subhead]
GTIN1 bis GTIN4, ISBN

In der neuen Artikelarchitektur werden EAN/GTIN und ISBN als Barcode-Definitionen hinterlegt. Eine Begrenzung der Anzahl von GTIN/ISBN gibt es nicht mehr. Du kannst also pro Variante beliebig viele Barcode-Definitionen hinterlegen. Bei der Migration werden fünf Barcode-Definitionen angelegt, um die derzeitigen GTIN und ISBN abzubilden. Die Migration erfolgt nach dem folgenden Muster:

.Migration von GTIN1 bis GTIN4/ISBN
[cols="1,2"]
|====
|Einstellung |*GTIN1* bis *GTIN4*, *ISBN*

|Neuer Pfad
|*Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Varianten-ID » Tab: Einstellungen*

|Verhalten
|*Artikel:* Vorhandene GTIN1 bis GTIN4 und ISBN werden als Barcodes der Hauptvariante angelegt. +
*Varianten:* Vorhandene GTIN1 bis GTIN4 werden als Barcodes der Variante angelegt. Für Varianten ohne GTIN wird kein Barcode angelegt, d.h. die GTIN des Artikels werden nicht berücksichtigt. +
Zuordnung der vorhandenen GTIN bei der Migration: +
*GTIN13*, wenn 13 Zeichen und nur Ziffern. +
*UPC*, wenn 12 Zeichen und nur Ziffern. +
*GTIN128* bei sonstiger Länge und nur Ziffern. +
*Code128* bei allen anderen Zeichenlängen, die mindestens ein Zeichen enthalten, das keine Ziffer ist. +
*_Hinweis:_* Bei der Migration der GTIN werden führende Nullen abgeschnitten. Da sich hierdurch die Zeichenlänge des Codes ändert, wird die GTIN nicht als GTIN-Datensatz migriert, sondern als Code128 oder UPC angelegt.

|Vorbereitungen
|<<basics/admin-aufgaben/migrationsleitfaden#100, Prüfen>>, ob EAN/GTIN mit führenden Nullen vorhanden sind.
|====

[#26]
=== Migration der Preisspalten

Die bisherigen Preissets mit Preisspalten werden in der neuen Artikelarchitektur durch Verkaufspreise ersetzt. Diese Verkaufspreise werden im Menü *System » Systemeinstellungen » Artikel » Verkaufspreise* definiert. An den Varianten werden die Preise in den verschiedenen Verkaufspreisen hinterlegt. Die neuen Verkaufspreise setzen sich aus folgenden Einstellungen zusammen:

* Herkunft
* Währung
* Kundenklasse
* Mandant (Shop)
* Amazon-Konten
* eBay-Konten
* Lieferland
* Preistyp
* Artikelmenge, ab der der Preis gilt

Den eigentlichen Preis, also den Betrag, für einen Verkaufspreis gibst du an den Varianten ein. Bisher wurden Preise aus einer Kombination von Einstellungen in verschiedenen Bereichen errechnet (<<prio-verkaufspreise>>). Aus diesen Einstellungen werden nun deine neuen Verkaufspreise erstellt. Die Anzahl der erstellten Verkaufspreise ist also von der Komplexität der bisherigen Einstellungen abhängig. Bei der Migration werden die Preisspalten mit der folgenden Priorität analysiert, um die neuen Verkaufspreise zu ermitteln:

[[prio-verkaufspreise]]
.Priorität bei der Erstellung von Verkaufspreisen
[cols="1,3,3,3"]
|====
|Prio |Preisspalten-Definition |Erläuterung |Vorbereitungen

|1
|*System » Systemeinstellungen » Aufträge » Auftragsherkunft*
|Preisspalte der Auftragsherkunft hat höchste Priorität für Herkünfte größer/gleich 2.0. +
*Ausnahme:* Herkünfte mit konten-/plattformabhängigen Preisspalten, z.B. eBay, Amazon
a|
* Eingestellte Preisspalten im Menü *Auftragsherkunft* mit der am Marktplatz hinterlegten Preisspalte <<basics/admin-aufgaben/migrationsleitfaden#80, vergleichen und ggf. vereinheitlichen>>. +
*Fallback:* Bei Herkünften mit eigenen Preisspalten bei den Einstellungen (z.B. Shopgate), bei denen der Standardpreis eingestellt ist, wird, wenn unter *System » Systemeinstellungen » Aufträge » Auftragsherkünfte* eine Preisspalte explizit angegeben ist, diese Einstellung und nicht der Standardpreis herangezogen.

|2
|*System » Systemeinstellungen » Aufträge » Zahlung » Währungen*
|Option *Währungsumrechnung* beachten: +
*Verwende Preisspalte* = Betrag in der Preisspalte wird übernommen. +
*Live-Umrechnung* = Betrag in der Preisspalte wird mit aktuellem Wechselkurs umgerechnet.
a|
* Einstellung *Währungsumrechnung* aller Mandanten prüfen. Haben verschiedene Mandanten verschiedene Einstellungen, prüfen, ob es sinnvoll ist, diese Einstellung <<basics/admin-aufgaben/migrationsleitfaden#70, zu vereinheitlichen>>, um die Anzahl der neu erstellten Verkaufspreise zu reduzieren.
* Bei Mandanten mit Einstellung "Verwende Preisspalte": +
<<basics/admin-aufgaben/migrationsleitfaden#75, Prüfen>>, welche Preisspalten im Menü *System » Systemeinstellungen » Aufträge » Zahlung » Währungen* mit Währungen verknüpft sind. Sicherstellen, dass an allen Artikeln in diesen Preisspalten Beträge hinterlegt sind. +
*Wichtig:* Ist kein Betrag hinterlegt, wird bei gleicher Währung der Standardpreis der Variante übernommen. Je nach Wechselkurs kann diese Einstellung zu stark abweichenden neuen Preisen führen.

|3
|*System » Systemeinstellungen » CRM » Kundenklassen*
|Greift, wenn Preisspalten für Auftragsherkunft und Währungen keine Rolle spielen. +
*Hinweis:* Mengenrabatte werden ab sofort nicht mehr bei den Kundenklassen, sondern als Verkaufspreise definiert.
a|
* Pro vorhandene und benutzte Sichtbarkeit (*Zeige jedem*, *Nur B2C-Kunden*, *Nur B2B-Kunden*) wird ein Verkaufspreis pro Preisspalte angelegt. Daher Einstellung *Preissichtbarkeit* in Bezug auf die <<basics/admin-aufgaben/migrationsleitfaden#90, Kundenklassen prüfen>>.

|4
|*System » Systemeinstellungen » Mandant » Mandant wählen » Webshop » Einstellungen*
|Greift nur, wenn keine anderen Einstellungen höhere Priorität haben.
a|
* Eingestellte Preisspalten in den Bereichen <<basics/admin-aufgaben/migrationsleitfaden#60, Herkunft, Währung, Kundenklasse, Mandant (Shop) prüfen>>. Ist dieselbe Preisspalte in mehr als einem Bereich eingestellt, werden diese Einstellungen kombiniert. Diese Kombinationen dahingehend prüfen, dass sich daraus kein unerwünschtes neues Verhalten ergibt.
|====



Die Preisspalten werden einzeln zu Verkaufspreisen migriert. Zunächst werden dabei der Standardpreis mit den vorhandenen Einstellungskombinationen anhand der oben beschriebenen Priorität migriert und daraus die relevanten Verkaufspreise erstellt. Danach werden alle weiteren benutzten Preisspalten, d.h. Preisspalte 1, Preisspalte 2 etc., einzeln migriert. Preisspalten, die nirgendwo genutzt werden und in keinem Artikel einen Preis enthalten, werden nicht migriert.

[#30]
== Vorbereitungen im Detail

[TIP]
.Tipp: Artikeldaten prüfen und ggf. aktualisieren
====
Prüfe vor der Migration die Aktualität deiner Artikeldaten. Lösche alte Testartikel und prüfe vor allem die Preise. Diese Vorarbeit vereinfacht die Datenmigration und reduziert deinen Pflegeaufwand nach der Migration.
====

Für eine reibungslose Migration deiner Artikeldaten musst du die in diesem Kapitel beschriebenen Vorbereitungen treffen. Führe diese Vorbereitungen unbedingt vor der Migration deiner Artikeldaten aus, da sonst ein hoher Korrekturaufwand nach der Migration entsteht. Sogar der Verlust von Daten kann die Folge sein.

[NOTE]
====
Die hier beschriebenen Einstellungen und Vorbereitungen nimmst du bereits vor der Migration in deiner aktuellen plentymarkets 6 Version vor.
====

=== Systemeinstellungen vor dem Wechsel auf plentymarkets 7

[#35]
==== Migrationseinstellungen vornehmen

Nimm die folgenden Migrationseinstellungen vor, bevor du auf plentymarkets 7 wechselst.

[.instruction]
Migrationseinstellungen vornehmen:

. Öffne das Menü *System » Systemeinstellungen » Einstellungen » Daten » Migration*.
. Klappe *Artikel (Einstellungen für den Wechsel auf plentymarkets 7)* auf. +
→ Die Migrationseinstellungen werden eingeblendet.
. Nimm die Einstellungen vor. Beachte dazu <<migrationseinstellungen>>.
. *Speichere* die Einstellungen.

[[Migrationseinstellungen]]
.Migrationseinstellungen
[cols="1,3"]
|====
|Einstellung |Erläuterung

|*Hauptvariante erstellen*
|Wählen, ob für Artikel mit Varianten eine Hauptvariante aus den Artikeldaten erstellt werden soll. +
*Ja* (Standardeinstellung) = Eine zusätzliche Variante wird erstellt, an der die Artikeldaten hinterlegt werden. Diese Variante wird zur Hauptvariante. +
*Beispiel:* Aus einem Artikel mit 4 Varianten werden nach der Migration 5 Varianten. Der ehemalige Artikel wird zur Hauptvariante. +
*Nein* = Die am Artikel gespeicherten Daten werden verworfen. +
*Beispiel:* Aus einem Artikel mit 4 Varianten werden nach der Migration 4 Varianten. Eine der ehemaligen Varianten wird zur Hauptvariante. +
*Wichtig:* Bei Auswahl der Option *Nein* werden die Artikeldaten nicht migriert. Die Daten werden verworfen. Bei Marktplätzen (z.B. Amazon, Zalando) mit einer Parent-Child-Artikelbeziehung findet kein Abgleich zwischen plentymarkets und dem Marktplatz statt. Wir empfehlen daher die Standardeinstellung *Ja*.

|*Zusammenführung Einheit 1 + 2*
|Felder Einheit 1 und Einheit 2 werden bei der Migration zum Feld *Variantenname* zusammengefasst. +
Wählen, wie die Einheiten migriert werden sollen: +
*Einheit 1 + Einheit 2* = Inhalt der Felder wird in der Reihenfolge *Einheit 1**Einheit 2* zusammengefasst. Trennzeichen mit Option *Trennzeichen bei Zusammenfassen Einheit 1 + 2* festlegen. +
*Einheit 2 + Einheit 1* = Inhalt der Felder wird in der Reihenfolge *Einheit 2**Einheit 1* zusammengefasst. Trennzeichen mit Option *Trennzeichen bei Zusammenfassen Einheit 1 + 2* festlegen. +
*Einheit 1* = Nur Inhalt der Felder *Einheit 1* wird migriert. Inhalt der Felder *Einheit 2* wird nicht migriert. +
*Einheit 2* = Nur Inhalt der Felder *Einheit 2* wird migriert. Inhalt der Felder *Einheit 1* wird nicht migriert. +

|*Trennzeichen für Zusammenführung Einheit 1 + 2*
|Bei Auswahl der Optionen *Einheit 1 + Einheit 2* oder *Einheit 2 + Einheit 1*: +
Trennzeichen eingeben, die zwischen den beiden Einheiten eingefügt werden sollen. Als Trennzeichen können beliebe Kombinationen aus Leerzeichen, Zeichen (Komma, Semikolon, Schrägstrich etc.) und Buchstaben eingegeben werden. +
*Hinweis:* Der Inhalt des Felds wird direkt übernommen. Leerzeichen müssen also eingegeben werden, wenn Leerzeichen als Bestandteil der Trennzeichen eingefügt werden sollen.

|*Doppelte Nummern*
|In plentymarkets 7 ist die Variantennummer systemweit eindeutig. Bei doppelt vergebenen Artikel-/Variantennummern übernimmt die zuerst migrierte Variante die vorhandene Nummer. Für alle weiteren Varianten wird eine neue, eindeutige Variantennummer vergeben. Festlegen, nach welchem Muster diese Variantennummern vergeben werden sollen. +
*Neue Nummer generieren* = Die zuerst migrierte Variante übernimmt die Artikel-/Variantennummer. Für die weiteren Varianten werden neue Nummern generiert. Im Menü <<artikel/artikel-verwalten#15, System » Systemeinstellungen » Artikel » Einstellungen>> das Muster aus Präfix und nächster Variantennummer festlegen, nach dem diese Nummern generiert werden sollen. +
*Vorhandene durch Counter eindeutig machen* = Die zuerst migrierte Variante übernimmt die Artikel-/Variantennummer. Für alle weiteren Varianten wird an diese Nummer eine aufsteigende Zahl angefügt, um die Nummer eindeutig zu machen. +
*Beispiel:* Die Artikel-/Variantennummer XY12345 befindet sich dreimal im System. Bei der Migration werden drei Varianten angelegt. Diese neuen Varianten haben die Variantennummern XY12345, XY123452 und XY123453.
|====

[#38]
==== Muster für neue Variantennummern festlegen

Gehe wie unten beschrieben vor, um vor dem Wechsel auf plentymarkets 7 festzulegen, nach welchem Muster neue Variantennummern erstellt werden sollen.

. Öffne das Menü *System » Systemeinstellungen » Artikel » Einstellungen*.
. Nimm die Einstellungen für *Präfix für neue Variantennummern (ab plentymarkets 7)* und *Nächste Variantennummer (ab plentymarkets 7)* vor. Beachte dazu <<muster-variantennummer>>.
. *Speichere* die Einstellungen.

[[muster-variantennummer]]
.Muster für nächste Variantennummer
[cols="1,3"]
|====
|Einstellung |Erläuterung

|*Präfix für neue Variantennummern (ab plentymarkets 7)*
|Präfix eingeben, das beim Generieren neuer Variantennummern vorangestellt werden soll. Ist das Feld leer, wird das Präfix *NEW-* verwendet. +
*Hinweis:* Einstellung greift erst ab plentymarkets 7.

|*Nächste Variantennummer (ab plentymarkets 7)*
|Variantennummer eingeben, die als Nächstes vergeben werden soll. Alle weiteren neuen Variantennummern werden aufsteigend ab dieser Nummer generiert. +
Die angezeigte nächste Variantennummer wird aktualisiert, sobald eine neue Variantennummer generiert wurde. Es wird also immer die Variantennummer angezeigt, die beim Erstellen der nächsten Variante vergeben wird. +
*Hinweis:* Einstellung greift erst ab plentymarkets 7.
|====

=== Artikeldaten

[#55]
==== EAN/GTIN prüfen

Bei der Migration der EAN/GTIN werden führende Nullen abgeschnitten. Da sich hierdurch die Zeichenlänge des Codes ändert, wird die EAN/GTIN nicht als GTIN migriert, sondern als Code128 oder UPC angelegt. Prüfe daher vor der Migration, ob GTIN mit einer oder mehreren führenden Nullen im System vorhanden sind. Wenn EAN mit führenden Nullen existieren, korrigiere diese GTIN <<basics/admin-aufgaben/migrationsleitfaden#100, nach der Migration>>.

Gehe wie unten beschrieben vor, um die EAN-/GTIN-Daten zu exportieren.

[.instruction]
EAN-Daten exportieren:

. Öffne das Menü *Datenaustausch » Export » Dynamischer Export*.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/item#, Item>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-item>>.
. Öffne die CSV-Datei.
. Prüfe die GTIN. +
❏ Sind GTIN vorhanden, die mit einer oder mehreren Nullen beginnen? +
→ Wenn keine GTIN mit führenden Nullen vorhanden sind, besteht kein Handlungsbedarf.
. Wenn GTIN mit führenden Nullen vorhanden sind, speichere die CSV-Datei. Du benötigst diese GTIN-Daten, um die GTIN <<basics/admin-aufgaben/migrationsleitfaden#100, nach der Migration>> zu korrigieren.

[[datenformat-item]]
.Datenfelder Datenformat *Item*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*ItemId*
|Keine
|Artikel-ID

|*ItemEAN*
|Keine
|GTIN-Code eines Artikels

|*ItemEAN2*
|Keine
|Weiterer GTIN-Code eines Artikels

|*ItemEAN3*
|Keine
|Weiterer GTIN-Code eines Artikels

|*ItemEAN4*
|Keine
|Weiterer GTIN-Code eines Artikels
|====


[#50]
==== Einheiten prüfen

Bei der Migration der Preissets stellen die Einheiten eine Besonderheit dar und erfordern daher deine Aufmerksamkeit.

[.subhead]
Felder "Einheit 1" und "Einheit 2" prüfen

Die Felder *Einheit 1* und *Einheit 2* werden in der neuen Artikelarchitektur durch das Feld *Variantenname* ersetzt. In den <<basics/admin-aufgaben/migrationsleitfaden#35, Migrationseinstellungen>> legst du fest, ob der Inhalt nur eines Feldes oder beider Felder migriert wird. Sollen beide Felder migriert werden, gibst du die Trennzeichen ein, die bei der Migration zwischen den Einheiten eingefügt werden sollen. Prüfe daher vor der Migration, welche Trennzeichen geeignet sind, damit der zusammengesetzte Variantenname, der sich hieraus ergibt, deinen Anforderungen entspricht. Passe ggf. den Inhalt der Felder *Einheit 1* und/oder *Einheit 2* an.

.Beispiel für Migration der Felder *Einheit 1* und *Einheit 2*
[cols="1,3"]
|====
|Alt |Neu

|*Einheit 1:* 50 g +
*Einheit 2:* 60,00 € je 1000 g +
*Zusammenführung Einheit 1 + 2*: Einheit 1 + Einheit 2 +
*Trennzeichen für Zusammenführung Einheit 1 + 2*: "; " (d.h. Semikolon+Leerzeichen)
|*Variantenname:* 50 g; 60,00 € je 1000 g
|====

[.subhead]
Felder "Einheit" und "Inhalt" prüfen

In der alten Artikelarchitektur wurden Artikel durch eine SKU, die sich aus *Artikel-ID*, *Preis-ID* und *Varianten-ID* zusammensetzte, eindeutig gekennzeichnet. In der neuen Architektur wird die Varianten-ID zum eindeutigen Bezeichner. In der neuen Architektur darf allerdings eine Variante in der Konstellation *AttributeValueSetID* + *Einheit* + *Inhalt* nur einmal vorkommen. Bei der Migration von Artikeln mit mehreren Preissets, in denen *Inhalt* und *Einheit* identisch sind, wird nur das erste Preisset migriert. Alle weiteren Preissets des Artikels verfallen. Prüfe daher, ob es Artikel mit mehreren Preissets gibt, bei denen für mehrere Preissets die gleiche Einheit und der gleiche Inhalt hinterlegt wurden. Ändere die Einheit und den Inhalt der zusätzlichen Preissets.

Das folgende Beispiel verdeutlicht die vor der Migration erforderlichen Anpassungen anhand von Zigarillopackungen.

.Beispiel für identische Inhalte bei *Inhalt* und *Einheit*
[cols="1,3"]
|====
|Preisset 1 |Preisset 2

|Packung mit 20 Zigarillos
|Packung mit 5 Zigarillos

|*Preis*: 5,80 Euro
|*Preis*: 1,80 Euro

|*Einheit*: Päckchen
|*Einheit*: Päckchen

|*Inhalt*: 1
|*Inhalt*: 1

|*Einheit 1*: 20
|*Einheit 1*: 5

|*Einheit 2*: Zigarillos
|*Einheit 2*: Zigarillos
|====


In diesem Beispiel ist es sinnvoll, die *Einheit* auf *Stück* und als *Inhalt* für das Preisset 1 *20* und für das Preisset 2 *5* einzugeben. Den Inhalt der Felder *Einheit 1* und *Einheit 2* löschst du. Der neue Datensatz sieht dann wie folgt aus:

.Beispiel für angepasste Inhalte bei *Inhalt* und *Einheit*
[cols="1,3"]
|====
|Preisset 1 |Preisset 2

|Packung mit 20 Zigarillos
|Packung mit 5 Zigarillos

|*Preis*: 5,80 Euro
|*Preis*: 1,80 Euro

|*Einheit*: Stück
|*Einheit*: Stück

|*Inhalt*: 20
|*Inhalt*: 5

|*Einheit 1*:
|*Einheit 1*:

|*Einheit 2*:
|*Einheit 2*:
|====

[.subhead]
Vorgehensweise

Prüfe, ob es Artikel mit mehreren Preissets gibt, bei denen für mehrere Preissets die gleiche Einheit und der gleiche Inhalt hinterlegt sind. Führe dazu einen dynamischen Export mit dem Datenformat <<daten/export-import/datenformate/itemprice#, ItemPrice>> aus. Gehe dazu wie unten beschrieben vor.

[.instruction]
Einheiten prüfen:

. Öffne das Menü *Datenaustausch » Export » Dynamischer Export*.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/itemprice#, ItemPrice>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-itemprice>>.
. Exportiere das Datenformat.
. Sortiere die exportierten Daten nach der Spalte *ItemID*, um Artikel mit mehreren Preissets zu ermitteln.
. Prüfe bei allen Artikeln mit mehreren Preissets den Inhalt der Felder *Inhalt* und *Einheit*. +
❏ Ist der Inhalt der Spalten *Unit* und *Lot* bei mehreren Preissets identisch?
. Passe den Inhalt der Spalten bei identischem Inhalt an (siehe Beispiel oben).
. Prüfe nun für alle Artikel den Inhalt der Spalten *Unit 0* und *Unit 1*. +
❏ Benötigst du den Inhalt beider Spalten? +
❏ Wenn ja, können diese Felder ohne Änderungen in einem Feld zusammengeführt werden? +
❏ Welche Reihenfolge ist geeignet? *Einheit 1 + Einheit 2* oder *Einheit 2 + Einheit 1*? +
❏ Welche Trennzeichen sind geeignet, um den Inhalt zusammenzuführen?
. Passe den Inhalt der Spalten ggf. so an, dass die Spalten zusammengeführt eine sinnvolle Einheit ergeben.
. Speichere die Änderungen an der CSV-Datei.
. <<daten/export-import/daten-importieren#, Importiere>> die CSV-Datei zurück in plentymarkets, wenn du Änderungen vorgenommen haben.
. Nimm im Menü *System » Systemeinstellungen » Einstellungen » Daten » Migration* geeignete Einstellungen für die Optionen *Zusammenführung Einheit 1 + 2* und *Trennzeichen für Zusammenführung Einheit 1 + 2* vor.

[[datenformat-itemprice]]
.Datenfelder Datenformat *ItemPrice*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*ItemID*
|Abgleich
|Artikel-ID

|*PriceID*
|Abgleich
|ID des Preissets +
*Hinweis:* Aktion *Abgleich* wählen, da sonst pro Artikel nur Preisset 1 exportiert wird.

|*Position*
|Keine
|Sortierung mehrerer Preissets

|*Price*
|Import
|Preis des Artikels

|*Price1* bis *Price12*
|Import
|Preis 1 bis Preis 12 des Artikels

|*Unit*
|Import
|Standardeinheit

|*Lot*
|Import
|Inhalt; definiert die Verpackungseinheiten von "unit", die pro Einheit enthalten sind.

|*Unit0*
|Import
|Einheit 1

|*Unit1*
|Import
|Einheit 2
|====


==== Kategorieverknüpfungen prüfen

In plentymarkets 7 müssen Artikel mit mindestens einer Kategorie verknüpft sein. Artikel, die nicht mit einer Kategorie verknüpft sind, werden nicht im Webshop angezeigt. Stelle daher vor der Migration sicher, dass alle Artikel mit einer Kategorie verknüpft sind. Gehe wie unten beschrieben vor, um zu prüfen, ob alle Artikel mit Kategorien verknüpft sind.

[.instruction]
Kategorieverknüpfungen prüfen:

. Öffne das Menü *Artikel » Artikel bearbeiten*.
. Setze den Filter *Inaktiv* auf *ALLE*.
. Aktiviere den Filter *ohne Kategorie suchen*. +
→ Alle Artikel ohne Kategorieverknüpfung werden angezeigt.
. Ordne vor der Migration allen Artikeln ohne Kategorieverknüpfungen entweder manuell oder per Gruppenfunktion eine Kategorie zu.

=== Preisspalten

[#60]
==== Preisspalten-Kombinationen prüfen

Bei der Migration werden die verschiedenen Einstellungen für Preisspalten kombiniert, um die neuen Verkaufspreise zu bilden. Prüfe daher vor der Migration die in den Bereichen *Auftragsherkunft*, *Währungen*, *Kundenklassen* und *Mandant (Shop)* hinterlegten Preisspalten. Ist dieselbe Preisspalte in mehr als einem Bereich eingestellt, kann sich aus dieser Kombination ein unerwünschtes neues Verhalten ergeben. Prüfe daher die Logik dieser Kombinationen. Gehe dazu wie unten beschrieben vor.

[IMPORTANT]
.0-Euro-Preise
====
Sind Preisspalten mit Kundenklassen verknüpft, für die kein Preis eingetragen ist, also der Wert von 0,00 Euro hinterlegt ist, wird in plentymarkets 6 als Fallback der Standardpreis verwendet. Dieses Verhalten wird auch bei der Migration berücksichtigt. Bei der Migration werden solche Preise daher mit dem ehemaligen Standardpreis befüllt. Wenn ein 0-Euro-Preis gewünscht ist, müssen die Preise daher nach der Migration manuell bearbeitet werden.
====

[.instruction]
Preisspalten-Kombinationen prüfen:

. Öffne die in <<menuepfade-preisspalten>> aufgeführten Menüs.
. Notiere sich die dort hinterlegten Preisspalten.
. Vergleiche die notierten Preisspalten. +
❏ Ist dieselbe Preisspalte in mehr als einem Bereich eingestellt? +
❏ Entspricht die Logik, die sich aus dieser Kombination ergibt, deinen Anforderungen?
. Passe die Einstellungen bei Bedarf an.

[[menuepfade-preisspalten]]
.Menüpfade für Preisspalten
[cols="1,3"]
|====
|Pfad |Erläuterung

|*System » Systemeinstellungen » Aufträge » Auftragsherkunft*
|Einstellung in Spalte *Preisspalte* aller Herkünfte prüfen.

|*System » Systemeinstellungen » Aufträge » Zahlung » Währungen*
|Einstellung in der Dropdown-Liste *Preisspalte* aller Währungen prüfen.

|*System » Systemeinstellungen » CRM » Kundenklassen*
|Einstellung *Preisspalte* aller Kundenklassen prüfen.

|*System » Systemeinstellungen » Mandant » Mandant wählen » Webshop » Einstellungen*
|Einstellung *Preisspalte* aller Mandanten prüfen.
|====


[#70]
==== Währungseinstellungen prüfen

[.subhead]
Währungsumrechnung bei mehreren Mandanten

Bei der Migration der Preissets werden unter Umständen viele Verkaufspreise angelegt. Wenn du mit mehreren Mandanten arbeitest, solltest du vor der Migration die Einstellung *Währungsumrechnung* aller Mandanten prüfen. Wenn bei einigen Mandanten die Einstellung *Verwende Preisspalte* und bei anderen die Einstellung *Live-Umrechnung* eingestellt ist, prüfe, ob diese Einstellungen korrekt sind. Vereinheitliche wenn sinnvoll die Einstellungen, um die Anzahl der neu erstellten Verkaufspreise zu reduzieren. Folgendes Vorgehen wird empfohlen.

[.instruction]
Währungseinstellungen prüfen:

. Öffne die Menüs *System » Systemeinstellungen » Mandant » Mandant wählen » Webshop » Währung* aller Mandanten.
. Notiere dir die Einstellung bei *Währungsumrechnung* aller Mandanten.
. Vergleiche die Einstellungen. +
❏ Entsprechen die Einstellungen deinen Anforderungen?
. Vereinheitliche wenn sinnvoll die Einstellungen. +
→ Wenn du Änderungen an der Einstellung *Währungsumrechnung* vornehmen, musst du auch die damit verbundenen Preise anpassen.

[#75.subhead]
Währungseinstellungen bei Mandanten mit Einstellung "Verwende Preisspalte"

[TIP]
.Nur bei Mandanten mit der Einstellung "Verwende Preisspalte"
====
Die Währungseinstellungen musst du nur prüfen, wenn du Mandanten hast, bei denen im Menü *System » Systemeinstellungen » Mandant » Mandant wählen » Webshop » Währung* die Option *Währungsumrechnung* auf *Verwende Preisspalte* steht.
====

Prüfe nun für Mandanten mit der Einstellung *Verwende Preisspalte*, welche Preise im Menü *System » Systemeinstellungen » Aufträge » Zahlung » Währungen* mit Währungen verknüpft sind. Stelle dann sicher, dass an allen Artikeln für diese Preise Beträge hinterlegt sind. Ist kein Betrag hinterlegt, wird der Standardpreis der Variante übernommen. Die Währung bleibt jedoch gleich. Je nach Wechselkurs kann diese Einstellung zu stark abweichenden Preisen führen. Gehe wie unten beschrieben vor, um die Einstellungen zu prüfen.

[.instruction]
Währungseinstellungen bei Mandanten mit Einstellung "Verwende Preisspalte" prüfen:

. Öffne die Menüs *System » Systemeinstellungen » Mandant » Mandant wählen » Webshop » Währung* aller Mandanten.
. Notiere sich die Mandanten mit der Einstellung "Verwende Preisspalte" für die Option *Währungsumrechnung*.
. Öffne das Menü *System » Systemeinstellungen » Aufträge » Zahlung » Währungen*.
. Notiere dir die Währungen, denen ein anderer Preis als der Standardpreis zugeordnet wurde, und den zugeordneten Preis.
. Öffne das Menü *Datenaustausch » Export » Dynamischer Export*.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/itemprice#, ItemPrice>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-itemprice-2>>.
. Exportiere das Datenformat.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/item#, Item>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-item>>.
. Öffne beide CSV-Dateien.
. Filtere die Daten der Datei *Item* nach den gesuchten Mandanten (Spalte *ItemStoreIDs*).
. Filtere die Daten der Datei *ItemPrice* nach den Preisen, die du in Schritt 4 notiert hast.
. Vergleiche die gefilterten Artikel-IDs der beiden Dokumente. +
❏ Sind für alle diese Preise Beträge hinterlegt? +
→ Sind keine Beträge hinterlegt, wird für den Preis der Standardpreis der Variante übernommen. Die Währung bleibt gleich.
. Prüfe für Artikel ohne Beträge, ob der Standardpreis in der eingestellten Währung deinen Anforderungen entspricht. Hinterlege sonst den gewünschten Preis in der Datei *ItemPrice*.
. Speichere deine Änderungen an der CSV-Datei.
. <<daten/export-import/daten-importieren#, Importiere>> die CSV-Datei *ItemPrice* zurück in plentymarkets, wenn du Änderungen vorgenommen hast.

[[datenformat-itemprice-2]]
.Datenfelder Datenformat *ItemPrice*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*ItemId*
|Abgleich
|Artikel-ID

|*PriceId*
|Abgleich
|ID des Preissets +
*Hinweis:* Aktion *Abgleich* wählen, da sonst pro Artikel nur Preisset 1 exportiert wird.

|*Position*
|Keine
|Sortierung mehrerer Preissets

|*Price*
|Import
|Preis des Artikels

|*Price1* bis *Price12*
|Import
|Preis 1 bis Preis 12 des Artikels
|====

[[datenformat-item]]
.Datenfelder Datenformat *Item*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*ItemId*
|Abgleich
|Artikel-ID

|*ItemStoreIDs*
|Keine
|IDs der Mandanten
|====



[#80]
==== Preisspalten der Herkünfte abgleichen

Vergleiche die im Menü *System » Systemeinstellungen » Aufträge » Auftragsherkunft* hinterlegten Preisspalten mit der Einstellung bei Herkünften mit eigenen Preisspalten und vereinheitliche diese Einstellungen, wenn sie voneinander abweichen. Diese Herkünfte sind:

* Amazon
* Flubit
* Fruugo
* eBay
* Hitmeister
* Neckermann
* Otto
* Shopgate

*Fallback:* Bei Herkünften mit eigenen Preisspalten an den Einstellungen (z.B. Shopgate), bei denen der Standardpreis eingestellt ist, wird, wenn unter *System » Systemeinstellungen » Aufträge » Auftragsherkünfte* eine Preisspalte explizit angegeben ist, diese Einstellung und nicht der Standardpreis migriert.

Gehe wie unten beschrieben vor, um die eingestellten Preisspalten zu prüfen.

[.instruction]
Preisspalten der Herkünfte abgleichen:

. Öffne das Menü *System » Systemeinstellungen » Aufträge » Auftragsherkunft*.
. Notiere sich die eingestellte Preisspalte für die oben aufgeführten Marktplätze.
. Öffne die in <<marktplaetze-preisspalten>> aufgeführten Menüs. +
❏ Stimmen die dort eingestellten Preisspalten mit den notierten Einstellungen überein?
. Passe die Einstellungen bei Bedarf an.
. Prüfe auch die Preise und passe die Preise ggf. an, wenn du Änderungen an den Einstellungen vornimmst.

[[marktplaetze-preisspalten]]
.Marktplätze mit eigenen Preisspalten
[cols="1,3"]
|====
|Marktplatz |Pfad

|Amazon
|*System » Systemeinstellungen » Märkte » Amazon » Einstellungen*

|Flubit
|*System » Systemeinstellungen » Märkte » Flubit » Einstellungen*

|Fruugo
|*System » Systemeinstellungen » Märkte » Fruugo » Einstellungen*

|eBay
|*System » Systemeinstellungen » Märkte » eBay » Einstellungen*

|Hitmeister
|*System » Systemeinstellungen » Märkte » Hitmeister » Einstellungen*

|Neckermann
|*System » Systemeinstellungen » Märkte » Neckermann Österreich Enterprise +
System » Systemeinstellungen » Märkte » Neckermann Österreich Cross-Docking*

|Otto
|*System » Systemeinstellungen » Märkte » Otto » Integration*

|Shopgate
|*System » Systemeinstellungen » Märkte » Shopgate*
|====

[#90]
==== Preissichtbarkeit in Bezug auf Kundenklassen prüfen

Bei der Migration der Preise wird pro vorhandene und benutzte Sichtbarkeit, d.h. *Zeige jedem*, *Nur B2C-Kunden* und *Nur B2B-Kunden*, ein Verkaufspreis pro Preisspalte angelegt. Es entstehen also bis zu drei Verkaufspreise pro Preisspalte. Prüfe daher vor der Migration die Einstellung *Preissichtbarkeit* in Bezug auf die Kundenklassen. Gehe dazu wie unten beschrieben vor.

[.instruction]
Preissichtbarkeit in Bezug auf Kundenklassen prüfen:

. Öffne das Menü *Datenaustausch » Export » Dynamischer Export*.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/itemprice#, ItemPrice>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-itemprice-3>>.
. Exportiere das Datenformat.
. Prüfe die Werte in der Spalte *PriceShowOnly*. +
❏ Ist die Sichtbarkeit auf bestimmte Kundenklassen beschränkt? +
❏ Entsprechen diese Beschränkungen deinen Anforderungen? +
❏ Können Einstellungen vereinheitlicht werden?
. Passe ggf. Einstellungen an.
. Speichere deine Änderungen an der CSV-Datei.
. <<daten/export-import/daten-importieren#, Importiere>> die CSV-Datei zurück in plentymarkets, wenn du Änderungen vorgenommen hast.

[[datenformat-itemprice-3]]
.Datenfelder Datenformat *ItemPrice*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*ItemId*
|Abgleich
|Artikel-ID

|*PriceId*
|Abgleich
|ID des Preissets +
*Hinweis:* Aktion *Abgleich* wählen, da sonst pro Artikel nur Preisset 1 exportiert wird.

|*Position*
|Keine
|Sortierung mehrerer Preissets

|*Price*
|Import
|Preis des Artikels

|*Price1* bis *Price12*
|Import
|Preis 1 bis Preis 12 des Artikels

|*PriceShowOnly*
|Import
|Beschränke Preisset auf: +
*0* = Alle +
*1* = B2C-Kunden +
*2* = B2B-Kunden
|====


=== Amazon-Artikelverfügbarkeiten für SKU-Migration prüfen

Damit SKUs für Amazon korrekt migriert werden, müssen zwingend bestimmte Einstellungen vor der Migration geprüft werden. +

Zum einen musst du im Menü *Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Verfügbar* prüfen, ob bei allen von Ihnen genutzten Amazon-Plattformen sowie für die *Web-API* der Haken gesetzt ist. Diese Einstellungen sind zwingend erforderlich. Andernfalls werden die SKUs in plentymarkets 7 beim Export mit einer SKU der neuen Logik erzeugt. Dadurch werden Artikel im Seller Central doppelt gelistet. +

Des Weiteren sollten sowohl die Einstellung *Amazon-Abwicklung (FBA)* als auch die Einstellung *Versand durch Amazon (FBA)* im Menü *Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Verfügbar* aktiviert sein. Sind diese Einstellungen nicht aktiviert, können keine FBA-SKUs migriert werden.

=== Verwendung von Template-Variablen in Layout-Vorlagen

Wenn du über deinen eBay-Shop Artikel außerhalb von Deutschland verkaufst und in <<maerkte/ebay/ebay-einrichten#2800, Layout-Vorlagen>>, die mit Listings verknüpft sind, <<maerkte/ebay/ebay-einrichten#3050, Template-Variablen>> für Artikelmerkmale verwenden, musst du vor dem Wechsel auf plentymarkets 7 Übersetzungen in den Landessprachen speichern. Stelle sicher, dass du für jedes Land, in dem du deine Artikel zum Verkauf anbietest, Übersetzungen speicherst. Andernfalls kann das Merkmal in der Beschreibung des Listings nicht angezeigt werden.

Übersetzungen für den Merkmalnamen und den Merkmalwert sind erforderlich, wenn du die Template-Variablen *{% GetItemPropertyByName() %}* und *{% GetItemPropertyById() %}* in Layout-Vorlagen verwendest.

[.instruction]
Übersetzungen für Merkmalnamen hinterlegen:

. Öffne das Menü *System » Systemeinstellungen » Artikel » Merkmale*.
. Klappe das Merkmal auf.
. Wähle im Bereich *Webshop* in der Dropdown-Liste *Sprache* die Landessprache.
. Gib im Bereich *Webshop* unter *Name* den Namen in der Landessprache ein.
. *Speichere* die Einstellungen.

[.instruction]
Übersetzungen für Merkmalwerte hinterlegen:

. Öffne das Menü *Artikel » Artikel bearbeiten » Artikel öffnen » Tab: Merkmale*.
. Wähle in der Dropdown-Liste *Cross-Selling* die Standardsprache.
. Gib im Freitextfeld *Text* die Übersetzung für die Landessprache ein.
. *Speichere* die Einstellungen.

== Externe Shops
*In plentymarkets 6 wurden für die Shopware-Integration externe Shops bereitgestellt. In plentymarkets 7 wird diese Anbindung an Shopware jedoch über reguläre Mandanten (Shops) realisiert. Bei der Migration auf plentymarkets 7 werden externe Shops daher in vollwertige Mandanten (Shops) umwandelt. Diese Mandanten können über den plentymarkets Connector an Shopware angebunden werden. Beachte jedoch, dass vollwertige Mandanten kostenpflichtig sind. Prüfe daher vor der Migration, ob in deinem System externe Shops vorhanden sind. Externe Shops, die du nicht mehr benötigst, solltest du vor der Migration löschen.

[TIP]
.Externe Shops ohne Shopware-Anbindung
====
Technisch war es in plentymarkets 6 möglich, externe Shops für andere Zwecke als für die Anbindung an Shopware zu nutzen. Prüfe daher auch, ob externe Shops in deinem System vorhanden sind, wenn du den Shopware Connector nicht verwendest. Diese Prüfung ist vor allem wichtig, wenn du die externen Mandanten nicht für die Anbindung von Shopware, sondern für andere Anwendungsfälle verwendest, z.B. für Marktplatzverfügbarkeiten, Nummernkreise oder Rechnungsstellung.
====

=== System auf externe Shops prüfen

Externe Shops haben den Webstore-Typ *shopware* oder *extern* und haben außerdem keine eigene plenty ID. Gehe wie unten beschreiben vor, um zu prüfen, ob externe Shops in deinem System vorhanden sind:

. Öffne das Menü *System » Systemeinstellungen » Mandant*.
. Klicke auf das Plus des ersten Mandanten (Shops). +
→ Das Mandantenmenü wird eingeblendet.
. Öffne das Menü *System » Systemeinstellungen » Mandant » Mandant wählen » Grundeinstellungen* des Mandanten.
. Prüfe den *Webstore-Typ*. +
→ Shops des Typs *shopware* oder *extern* sind externe Shops. +
*_Tipp:_* Bei externen Shops ist außerdem die Option *plenty ID* leer. +
→ Wenn es sich um einen externen Shop handelt, prüfe, ob er aktiv verwendet wird. +
→ Lösche den externen Shop, wenn du ihn nicht benötigen.
. Prüfe alle weiteren in deinem System angelegten Mandanten (Shops) auf dieselbe Weise.

=== Nicht benötigte externe Shops löschen

Gehe wie unten beschrieben vor, um nicht mehr benötigte externe Shops vor der Migration zu löschen.

. Öffne das Menü *System » Systemeinstellungen » Mandant*.
. Zeige mit der Maus auf den externen Shop, den du löschen möchtest. +
→ Ein Pfeil nach unten wird eingeblendet.
. Klicke auf den Pfeil, um das Kontextmenü zu öffnen.
. Klicke im Kontextmenü auf *Löschen*. +
→ Eine Sicherheitsabfrage wird geöffnet.
. Klicke in der Sicherheitsabfrage auf *Löschen*. +
→ Der externe Shop wird gelöscht.

=== plentymarkets an Shopware anbinden

Bei der Migration deines Systems zu plentymarkets 7 werden die Daten deiner externen Shops in vollwertige Mandanten (Shops) überführt. Die Integration deines externen Shopware-Systems mit dem link:https://github.com/plentymarkets/plentymarkets-shopware-connector/releases[plentyConnector^] nimmst du nach der Migration vor. Informationen dazu findest du in der link:https://docs.google.com/document/d/10mPeV3xqx4We71dYQdPmJK2qvb21Rpym6FG_tKwHKfc/edit#heading=h.h38ew7hip4tl[Dokumentation des plentymarkets Shopware Connector^].


[#210]
== Termin für Migration vereinbaren

Nachdem du die in diesem Leitfaden beschriebenen Vorbereitungen getroffen hast, vereinbarst du über unser Ticket-System einen Termin für die Migration auf plentymarkets 7. Gehe wie unten beschrieben vor, um ein Ticket zu erstellen.

[.instruction]
Termin für Migration vereinbaren:

. Öffne das Menü *Start » Support-Ticket*.
. Klicke im Bereich *Ticket* auf *Neues Ticket anlegen*.
. Gib einen Titel ein, der deine Anfrage kurz definiert.
. Wähle *Auf plentymarkets 7 wechseln* aus der Dropdown-Liste. +
→ Weitere Optionen werden eingeblendet.
. Wähle das plentymarkets System aus der Dropdown-Liste, das migriert werden soll.
. Wähle, ob du *plentymarkets 7 Stable* oder *plentymarkets 7 Beta* nutzen möchten.
. Klicke auf *Anlegen*, um das Ticket zu erstellen. +
→ Das Ticket wird erstellt und ein plentymarkets Mitarbeiter wird dich über das weitere Vorgehen informieren.

[IMPORTANT]
.Systemerreichbarkeit während der Migration
====
Während der Migration ist dein System nicht erreichbar. Bei kleineren Systemen dauert die Migration ca. 15 Minuten. Bei großen Systemen ist dein System bis zu mehrere Stunden nicht erreichbar.
====

== Nach der Migration

[#100]
=== GTIN korrigieren (nur bei GTIN mit führenden Nullen)

Bei der Migration der EAN/GTIN werden führende Nullen abgeschnitten. Da sich hierdurch die Zeichenlänge des Codes ändert, wird die EAN/GTIN nicht als GTIN migriert, sondern als Code128 oder UPC angelegt. Nach der Migration musst du daher die als Code128 oder UPC importierten GTIN korrigieren. Das Datenformat *Item* ist nicht mit plentymarkets 7 kompatibel. Daher musst du die Korrektur manuell vornehmen. Gehe dazu wie unten beschrieben vor.

[.instruction]
GTIN mit führenden Nullen korrigieren:

. Öffne das Menü *Datenaustausch » Export » Dynamischer Export*.
. Erstelle ein neues <<daten/export-import/daten-exportieren#, Datenformat>> des Datenformat-Typs <<daten/export-import/datenformate/variationbarcode#, VariationBarcode>>. +
→ Die empfohlenen Einstellungen für Datenfelder und Aktionen entnimmst du <<datenformat-variationbarcode>>.
. Öffne die CSV-Datei des Exports *VariationBarcode*.
. Öffne die CSV-Datei des Exports *Item*, die du vor der Migration gespeichert hast.
. Korrigiere die inkorrekt importieren GTIN in der CSV-Datei des Exports *VariationBarcode*. +
→ *Tipp:* Um viele GTIN-Codes zu korrigieren, empfehlen wir den automatischen Abgleich mit dem alten Export über die Excel-Funktion link:https://forum.plentymarkets.com/t/excel-tabelle-vergleichen/19235/2[SVERWEIS^].
. Speichere die Änderungen in der CSV-Datei des Exports *VariationBarcode*.
. <<daten/export-import/daten-importieren#, Importiere>> die CSV-Datei des Exports *VariationBarcode* zurück in plentymarkets.

[[datenformat-variationbarcode]]
.Datenfelder Datenformat *VariationBarcode*
[cols="1,3,3"]
|====
|Feld |Aktion |Erläuterung

|*BarcodeID*
|Import
|ID des Barcodes

|*BarcodeName*
|Keine
|Barcode-Name

|*BarcodeType*
|Keine
|Barcode-Typ

|*Code*
|Import
|Code

|*VariationNumber*
|Abgleich
|Variantennummer
|====

=== Grundpreisangabe für Listings zuordnen

Nach der Migration muss im Menü *Listings » Listings bearbeiten » Market-Listing öffnen » Tab: Base* einmalig die Einstellung *Grundpreisangabe ergänzen* neu hinterlegt werden. Verwende dazu das Datenformat *ItemListingMarket* mit dem Datenfeld *BasicPriceInText*, um diese Einstellung für alle Listings durchzuführen.

=== Vorbereitungen für den Datenaustausch via SOAP API

Bevor du in plentymarkets 7 die ersten Calls ausführst, musst du einige Parameter zuordnen. Die Vorbereitungen für den Datenaustausch via SOAP API nimmst du also erst nach der Migration deines Systems auf plentymarkets 7, aber vor der ersten Verwendung der SOAP API vor. plentymarkets 7 bietet dir insgesamt eine größere Flexibilität. So ist z.B. die Anzahl der GTIN nicht mehr begrenzt. GTIN und andere internationale Artikelnummern werden jetzt als Barcodes geführt. Jedoch ist durch diese größere Flexibilität bei Preisen und Barcodes eine pauschale Zuordnung der Parameter nicht möglich. Die Zuordnung nimmt nur einige Minuten in Anspruch und erfolgt im eigens dafür vorgesehen Menü *SOAP-Migration*.

Die SOAP API-Version 115 wurde für die Arbeit mit plentymarkets 7 angepasst. Wenn du in plentymarkets 7 Daten via SOAP austauschen möchtest, verwende deshalb die SOAP API 115.

==== Preise für SOAP zuordnen

Deine bisherigen Preise wurden zu Verkaufspreisen migriert. Nach welchem Muster dabei vorgegangen wurde und wie sich die neuen Preise zusammensetzten, wird weiter <<basics/admin-aufgaben/migrationsleitfaden#26, oben>> in diesem Leitfaden beschrieben. Deine Verkaufspreise findest du in plentymarkets 7 im Menü *System » Systemeinstellungen » Artikel » Verkaufspreise*.

[.instruction]
Preise zuordnen:

. Öffne das Menü *System » Systemeinstellungen » Einstellungen » API » SOAP-Migration*.
. Klappe *Preise* auf.
. Wähle für jeden Preis, den du über die SOAP-Schnittstelle austauschen möchtest, einen Verkaufspreis. +
→ Der interne Name des Verkaufspreises wird in der Dropdown-Liste angezeigt.
. *Speichere* die Einstellungen.

==== Barcodes für SOAP zuordnen

Deine bisherigen GTIN, ISBN usw. wurden zu Barcodes migriert. Nach welchem Muster dabei vorgegangen wurde, wird weiter <<basics/admin-aufgaben/migrationsleitfaden#25, oben>> in diesem Leitfaden beschrieben. Deine neuen Barcode-Definitionen findest du in plentymarkets 7 im Menü *System » Systemeinstellungen » Artikel » Barcode*.

[.instruction]
Barcodes zuordnen:

. Öffne das Menü *System » Systemeinstellungen » Einstellungen » API » SOAP-Migration*.
. Klappe *Barcodes* auf.
. Wähle für jede GTIN, die du über die SOAP-Schnittstelle austauschen möchtest, einen Barcode. +
→ Der Name des Barcodes wird in der Dropdown-Liste angezeigt.
. Wähle einen Barcode, der als ISBN übertragen werden soll.
. *Speichere* die Einstellungen.


== Migration der Marktplätze

Alle aktiven Märkte und Preisportale, die in plentymarkets 6 zur Verfügung standen, wurden in plentymarkets 7 migriert, außer neckermann.at Cross-Docking.

Die Migration der folgenden Märkte erfolgt durch den Online-Marktplatz selbst:

- grosshandel.eu
- Hertie
- Restposten.de
- SumoNet

== Migrationshinweis Mention-Schnittstelle

Die Mention-Schnittstelle ist momentan noch nicht auf plentymarkets 7 migriert.
