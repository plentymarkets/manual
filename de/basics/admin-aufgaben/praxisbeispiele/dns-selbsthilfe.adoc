= Praxisbeispiel: DNS-Einstellungen prüfen und anpassen
:lang: de
include::{includedir}/_header.adoc[]
:keywords: DNS, CNAME, www.www., www.www, A-Record, DNS_NAME, NOT_RESOLVED
:position: 10
:url: basics/admin-aufgaben/best-practices/dns-selbsthilfe
:id: Z6F5WUG
:author: team-cloud

Das DNS (**D**omain **N**ame **S**ystem) ist einer der wichtigsten Dienste in vielen IP-basierten Netzwerken. Seine Hauptaufgabe ist die Beantwortung von Anfragen zur Namensauflösung.

Namen sind leichter zu merken als eine bis zu 12-stellige Zahlenkombination. Aus diesem Grund werden für das Internet sog. Domains verwendet, wie z.B. plentymarkets.eu. Ein Aufruf dieser Domain in einem Internetbrowser erzeugt eine Anfrage an diverse DNS-Server, die versuchen, diese Domain in eine IP-Adresse aufzulösen und auf so den für den Inhalt zuständigen Server der Domain plentymarkets.eu zu erreichen.

*_Beispiel:_* IP-Adressen sind, wie der Name schon sagt, Adressen. Will man in der realen Welt ein Paket verschicken, so braucht man dafür die Adresse des Empfängers. Bei Netzwerken ist das nicht anders, nur dass hier Netzwerkpakete verschickt werden und sich die Adressen nicht aus Straße, Hausnummer, Postleitzahl und Ort zusammensetzen. Stattdessen kommen klar definierte Zahlenfolgen zum Einsatz, die **I**nternet-**P**rotokoll-**Adressen**, oder kurz *IP-Adressen* genannt werden.

.Aufbau von IP-Adressen
[cols=5*, options="header"]
|===
|
|Adressteil 1
|Adressteil 2
|Adressteil 3
|Adressteil 4

|Post
|Straße
|Hausnummer
|PLZ
|Ort

|Netzwerk
|192
|168
|0
|1
|===

*_Hinweis:_* Diese Tabelle dient lediglich der Veranschaulichung. Die Gewichtung der Adressteile steht in keinem Zusammenhang.

== Welche DNS-Daten müssen angepasst werden?

=== A-Record

Mit einem A-Resource-Record wird einem DNS-Namen, also z.B. einer link:https://de.wikipedia.org/wiki/Uniform_Resource_Locator[URL^] wie plentymarkets.eu, eine IPv4-Adresse zugeordnet.

=== CNAME

Ein CNAME Resource Record (CNAME RR) ist im DNS dazu vorgesehen, einer Domäne einen weiteren Namen zuzuordnen. Ein CNAME-Eintrag darf nicht für die eigentliche Domain (plentymarkets.eu), sondern lediglich für Subdomains (knowledge.plentymarkets.eu) verwendet werden! Ein CNAME-Eintrag überschreibt grundsätzlich alle anderen Einträge der gleichen Subdomain.

*_Beispiel:_* Der Name eines Shops lautet plentymarkets.eu. Wir möchten, dass dieser Shop ebenfalls unter dem Namen www.plentymarkets.eu zu erreichen ist. Durch das Eintragen eines CNAMES für www.plentymarkets.eu wird dafür gesorgt, dass www.plentymarkets.eu die Anfrage zum Darstellen der Internetseite an plentymarkets.eu weitergibt.

[WARNING]
====
Für den Betrieb des Systems auf link:https://forum.plentymarkets.com/t/information-source-autoscaling-informationen-und-koordination/46996[AutoScaling^] ist ein CNAME-Record für die Subdomain `**www**.plentymarkets.eu` zwingend erforderlich!
Der hierfür notwendige Eintrag wird für die jeweilige Domain im Assistenten angezeigt.
[[styleguide-assets]]
.DNS-Einstellungen
image::basics/admin-aufgaben/best-practices/assets/DNS-Einstellungen.png[]
Gleiches gilt für alle anderen Sub-Domains.
====

== Wie sehe ich meine aktuell hinterlegten DNS-Einträge?

=== Per Internet-Browser

Auf der Internetseite link:https://www.whatsmydns.net/[whatsmydns.net^] kann kannst du sehen welche DNS-Einstellungen bei deinem Domain-Provider hinterlegt sind. Weiterhin bietet die Seite die Möglichkeit, den Stand der weltweiten Verteilung der DNS-Daten auf allen DNS-Servern nachzuverfolgen.

==== A-Record-Eintrag ermitteln

1. Trage in Feld #**A**# die Domain und Top-Level-Domain ein, deren A-Record ermittelt werden soll - z.B. plentymarkets.eu (**nicht** `**www.**plentymarkets.eu`).
2. Wähle bei Feld #**B**# den zu ermittelnden Ressource-Record-Eintrag aus - in diesem Fall **A**.
3. Um die Suche zu starten, klicke auf **Search**. +
→ Es erscheint eine Liste der weltweiten Haupt-DNS-Server mit dem derzeit eingetragenen, dem Server bekannten A-Record in Form einer IPv4-Adresse.

[[styleguide-assets]]
.A-Record
image::basics/admin-aufgaben/best-practices/assets/dnsselbsthilfe_pic002.png[]

==== CNAME-Record-Eintrag ermitteln

1. Trage in Feld #**A**# die Subdomain, Hauptdomain und Top-Level-Domain ein, deren CNAME-Record ermittelt werden soll, z.B. www.meinshop.de.
2. Wähle bei Feld #**B**# den zu ermittelnden Ressource-Record-Eintrag aus - in diesem Fall **CNAME**.
3. Um die Suche zu starten, klicke auf **Search**. +
→ Es erscheint eine Liste der weltweiten Haupt-DNS-Server mit dem derzeit eingetragenen, dem Server bekannten CNAME-Record.

[[styleguide-assets]]
.CNAME
image::basics/admin-aufgaben/best-practices/assets/dnsselbsthilfe_pic003.png[]

=== Linux, MacOS und Windows Kommandozeilentools

==== A-Record-Eintrag ermitteln:

1. Öffne auf ein Terminalfenster (Linux/MacOS) bzw. die Eingabeaufforderung (Windows).
2. Um des A-Record-Eintrage zu ermitteln, führe folgenden Befehl aus: +
`nslookup plentymarkets.eu` (*nicht* `**www.**plentymarkets.eu`)
→ Es erscheint die nachfolgende Ausgabe mit dem entsprechenden A-Record-Eintrag.

[[styleguide-assets]]
.A-Record ermitteln
image::basics/admin-aufgaben/best-practices/assets/dnsselbsthilfe_pic004.png[]

==== CNAME-Record-Eintrag ermitteln:

1. Öffne auf ein Terminalfenster (Linux/MacOS) bzw. die Eingabeaufforderung (Windows).
2. Um des A-Record-Eintrage zu ermitteln, führe folgenden Befehl aus: +
`nslookup -q=CNAME www.plentymarkets.eu` (*Bitte exakte Schreibweise beachten!*)
→ Es erscheint die nachfolgende Ausgabe mit dem entsprechenden CNAME-Record-Eintrag.

[[styleguide-assets]]
.CNAME ermitteln
image::basics/admin-aufgaben/best-practices/assets/dnsselbsthilfe_pic005.png[]

=== Wo finde ich die benötigten, korrekten DNS-Einträge?

Die korrekten DNS-Einstellungen findest du innerhalb des Domain-Assistenten im Menü *Einrichtung » Assistenten » Grundeinrichtung » Domains-Assistenten » Schritt: Aktuelle DNS-Einstellungen*.

[[styleguide-assets]]
.Beispiel DNS-Einstellungen
image::basics/admin-aufgaben/best-practices/assets/DNS-Einstellungen.png[]

== Wie ändere ich meine extern hinterlegten DNS-Einträge?

Prinzipiell liegt die Verantwortung, dass die DNS-Einstellungen bei *extern gehosteten Domains* richtig hinterlegt sind beim Domain-Inhaber - also bei dir. plentysystems bietet keinen Support für das Einrichten von externen Domains an.

[WARNING]
====
Das Ändern von DNS-Einstellungen sollte nur von fachkundigem Personal durchgeführt werden, da Fehlkonfigurationen zur Nichterreichbarkeit der Domain führen und damit die Systemerreichbarkeit negativ beeinflussen können. +
====

link:https://forum.plentymarkets.com/t/selbsthilfe-bei-dns-problemen-wie-hinterlege-ich-korrekte-dns-einstellungen/65559/7[Im Forum] sind Screenshots von verschiedenen Domain-Anbietern hinterlegt. Mithilfe der Screenshots kannst du die notwendigen Schritte zum Hinterlegen der korrekten DNS-Einstellungen nachvollziehen.
