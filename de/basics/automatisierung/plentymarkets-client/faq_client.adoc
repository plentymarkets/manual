= Erste Hilfe für den plentymarkets Client
:lang: de
include::{includedir}/_header.adoc[]
:keywords: Erste Hilfe Client, Client, plentymarkets Client, Client-Probleme, Clientprobleme, alles kaputt, SOS Client
:position: 1

Diese Checkliste soll helfen, mögliche Fehlerquellen bei der Arbeit mit dem plentymarkets Client ausfindig zu machen.

== Logfiles auffinden

[.instruction]
Logfiles auffinden

. Starte den plentymarkets Client.
. Führe den Prozess aus, bis das Verhalten auftritt.
. Öffne den Ordner der Logs: +
Windows: `C:\Benutzer\"DeinBenutzer"\plentymarkets\plentymarkets` +
MacOS: `/Users/"DeinBenutzer"/Library/ApplicationSupport/plentymarkets`
. Zippe den kompletten Ordner `logs`.
. *_Nach Aufforderung_* durch ein Mitglied der plenty-Crew schicke ihm die Logs per privater Nachricht im plentymarkets Forum.

[TIP]
.Wie versende ich private Nachrichten im Forum?
====
Wie du private Nachrichten im plentymarkets Forum versendest, erfährst du im https://forum.plentymarkets.com/t/wie-sende-ich-private-nachrichten/3024[plentymarkets Forum^].
====

== Cache-Ordner leeren

Du kannst den Cache-Ordner leeren, indem du im Client auf *Extras » Cache leeren* klickst:

. Öffne den Client.
. Klicke auf *Extras*.
. Klicke auf *Cache leeren*.
. Starte den Client neu.

Wenn der Client nicht startet, kannst du den Cache-Ordner auch lokal leeren:

. Öffne den folgenden Ordner: +
Windows: `C:\Benutzer\"DeinBenutzer"\plentymarkets\plentymarkets\cache` +
MacOS: `/Users/"DeinBenutzer"/Library/Application\ Support/plentymarkets/plentymarkets/cache`
. Lösche die Dateien, die sich in dem Cache-Ordner befinden. +
→ Der Client kann wieder gestartet werden.

== Der Client startet nicht

Wenn der Client nicht startet, kannst du wie folgt vorgehen:

. Öffne den folgenden lokalen Ordner: +
Windows: `C:\Benutzer\"DeinBenutzer"\plentymarkets\plentymarkets` +
MacOS: `/Users/"DeinBenutzer"/Library/Application\ Support/plentymarkets/plentymarkets/`
. Lösche die Datei `browser.conf`. +
→ Der Client kann wieder gestartet werden.

Alternativ kannst du in MacOS den Finder nutzen:

. Öffne den Finder.
. Klicke in der Menüleiste auf *Gehe zu*.
. Wähle *Gehe zu Ordner*.
. Gib den folgenden Pfad ein: +
`~/Library/Application\ Support/plentymarkets/plentymarkets` +
→ In diesem Ordner findest du die Datei `browser.conf`.
. Lösche die Datei `browser.conf`. +
→ Der Client kann wieder gestartet werden.

Wenn der Client auch nach Löschen der browser.conf-Datei nicht startet, solltest du die Client-Dateien löschen und den Client neu installieren.

[.instruction]
Unter Windows:

. Lösche unter `C:\Programme\` den Ordner `plentymarkets`.
. Lösche unter `C:\Program Files (x86)\Common Files` den Ordner `i4j_jres`.
. Installiere den plentymarkets Client neu.

## Log-Level erhöhen

Ab plentymarkets Client Version 222 werden die Logfiles standardmäßig im Loglevel *DEBUG* ausgegeben.

In einigen Fällen reichen die standardmäßig generierten Logfiles nicht aus, um ein Fehlverhalten zu analysieren. Daher kann es vorkommen, dass wir dich bitten, das Loglevel des Clients zu ändern. Das geht wie folgt:

[.instruction]
Unter Windows:

. Öffne den Installationsordner des plentymarkets Clients. +
→ Standardmäßig ist dies der Ordner: `C:\Programme\Plentymarkets\`
. Öffne mit einem Texteditor die Datei `plentymarkets.config`.
. Ersetze in *LOG_LEVEL=WARN* das *WARN* durch *DEBUG*.
. Speichere die Datei.

[.instruction]
Unter MacOS:

. Öffne den Ordner `/Applications/plentymarkets.app/`.
. Klicke mit der rechten Maustaste auf das Logo und wähle *Paketinhalt anzeigen*.
. Öffne mit einen Texteditor die Datei `plentymarkets.config`.
. Ersetze in *LOG_LEVEL=WARN* das *WARN* durch *DEBUG*
. Speichere die Datei.

== Fehler "Keine Dokumente verfügbar"

In einigen Fällen kann es vorkommen, dass beim Speichern oder Drucken von Dokumenten der Fehler *Keine Dokumente verfügbar* erscheint. Hier liegt die Ursache meist bei einer Domain-Änderung. Konkret bedeutet das: +
Dein System wurde ursprünglich auf einer plentymarkets Test-Domain installiert. Test-Domains haben z.B. das Format `\http://irgendwas.plentymarkets-x1.com/`. Wenn du nun eine vollständige Domain an deinem System hinterlegt hast, z.B. `\www.deineDomain.de`, ändert sich dadurch nicht automatisch der Login im Client.

Der Login ist dann zwar weiterhin über `\http://irgendwas.plentymarkets-x1.com/` möglich, doch beim Abrufen von Dokumenten tritt der Fehler "Keine Dokumente verfügbar" auf.

[.instruction]
Lösung 1: URL/Domain aktualisieren

. Logge dich aus dem Client aus.
. Lösche in der Login-Maske die Login-URL: +
image:basics/automatisierung/plentymarkets/assets/client_login-url.png[]
. Wähle unter *URL* den Punkt *Neue URL eingeben*.
. Gib dort die neue URL/Domain ein. +
*_Hinweis:_* Vergiss nicht, das Präfix *www* in der URL mit anzugeben.
*_Hinweis:_* Verwende keine URL, die noch einmal weitergeleitet wird.
. Melde dich mit Benutzername und Passwort an.

Wenn die URL korrekt ist, aber der Fehler "Keine Dokumente verfügbar" dennoch auftritt, gehe zu Lösung 2 über.

[.instruction]
Lösung 2: Temp- und Cache-Ordner erstellen

. Öffne den Folgenden Ordner: +
Windows: `C:\Benutzer\"DeinBenutzer"\plentymarkets\plentymarkets` +
MacOS: `/Users/"DeinBenutzer"/Library/ApplicationSupport/plentymarkets/plentymarkets`.
. Erstelle in diesem Ordner die Unterordner `temp` und `cache`.

Wenn das auch nicht hilft, prüfe dein SSL-Zertifikat.

[.instruction]
Lösung 3: Gültigkeit des SSL-Zertifikats prüfen

Eine weitere Möglichkeit ist, dass das SSL-Zertifikat deines Systems abgelaufen ist oder du gerade erst ein SSL-Zertifikat bestellt hast.
Dieses SSL-Zertifikat kannst Du über das Service-Center verlängern. Hier hilft temporär die Lösung 1.

== Anti-Viren-Programm

Wenn dein plentymarkets Client plötzlich nicht mehr funktioniert, prüfe, ob dein Anti-Viren-Programm die Verbindung des Clients blockiert. Hierzu kannst du testweise den sogenannten "Echtzeitschutz" deines Anti-Viren-Programmes stoppen. Prüfe dann, ob der Client wieder ordnungsgemäß arbeitet.

Als Ausnahmeregeln solltest Du im Anti-Viren-Programm folgende Pfade unter Windows hinterlegen:

* `C:\Program Files (x86)\Common Files\i4j_jres`
* `C:\Programme\plentymarkets`
* `C:\Benutzer\[DeinBenutzername]\plentymarkets\plentymarkets\`

Derzeit werden uns vermehrt unerwünschte Effekte mit der Anti-Viren-Software *Panda* gemeldet.

== Der Client ist auf Englisch

Wenn das Menü des Clients auf Englisch angezeigt wird, solltest du den Cache des Client leeren.

[.instruction]
Cache leeren:

. Öffne den Client.
. Klicke auf *Extras*.
. Klicke auf *Cache leeren*.
. Starte den Client neu. +
→ Das Menü des Clients ist wieder auf Deutsch verfügbar.

== PDF-Dateien werden im Browser geöffnet

Dieses Verhalten kann bei verschiedenen Dokumenten (Artikel Etikett, Rechnung, Lieferschein, usw.) auftreten. Dies passiert, wenn an dem Rechner die Domain mit `http://` statt mit `https://` hinterlegt ist. Dadurch werden auch plentymarkets-interne Dokumente in einem neuen Fenster geöffnet.

[.instruction]
Lösung:

. Logge dich aus dem Client aus.
. Wähle unter *URL* den Punkt *Neue URL eingeben*.
. Gib die neue URL/Domain mit `http://` statt mit `https://` ein.
. Melde dich wie gewohnt mit Benutzername und Passwort an. +
*_Hinweis:_* Externe Links, also Links zu Amazon, eBay etc., werden immer im Browser geöffnet. Hierbei handelt es sich um gewünschtes Verhalten.

== Client startet unter Windows mit Fehlermeldung

Beim Starten des Clients kann der folgende Fehler auftreten:

[source,plenty]
----
java.lang.NoClassDefFoundError: com/teamdev/jxbrowser/chromium/internal/Environment
at com.plentymarkets.host.main.PlentyMarkets.(PlentyMarkets.java:75)
at com.plentymarkets.host.main.PlentyMarkets.getInstance(PlentyMarkets.java:47)
at com.plentymarkets.host.main.PlentyMarkets.main(PlentyMarkets.java:54)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
at com.exe4j.runtime.WinLauncher.main(Unknown Source)
at com.install4j.runtime.launcher.WinLauncher.main(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.teamdev.jxbrowser.chromium.internal.Environment
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
… 10 more
----

So gehst du vor, wenn dieser Fehler auftritt:

. Schließe den Client.
. Lösche unter `C:\Program Files (x86)\Common Files` den Ordner `i4j_res`.
. Lösche unter `C:\Users\\%Benutzer%\AppData\Local\Temp` alle Ordner, die mit `jxbrowser-chromium` beginnen.
. Lösche unter `C:\Users\\%Benuzter%\plentymarkets\plentymarkets` die Ordner `cache`, `logs` und `temp`.
. Deinstalliere den Client in der Systemsteuerung.
. Lösche unter `C:\Programme` den Ordner `plentymarkets`.
. Lade die neueste  link:https://forum.plentymarkets.com/t/package-package-neuer-client-229-5-package-package/50995[Version des Clients^] herunter. Oder noch besser: Steige auf plentyBase um.
. Installiere die neueste Version des Clients.

== Client startet unter MacOS mit Fehlermeldung

Beim Starten des Clients auf dem Mac kann der folgende Fehler auftreten:

image::_best-practices/MoCli/Client/assets/client_start_macos.png[]

//-

So gehst du vor, wenn dieser Fehler auftritt:

. Schließe den Client.
. Öffne das Terminal. +
*_Tipp:_* Öffne mit der Tastenkombination *cmd* + *Leertaste* die Spotlight-Suche. +
Gib den Begriff *Terminal* ein. +
Betätige die Return-Taste. +
→ Das Terminal wird geöffnet.
. Gib den Befehl `open $TMPDIR` in das Terminal ein. +
→ Der Finder wird geöffnet und der Inhalt des Temp-Ordners wird angezeigt.
. Lösche den Ordner, der mit `jxbrowser-chromium-` beginnt (z.B. `jxbrowser-chromium-51.0.2704.106.6.10`).
. Starte den Client neu.

== Der Client stürzt beim Öffnen externer Fenster unter MacOS ab

Derzeit kann es vereinzelt vorkommen, dass der plentymarkets Client unter MacOS abstürzt. Das Verhalten tritt nur beim Öffnen von externen Fenstern (z.B. Rechnungsaufruf über *Aufträge » Aufträge bearbeiten*) auf.

Wir arbeiten an der Fehlerbeseitigung und haben hierzu bereits den Anbieter des Frameworks mit ins Boot geholt, da das Problem auf Seiten des Frameworks liegt.
