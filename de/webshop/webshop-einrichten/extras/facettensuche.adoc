= Facettensuche
:lang: de
include::{includedir}/_header.adoc[]
:keywords: Facetten, Webshopsuche
:position: 110
:icons: font
:docinfodir: /workspace/manual-adoc
:docinfo1:
:url: webshop/webshop-einrichten/extras/facettensuche

*Einrichtung » Mandant » Global » Dienste » Facettensuche*

[NOTE]
.Alt: CMS & Webshop
====
Diese Handbuchseite widmet sich Funktionen des alten plentymarkets Webshops *Callisto*. Informationen zum Webshop-Template *Ceres* findest du <<omni-channel/online-shop/ceres-einrichten#0, hier>>.
====

Als Facetten werden die verschiedenen Filtermöglichkeiten bezeichnet, mit denen sich Suchergebnisse im Webshop nach bestimmten Kriterien (Facetten) verfeinern lassen. Der Vorteil einer Facettensuche liegt darin, dass das Suchergebnis nicht zwangsweise analog zur Auswahl des Kriteriums reduziert wird, sondern immer wieder die gesamte Datenbank nach dem Kriterium durchsucht wird. Dies ermöglicht eine intuitive Benutzerführung durch die Suche und vermeidet, dass Suchergebnisse durch eine ungünstige Vorauswahl verfälscht werden. Eine Facettensuche mit plentymarkets verbessert die Usability für deine Kunden im Webshop deutlich und ist mit nur einer Stunde Verzögerung im Datenabgleich blitzschnell und stets höchstaktuell.

== Facettensuche mit plentymarkets

[IMPORTANT]
.Verfügbarkeit
====
Kunden mit plentymarkets Cloud Vertrag können das Modul Facettensuche über den Konfigurator hinzubuchen. Für Own-Server-Systeme ist das Modul leider nicht verfügbar.
====

Die übersichtliche Filternavigation kannst du flexibel einrichten und in deinem CMS individuell gestalten. Mit der Facettensuche bietear du deinen Kunden vielfach mehr Möglichkeiten als z.B. bei der Merkmalsuche. Die angezeigten Artikel in einer Kategorie können mit Facetten nicht nur nach Merkmalen/Eigenschaften, sondern auch nach folgenden Kriterien weiter eingeschränkt werden:

* Nach einem gewünschten Preissegment
* Nach Attributen und Merkmalen
* Nach der Verfügbarkeit der Artikel
* Nach Herstellern

Diese vier Facettentypen verbindest du in plentymarkets mit verschiedenen Werten, die das Filterergebnis bestimmen. Je mehr Facetten du erstellst und mit Werten verknüpfst, desto umfangreicher wird die in <<bild-facettensuche-webshop>> dargestellte Filterauswahl. Wie genau das geht, erfährst du im Folgenden.

[[bild-facettensuche-webshop]]
.Beispiel der Facettensuche im Webshop
image::omni-channel/online-shop/webshop-einrichten/extras/assets/DE-Mandant-Global-Dienste-Facetten-01.png[]

[TIP]
.Artikel mit Facetten verknüpfen
====
Eine direkte Verknüpfung von Artikeln mit den einzelnen Facetten ist nicht nötig. Die Zuordnung deiner Artikel zu Facetten erfolgt automatisch durch die <<omni-channel/online-shop/webshop-einrichten/extras/facettensuche#2-3, Verknüpfung der Facette mit Werten>>, die am Artikel hinterlegt sein müssen.
====

== Konfiguration

Die Konfiguration besteht aus mehreren Schritten. Zunächst werden Facetten angelegt, anschließend durch weitere Einstellungen näher bestimmt und schließlich mit den gewünschten Werten verknüpft. Zudem muss im Menü *Einrichtung » Mandant » Mandant wählen » Webshop » Artikelsuche* die Option *Facettensuche* eingestellt sein.

[#100]
=== Facetten anlegen

Für die Facettensuche erstellst du zunächst verschiedene Facetten, z.B. die Facette "Farbe" des Typs *Attribut/Merkmal*.

[.instruction]
Neue Facette anlegen:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Klicke auf *Neu*, um eine neue Facette hinzuzufügen.
. Trage einen *Namen* für die Facette in der Systemsprache ein.
. Wähle einen *Typ* aus der Dropdown-Liste gemäß den Erläuterungen in <<tabelle-verfuegbare-facettentypen>>.
. Trage die *Position* ein, an der die Facette im Webshop erscheinen soll.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[tabelle-verfuegbare-facettentypen]]
.Verfügbare Facettentypen
[cols="1,3"]
|====
|Facettentyp |Erläuterung

|*Preis*
|Facetten des Typs *Preis* müssen nicht mit Werten verknüpft werden, da der Filter vom kleinsten bis zum größten Preis einer Kategorie individuell eingeschränkt werden kann.

|*Attribut/Merkmal*
|Facetten des Typs *Attribut/Merkmal* werden mit Attributen, Merkmalen und Eigenschaften in deinem System verknüpft und stellen so vielfältige Filtermöglichkeiten her, z.B. nach Farben, Größen etc.

|*Verfügbarkeit*
|Facetten des Typs *Verfügbarkeit*, z.B. "Kurzfristig lieferbar", werden mit den unter <<omni-channel/online-shop/webshop-einrichten/extras/facettensuche#180, Einrichtung » Artikel » Verfügbarkeiten>> angelegten Verfügbarkeiten verknüpft.

|*Hersteller*
|Facetten des Typs *Hersteller*, z.B. "Adidas", werden mit den unter <<omni-channel/online-shop/webshop-einrichten/extras/facettensuche#560, Einrichtung » Artikel » Hersteller>> angelegten Herstellern verknüpft.
|====


=== Facetten konfigurieren

Nachdem du eine Facette angelegt hast, wird die Facette geöffnet. Es stehen vier Tabs zur Verfügung, um weitere Einstellungen vorzunehmen und Werte zu verknüpfen. Hier werden die Einstellungen der Tabs *Einstellungen* und *Name* erläutert.
Erklärungen zu den Tabs *Werte* und *Bilder* findest du in <<omni-channel/online-shop/webshop-einrichten/extras/facettensuche#2-3, Kapitel 2.3>> dieser Handbuchseite.

==== Tab: Einstellungen

Nimm die Einstellungen wie im Folgenden beschrieben vor.

[.instruction]
Facetten bearbeiten:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Öffne die Facette.
. Nimm die Einstellungen im Tab *Einstellungen* gemäß <<tabelle-facetten-bearbeiten>> vor.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[tabelle-facetten-bearbeiten]]
.Facetten bearbeiten; Tab *Einstellungen*
[cols="1,3"]
|====
|Einstellung |Erläuterung

|*Typ*
|Zeigt den beim Anlegen der Facette gewählten Typen an. Der Typ ist nicht änderbar.

|*Sortierung*
|Legt die Sortierung des Suchergebnisses fest. Je nach Auswahl werden die Artikel nach der *Trefferquote*, der *Position* oder alphabetisch von *A-Z* sortiert.

|*Position*
|Zeigt die Position an, die beim Anlegen der Facette eingegeben wurde. Die Position ist hier änderbar.

|*CSS-Klasse*
|Einen CSS-Namen hinterlegen. Dieser Name wird als Template-Variable im CMS-Bereich zur Verfügung gestellt, sodass zu jeder Facette eine eigene Klasse hinterlegt werden kann.

|*Auswahlart*
|Die Auswahlart wählen. +
*Einschränkend* = Schränkt den Filter mit dem gewählten Wert weiter ein. Es werden alle Artikel angezeigt, die diesen Wert besitzen und die Filterkriterien vorher gewählter Filter erfüllen. +
*Mehrfach* = Lässt eine Mehrfachauswahl von Ergebnissen zu, z.B. die Auswahl mehrerer Hersteller, deren Artikel dann gemeinsam angezeigt werden. +

|*Minimale Trefferanzahl*
|Legt fest, wie viele Ergebnisse es für einen Facettenwert mindestens geben muss, damit der Facettenwert im Webshop angezeigt wird.

|*Maximal angezeigte Facettenwerte*
|Legt fest, wie viele Facettenwerte je Facette höchstens angezeigt werden. 250 Facettenwerte können maximal angezeigt werden.
|====

==== Tab: Name

Im Tab *Name* trägst du den Namen der Facette in den Sprachen ein, für die du eine multilinguale Ansicht deines Webshops anbietest. Die hier eingetragene Übersetzung wird dann in der angegebenen Sprache verwendet.

=== Facetten mit Werten und Bildern verknüpfen

Nimm die Einstellungen in den Tabs *Werte* und *Bilder* wie im Folgenden beschrieben vor.

==== Tab: Werte

Im Tab *Werte* einer Facette verknüpfst du die Facette mit verschiedenen Werten. Im Beispiel der Facette Farbe des Typs *Attribut/Merkmal* legst du z.B. die Werte weiß, schwarz, rot, blau etc. an und verknüpfen diese Werte mit den vorhandenen Attributen, Merkmalen und Eigenschaften in deinem System. Gehe dazu wie unten beschrieben vor.

[.instruction]
Neuen Wert anlegen:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Öffne die Facette, der du Werte hinzufügen möchtest.
. Öffne das Tab *Werte*.
. Füge über das *grüne Plus* links unten einen neuen Wert hinzu.
. Gib einen *Namen* für den Wert in der Systemsprache ein.
. Gib eine *Position* ein.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Der neue Wert wird angelegt.

Die angelegten Werte werden nun links aufgelistet. Bestimme die Werte in den folgenden Schritten näher und verknüpfe die Werte mit Informationen aus deinem System. Im Beispiel des Typs *Attribut/Merkmal* ist besonders praktisch, dass Attribute, Merkmale und Eigenschaften in deinem System in einem Filter zusammengefasst und so zusammen in einem Ergebnis ausgegeben werden können.

[NOTE]
.Tab Name und Tab Einstellungen eines Wertes
====
Im Tab *Name* eines Wertes legst du den Namen des Wertes in verschiedenen Sprachen fest. +
Im Tab *Einstellungen* eines Wertes hinterlegst du eine *Position* und eine *CSS-Klasse* (<<tabelle-facetten-bearbeiten>>).
====

Im Folgenden erfährst du, wie du die Werte verknüpfst.

[.instruction]
Facetten mit Werten verknüpfen:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Öffne die Facette, der du Werte hinzufügen möchtest.
. Öffne das Tab *Werte*.
. Klicke auf den Wert, den du verknüpfen möchtest.
. Wechsle in das Tab *Verknüpfung*.
. Wähle das Attribut, das Merkmal oder die Eigenschaft aus der Liste.
. Klicke links unten auf *Verknüpfen*. +
→ Das Attribut, das Merkmal oder die Eigenschaft wird mit dem Wert der Facette verknüpft.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

Die Werte, die du verknüpft hast, werden mit einem *grünen Häkchen* gekennzeichnet. Nicht verknüpfte Werte erkennst du an einem roten *x*.

==== Tab: Bilder

Im Tab *Bilder* verknüpfst du Facetten und Facettenwerte mit Bildern, wenn du zum Beispiel die Hersteller in deinem Webshop nicht mit Namen, sondern mit Logo anzeigen möchtest.

== Volltextsuche - Tab: Suchindex

Im Tab *Such-Index* legst du verschiedene Kriterien für die verbesserte Volltextsuche in deinem Webshop fest.
Diese Volltextsuche ist wesentlich fehlertoleranter als die Standard-Artikelsuche in plentymarkets.
Das bedeutet, dass Suchbegriffe über die Facettensuche auch bei Tippfehlern erkannt werden und z.B. der Artikel- oder der Herstellername nicht exakt eingegeben werden müssen, um zu einem Ergebnis zu führen.
So wird z.B. der Hersteller "adidas" auch bei fehlerhaften Eingaben wie "addidas" oder "adids" gefunden und Artikel von diesem Hersteller im Suchergebnis angezeigt. Konfiguriere dafür die folgenden 3 Tabs:

* Im Tab *Gewichtung* legst du fest, welchem der vier Bereiche *Keywords 1*, *Keywords 2*, *Name* oder *Volltext* welche Priorität bei der Anzeige im Suchergebnis gegeben wird.
* Welche Texte den Bereichen *Keywords 1 und 2* angehören, legst du im nächsten Tab *Keyword* fest. Der Bereich *Name* bezieht sich auf den Artikelnamen in diesem Webshop.
* Welche Texte im Bereich *Volltext* berücksichtigt werden, hinterlegst du im Tab *Beschreibung*.

=== Tab: Gewichtung

Trage im Tab *Gewichtung* je Bereich eine Zahl ein, die die Priorität des Bereichs bei der Anzeige des Suchergebnisses bestimmt. Gehe dazu wie im Folgenden beschrieben vor.

.Such-Index; Tab *Gewichtung*
image::omni-channel/online-shop/webshop-einrichten/extras/assets/DE-Mandant-Global-Dienste-Facetten-02.png[]

[.instruction]
Gewichtung festlegen:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Wechsle in das Tab *Such-Index*. +
→ Das Tab *Gewichtung* ist automatisch geöffnet.
. Trage je Bereich eine Gewichtung zwischen 1 und 100 ein. Je höher die Zahl, desto höher die Priorität im Suchergebnis. Ergebnisse aus dem Bereich mit der höchsten Zahl werden also zuerst gelistet.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

=== Tab: Keyword

Ordne im Tab *Keyword* die verschiedenen Texte den Bereichen *Keyword 1* oder *Keyword 2* zu. Je nach angegebener Gewichtung werden diese Texte im Suchergebnis mit höherer oder niedrigerer Priorität berücksichtigt.

[NOTE]
.Einstellungen im Tab Keyword
====
Wähle aus, welchem Bereich (Priorität) die hier gelisteten Texte zugewiesen werden. Die Zahlen bei *Kategorie 1 - 6* geben die Kategorieebene an. Es wird empfohlen, die oberen Ebenen höher zu gewichten als niedrigere Ebenen.
====

=== Tab: Beschreibung

Im Tab *Beschreibung* legst du fest, welche am Artikel hinterlegten Texte für den Bereich *Volltext* ausgewertet werden sollen.

[.instruction]
Beschreibungen festlegen:

. Öffne das Menü *Einrichtung » Mandant » Global » Dienste » Facettensuche*.
. Wechsle in das Tab *Such-Index*.
. Wechsle in das Tab *Beschreibung*.
. Setze ein *Häkchen* bei den Texten, die im Bereich *Volltext* bei der Suche berücksichtigt werden sollen.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

== Facettenverknüpfung im Webshop

Nachdem du deine Facetten angelegt haben, verknüpfst du diese Facetten in dem Standard- oder Mandant-Shop, in dem du die Facetten als Filter zur Verfügung stellen möchtest. Hierbei wählst du je Mandant (Shop), welche Facetten für diesen Shop relevant sind und welche nicht. Änderungen, die du hier vornimmst, werden in Echtzeit übertragen. Gehe wie im Folgenden beschrieben vor, um Facetten mit einem Shop zu verknüpfen.

Die Konfiguration nimmst du im Menü *Einrichtung » Mandant » Mandant wählen » Dienste » Facettenverknüpfungen* vor. Dort wählst du den Shop, mit dem du Facetten verknüpfen möchtest.

[IMPORTANT]
.Preisfacette
====
Pro Shop kann nur eine Preisfacette verknüpft werden.
====

[.instruction]
Facetten im Webshop verknüpfen:

. Öffne das Menü *Einrichtung » Mandant » Mandant wählen » Dienste » Facettenverknüpfungen*.
. Wähle in der Liste links die Facette, die du mit diesem Shop verknüpfen möchtest  .
. Klicke links unten auf *Facette verknüpfen*. +
→ Die Facette wird im Webshop verknüpft.
. Wiederhole den Vorgang für alle weiteren Facetten, die hier verknüpft werden sollen.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

Die Facetten, die du verknüpft hast, werden mit einem *grünen Häkchen* gekennzeichnet. Nicht verknüpfte Facetten erkennst du an einem *roten x*.

[NOTE]
.Option: Bilder bereitstellen
====
Häkchen setzen = Mit den Facetten verknüpfte Bilder werden im Webshop angezeigt.
====

== Facettensuche ins CMS einbinden

Die Facettensuche wird im Template *NavigationFacetsList* definiert. Das Template *NavigationFacetsList* unseres Designs Callisto Light enthält fertigen Code, mit dem du eine Facettensuche erstellst, die dem in <<bild-facettensuche-webshop>> dargestellten Beispiel entspricht. Dieser Code ist natürlich ausbaubar. +
Über die Template-Funktion <<omni-channel/online-shop/cms-syntax#webdesign-navigation-container-navigationfacetslist, Container_NavigationFacetsList>> fügst du das Template *NavigationFacetsList* in den gewünschten Bereich deines Webshops ein. Gehe dazu wie unten beschrieben vor.

[TIP]
.Empfohlene Templates
====
Wir empfehlen dir, die Template-Funktion *Container_NavigationFacetsList* innerhalb von *ItemViewCategoriesList* und *ItemViewSearchResultsList* zu verwenden. Diese Templates findest du im Menü *CMS » Webdesign » Ordner: Layout » Ordner: ItemView*.
====

[.instruction]
Facettensuche in CMS einbinden:

. Öffne das Menü <<omni-channel/online-shop/webshop-einrichten/cms#webdesign, CMS » Webdesign>>.
. Öffne das gewünschte Template.
. Füge die Template-Funktion *Container_NavigationFacetsList* in das Template ein, um die Facettensuche dort anzuzeigen.
. *Speichere* (icon:save[role="green"]) die Einstellungen.
. Wiederhole ggf. den Vorgang, um die Template-Funktion in weitere Templates einzufügen.
