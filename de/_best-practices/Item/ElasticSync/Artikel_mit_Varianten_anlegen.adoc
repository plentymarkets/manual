== Best Practice für die Variantenanlage über Elastic-Sync
:lang: de
:keywords: Import, Artikel, Anlage, BestPractice, automatisiert
:position: 1



In diesem Beitrag bieten wir dir ein Best Practice für die Artikelanlage via Elastic Sync. Du solltest mit der generellen Funktionsweise von Elastic Sync vertraut sein. Allgemeine Infos zum Plugin findest du in der Plugin-Beschreibung im
link:https://marketplace.plentymarkets.com/plugins/integration/ElasticSync_4750[Marketplace^].

Auch unsere link:https://www.plentymarkets.eu/knowledge/video-tutorials/datenuebernahme/vereinfache-deine-datenimporte-mit-dem-elasticsync-plugin/a-4890/?autoplay=1[Videotutorials^] bieten Hilfen und Infos zu ElasticSync.



<<#voraussetzungen, Voraussetzungen>>

<<#infos, Infos>>

<<#aufbau_der_Datei, Aufbau der Datei>>

<<#abgleich, Abgleich>>

<<#mapping, Mapping>>

<<#zweites_mapping, zweites Mapping>>

---

[#voraussetzungen]
=== Voraussetzungen

Im System müssen folgende Daten vorhanden sein, um wie hier beschrieben Artikel und Varianten über Elastic Sync zu importieren:

* Attribute
* Attributwerte
* Kategorien
* Verkaufspreise


[#infos]
=== Infos

Im *Dashboard* findest du den *Cache-löschen-Button*.

.Cache-löschen-Button im Dashobard.

image::_best-practices/Item/ElasticSync/assets/Cacheloeschen.png[]

Mit diesem Button kannst du einmal pro Stunde den Elastic-Sync-Cache zurücksetzen, damit du eine Datei ohne vorherige Änderung erneut importieren kannst.

Ein weiterer hilfreicher Button ist der *Testlauf-Button*.

.Gut geeignet um Syncs zu testen.

image::_best-practices/Item/ElasticSync/assets/Testlauf.png[]

Damit werden die ersten 10 Zeilen der Datei ohne Cache importiert. So kannst du prüfen, ob alle Werte korrekt zugeordnet wurden, bevor du den Sync mit allen Zeilen startest.

Gültige Werte für Felder im Mapping findest du in der Plugin-Beschreibung.

Unter *Daten >> Log* können Fehlermeldungen zum Sync eingesehen werden


[#aufbau_der_datei]
=== Aufbau der Datei

Folgende
link:https://plenty-item.plentymarkets-cloud02.com/ElasticSync/BestPracticeArticleSync.csv[Beispieldatei^] wurde für den Sync genutzt.

==== Allgemein

Die Daten, die *global* am Artikel gepflegt werden, wie z.B. *der Hersteller, Markierung etc.* werden in der Zeile der Hauptvariante hinterlegt.

Daten, die *variantenbezogen* sind, müssen in die entsprechenden Zeilen der Varianten eingetragen werden.

Wichtig bei der Anlage der Varianten ist, dass der Aufbau der Attribute und Werte so in der Datei hinterlegt sind, wie es im Mapping eingestellt ist.

==== Variantennummern

In unserem Beispiel legen wir eine Hauptvariante mit 4 Varianten an. Als Zuordnung für die Varianten nutzen wir die Hauptvariantennummer.

Da der Sync die Daten zeilenweise importiert, steht die Hauptvariante ganz oben in der Datei.

Dort hinterlegen wir manuell die  Variantennummer im gleichnamigen Feld. Das Feld *Hauptvariantennummer* bleibt leer.

Diese Variantennummer wird nun wiederum bei den Varianten in das Feld *Hauptvariantennummer* geschrieben, damit Sie eine Zuordnung zur Hauptvariante haben und nicht als Einzelartikel angelegt werden.

Die Variantennummern der Untervarianten können ebenfalls eingetragen werden. Wenn das Feld frei gelassen wird, generiert das System die Nummern automatisch.

Es sieht in der Datei dann so aus.

.Eintragung der Nummern bei Hauptvariante und Varianten

image::_best-practices/Item/ElasticSync/assets/HVnummer.png[]

[WARNING]
.Variantennummern müssen eindeutig sein!
====
Sowohl die Nummer der Hauptvariante, als auch die Nummer der Untervarianten müssen eindeutig sein. Der Import schlägt fehl, wenn Nummern merhfach vergeben werden.
====

==== Attribute

In unserem Beispiel haben wir *Attributauswahlkombination* gewählt:

.Erstellen von Varianten via Attributauswahlkombination

image::_best-practices/Item/ElasticSync/assets/Attribute.png[]

Die oberste Zeile der Hauptvariante hat dabei keine Kombination erhalten, damit Sie keine Attributverknüpfung erhählt.

[TIP]
.Hauptvariante ohne Attribute
====
Wenn man mit Variantenartikeln arbeitet und der Hauptvariante keine Attribute zuweist, ist man später flexibler in der Variantenerstellung. Gibt man der Hauptvariante ebenfalls eine Attributverknüpfung, kann man Varianten ausschließlich mit den verknüpften Attributen erzeugen.
====

==== Bilder

In unserem Sync importieren wir die Bilder-URLs in 2 getrennten Spalten und Mappings. Dies kann auch in einer Spalte mit kommagetrennten URLs geschehen.
Dazu muss das Feld *Multi-URL* im Mapping gewählt werden. Das Format der URL wird wie folgt hinterlegt: *image1url;positionImage1,image2url;positionImage2*

==== Kategorieverknüpfungen

Zum Verknüpfen mehrerer Kategorien müssen mehrere Mappings angelegt. Weiterhin muss darauf geachtet werden, dass bei den Kategorieverknüpfungen der komplette Pfad angegeben wird. Die Ebenen werden dabei mit einem Semikolon getrennt.

.Die Schreibweisen von Trennzeichen und Pfad sind wichtig für den Import.

image::_best-practices/Item/ElasticSync/assets/Kategorieverknuepfung.png[]


[WARNING]
.Mapping und Datei
====
Achte darauf, dass die Werte in der Datei auch mit dem Mapping übereinstimmen. Dabei geht es darum, dass du z.B. bei dem Feld Standardkategorie die ID oder den Namen im Mapping wählen kannst. In der CSV muss dann auch entsprechend die ID oder der Name stehen. Es geht nicht, dass im Mapping die ID, aber in der Datei der Name genutzt wird.

====


[#abgleich]
=== Abgleich

Für den Abgleich ist wichtig, dass ein variantenspezifisches Abgleichfeld genutzt wird. Dafür eignet sich z.B. die Variantennummer oder auch die Varianten-ID.

Als Aktion muss eingestellt werden, dass versucht wird, einen neuen Datensatz anzulegen, wenn kein Abgleich stattfinden konnte.


[#mapping]
=== Mapping

Im Mapping verknüpfen wir über den Button *Werte bestimmen* die Felder aus der CSV-Datei mit den Feldern aus plentymarkets.

.Ein Mapping muss angelegt werden, ohne Mapping, kein Import.

image::_best-practices/Item/ElasticSync/assets/Wertebestimmen.png[]

Es empfiehlt sich, nur die Felder ins Mapping aufzunehmen, die tatsächlich übergeben werden sollen. Überflüssige Felder sollten vermieden werden, da das zu Fehlern führen kann.

Für die Artikelanlage mit Varianten gibt es Pflichtfelder, die als Minimum im Mapping enthalten sein müssen, damit der Sync funktioniert. Dabei handelt es sich um folgende Felder:

* Standardkategorie
* Hauptvariantennummer
* Variantennummer
* Will man Bestand importieren, müssen folgende  Werte im Mapping enthalten sein:
Lager, Menge, Lagerort


[#zweites_mapping]
=== Zweites Mapping


Die Mappings werden nacheinander abgearbeitet. Das heißt, dass unser zweites Mapping nach dem Ersten durchgeführt wird.

Über ein weiteres Mapping wollen wir nun eine zweite Kategorie und ein weiteres Bild hinterlegen.

Im Mapping selbst bestimmen wir erneut die Werte und mappen die URL und den Namen der Kategorie mit der jeweils zweiten Spalte aus unserer Datei.

.Weitere Mappings werden analog zum ersten angelegt.

image::_best-practices/Item/ElasticSync/assets/ZweitesMapping.png[]

Der Sync ist jetzt einsatzbereit und kann gestartet werden.

[TIP]
.Testlauf
====
Wir empfehlen, beim erstmaligen Sync vorab den Testlauf zu nutzen. So kann man prüfen, ob der Sync ordnungsgemäß läuft. Sollten sich  Fehler eingeschlichen haben, kann man diese vor der kompletten Ausführung noch korrigieren.
====
