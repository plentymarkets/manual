:lang: de
:keywords: Der Vorgang konnte nicht korrekt durchgeführt werden, Bitte Dateneingabe prüfen, 1001, Fehler bei der Anmeldung, login failed, Exception in extension function, java.lang.RuntimeException, productId cannot be mapped, productId **EXP/OFP** cannot be mapped, Hard validation error occured, Bitte geben Sie einen Ort an, Bitte geben Sie Name 1 an, Bitte geben Sie eine Postleitzahl an, Bitte geben Sie eine Straße an, Bitte geben Sie eine Hausnummer an, Bitte geben Sie eine gültige Telefonnummer an, Es handelt sich um eine ungültige Postleitzahl, Bitte verwenden Sie das Format 99999, The Customer ID Number is invalid, Please check the Customer ID Number, Your order could not be processed, Ein interner Fehler ist aufgetreten, Keine gültigen Versandprofile vorhanden, SystemShippingController, unknown, Die Gewichtsangabe ist kleiner als im CN23-Formular, Invalid fieldlength: InvoiceDate, Bitte geben Sie die Anzahl an, Bitte geben Sie die Beschreibung an, Bitte geben Sie den Warenwert an, Bitte geben Sie das Gewicht an, Bitte geben Sie das Gewicht an, Bitte geben Sie die Art der Sendung an, Die angegebene Art der Sendung ist nicht gültig, Invalid fieldlength in element ‘Note’, Please refer to documentation, Invalid XML, Ungültiger Content wurde beginnend mit Element ‘Shipment’ gefunden, An dieser Stelle wird kein untergeordnetes Element erwartet, The current incoterms are not included in the list of the available incoterms, The current origin country code is not included in the list of the available countries, Export document is missing, Please enter weight for the packages, Terms of Trade have not been selected, The shipment weight may not be smaller than 0.1 kg for this product code, Please select a valid type of shipment, Please enter quantity of goods, Please enter a description of goods, Please enter the country of origin, Please enter value of goods, Please add an exportdoc position, The combination of shipping profile ID and shipping region ID does not exist, Code 1001, Der Nutzer des Webservice konnte nicht authentifiziert werden, Authorization Required, 365 Tage, 90 Tage, Systembenutzer
:position: 40

= Versanddienstleister und Versandprofile einrichten

In diesem Kapitel gehen wir die nötigen Schritte durch, damit deine Kunden im Webshop DHL als Versandart auswählen und Du anschließend die Anmeldung über das DHL Shipping erfolgreich durchführen kannst.

== DHL Shipping Plugin installieren und bereitstellen

=== Kaufen

Als erstes musst du die Grundlage schaffen, um in Zukunft erfolgreich mit DHL zu arbeiten. Hierzu ist es nötig, dass du dir das link:https://marketplace.plentymarkets.com/de/plugins/integration/DHLShipping_4871[DHL Shipping Plugin^] aus unserem marketplace herunterlädst.

.DHL Shipping Plugin kaufen
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Shipping_Plugin_kaufen.png[]

Das Plugin ist kostenfrei und kann durch einen Klick auf "Zur Kasse" gekauft werden. Bitte folge den weiteren Anweisungen im marketplace.

=== Installieren

Nachdem du das Plugin gekauft hast, musst du dieses in deinem plentymarkets System installieren. Das Plugin findest du nach dem Kauf im Menü *Plugins » Einkäufe*. Dort musst du das Plugin über den Button (*Plugin installieren*) installieren.

.DHL Shipping Plugin installieren
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Shipping_Plugin_installieren.png[]

=== Bereitstellen

Sobald das Plugin installiert ist, musst du es für die spätere Einrichtung noch im System bereit stellen. Hierzu sind folgende Schritte nötig.

Du findest das Plugin in der Auflistung. Mit dem Button oben links (*Zur Kartenansicht wechseln / Zur Tabellenansicht wechseln*) kannst du die Ansicht ändern:

.DHL Shipping Plugin bereitstellen
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Shipping_Plugin_bereitstellen_1.png[]

Mit einem Klick auf die Weltkugel am Plugin setzt du dieses in den Produktivmodus. Wenn du eine Änderung an einem Plugin vorgenommen hast, musst du alle Plugins für das System im Produktivmodus bereitstellen. Das machst du mit einem Klick auf die obere Weltkugel. Dieser Vorgang kann einen Moment dauern:

.DHL Shipping Plugin bereitstellen
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Shipping_Plugin_bereitstellen_2.png[]

Nachdem der Bereitstellungsvorgang abgeschlossen ist, siehst du durch einen Klick auf den Käfer das Bereitstellungslog. Ist dieser Vorgang erfolgreich gelaufen, ist der Käfer grün und bei nicht erfolgreichem Durchlauf ist der Käfer rot. Ist der Käfer rot, findest du in dem Log eine Fehlermeldung die dir sagt, welches Plugin diesen Fehler verursacht hat:

.DHL Shipping Plugin Log
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Shipping_Plugin_bereitstellen_3.png[]

Wenn keine Fehler im Log angezeigt werden, dann ist das Plugin im Menü *System » Aufträge » Versand » DHLShipping* verfügbar. Wie du das Plugin im Detail einrichtest, wird in einem späteren Abschnitt beschrieben.


== Lieferländer aktivieren

Da das Plugin jetzt grundlegend verfügbar ist, kannst du die nächsten Schritte in Angriff nehmen. In diesem Teil solltest du dir vorher Gedanken machen, in welche Länder du liefern möchtest. Wenn du die Länder festgelegt hast, kannst du diese im Menü **System » Aufträge » Versand » Optionen » Tab: Lieferländer** aktivieren. Diese stehen dann für den nächsten Schritt bereit.

Für die Lieferländer hast du folgende Auswahlmöglichkeiten:

Inaktiv = Dieses Lieferland ist nicht aktiv.

Aktiv = Dieses Lieferland ist uneingeschränkt aktiv.

Backoffice aktiv = Lieferländer mit dieser Eigenschaft sind nur im plentymarkets System und nicht im Webshop sichtbar.

Lieferant aktiv = Lieferländer mit dieser Eigenschaft stehen für die Einstellung als Standardlieferland im Menü *System » Mandant » Mandant wählen » Bestellvorgang » Einstellungen* nicht zur Verfügung.

.Lieferländer aktivieren
image::_best-practices/auftragsabwicklung/fulfillment/assets/Lieferländer_aktivieren.png[]


== Regionen erstellen

Die aktivierten Lieferländer musst du jetzt in Regionen zusammenfassen. Die Versandregionen findest du im Menü *System » Aufträge » Versand » Optionen » Tab: Regionen*. Füge jedes Land, welche die gleichen Versandkonditionen hat zusammen in eine Region. Wenn du für Spanien und Frankreich z.B. 14,90€ an deinen Versanddienstleister zahlst, dann kommen diese beiden Länder zusammen in eine Region. Kommt dann noch Italien mit 20,90€ dazu, muss dafür eine neue Region erstellt werden.

Auf der linken Seite in der Region siehst du alle verfügbaren Lieferländer. Auf der rechten Seite siehst du alle Lieferländer, die bereits mit dieser Region verknüpft sind. Füge nun alle aktiven Lieferländer eine Region hinzu. Bitte beachte dabei, dass jedes Lieferland nur in einer Region verknüpft sein kan.

.Regionen einrichten
image::_best-practices/auftragsabwicklung/fulfillment/assets/Regionen_einrichten.png[]

== Versanddienstleister erstellen

Außer den Lieferländern und die dazu passenden Regionen benötigst du noch den richtigen Versanddienstleister, um eine Brücke zwischen dem Plugin und den Versandprofilen zu schaffen. Den Versanddienstleister konnfigurierst du im Menü *System » Aufträge » Versand » Optionen » Tab: Versanddienstleister*.

Hier wählst du einen Namen für den Versanddienstleister aus und wählst aus dem Dropdown Menü den Dienstleister *"DHL Shipping (Versenden)"* aus.

.Versanddienstleister erstellen
image::_best-practices/auftragsabwicklung/fulfillment/assets/Regionen_einrichten.png[]

[NOTE]
.TrackingURL
====
Außerdem kannst du hier die TrackingURL "http://nolp.dhl.de/nextt-online-public/set_identcodes.do?lang=de&zip=$PLZ&idc=$PaketNr" für den späteren E-Mail Versand hinterlegen.
====

== Versandprofil erstellen

Alle Menüpunkte die du bisher eingerichtet hast, treffen im Versandprofil aufeinander. Hierzu wechselst du bitte in den TAB: **System » Aufträge » Versand » Optionen » Tab: Versandprofile**. Mit einem Klick auf den *+ Neu* Button, erstellst du ein neues Versandprofil und landest direkt im *TAB:Base*. Der Tab Portotabellen ist erst nach dem ersten speichern sichtbar.

=== Base

Im **Tab: Base** legst du die grundsätzlichen Einstellungen für dein Versandprofil fest.

.Feldbeschreibung im Versandprofil
|===
|Feldname |Beschreibung

|Versanddienstleister
|Wähle hier den zuvor angelegten Versanddienstleister aus.

|Name & Name (Backend)
|Wähle hier einen Namen für das Front und Backend in der jeweiligen Sprache aus.

|Markierung
|Hier kannst du dem Profil eine Markierung geben. (z.B. das DHL Logo)

|Priorität
|Die Priorität bestimmt die Reihenfolge der im Webshop angezeigten Versandprofile.

|Kategorie
|Die Kategorieoption ermöglicht eine zusätzliche Priorisierung der Versandprofile. Ein konkretes Anwendungsbeispiel findes du link:https://knowledge.plentymarkets.com/auftragsabwicklung/fulfillment/versand-vorbereiten#1300[hier].

|Artikel Portoaufschlag
|Hiermit kannst du am Artikel hinterlegte Portoaufschläge aktivieren.

|Postident
|Diese Option musst du aktivieren, wenn ein Postident nötig ist. Z.B. bei FSK18 Ware.

|Bei neuen Artikeln aktivieren
|Diese Option aktivieren, damit das Profil immer an neuen Artikeln aktiv ist.

|Nachname
|Option aktivieren, damit der Kunde im Ceres-Checkout im Webshop die Zahlungsart Nachnahme wählen kann.

|Inselzuschlag
|Portoaufschlag bei einer Lieferung auf eine Insel.

|Mandanten (Shops)
|Hier wählst du die Mandaten aus, welche mit diesem Versandprofil verknüpft sein sollen.

|Auftragsherkunft
|Hier wählst du die Auftragsherkünfte aus, für die dieses Versandprofil frei gegeben sein sollen.

|Gesperrte Zahlungsarten
|Hier wählst du die Zahlungsarten aus, die *nicht* für dieses Versandprofil verfügbar sein sollen.

|Gesperrte Kundenklassen
|Wähle hier die Kundenklassen aus, die für dieses Profil *nicht* zur Verfügung stehen sollen.

|Versandgruppen
|Die Versandgruppen sind Gruppen von Versandprofilen, die dann mehrere Versandprofile an einem artikel aktivieren können.

|*eBay*
|

|Konto
|Wähle hier ein eBay Konto aus, falls du eins verknüpfen möchtest.

|Listingtyp
|Auswahlmöglichkeiten: *Alle* = Alle Listingtypen *Auktion* = Nur Auktionen *Festpreis-/Shop Artikel* = Nur Festpreis bzw. Shop Artikel (Shop Artikel nur für Hood)

|Expressversand
|Aktivieren, wenn dieses Versandprofil für einen Expressversand genutzt werden soll.

|Treueprogramm
|Hier kannst du ein oder mehrere Treueprogramme wie eBay Plus oder Amazon Prime mit diesem Versandprofil verknüpfen.

|===

=== Portotabelle

Der *Tab: Portotabelle* ist erst verfügbar, wenn du das Versandprofil gespeichert hast. In diesem Tab werden die vorher eingerichteten Regionen zu Portotabellen für die jeweiligen Regionen. Das heißt, dass du hier die Preise und den Berechnungstypen für die Region festlegst.
Wähle die Berechnungsgrupndlage für die Versandkosten aus. Es gibt die Auswahlmöglichkeint: *Pauschal, Gewichtsabhänging, Volumenabhängig, Mengenabhängig, Preisabhängig und Artikelporto.*

Je nach Einstellung des Typen, musst du die passenden Preise eingeben. Außerdem kannst du für jede Portotabelle angeben, ab wann der Versand kostenfrei ist oder dass er z.B. ab 100€ Warenwert nur noch die hälfte kostet.

Der Beschränkungstyp schränkt das Versandprofil ein. Wenn du z.B. ein maximalgewicht von 20KG angibst und dein Kunde zwei Aritkel mit 11KG kauft, kann diese Profil nicht mehr im Webshop ausgewählt werden und es kommt vermutlich zu einer Fehlermeldung, weil kein weiteres Profil zur Verfügung steht.

Als Standardpaket kannst du ein vorher definiertes Versandpaket hinterlegen. Ein Versandpaket definierst du im Menü *System » Aufträge » Versand » Versandpakete*.

[NOTE]
.Berechnungstypen
====
Bitte beachte, dass du z.B. für die Gewichtsabhängige Berechnung auch die Gewichte an den einzelnen Artikeln pflegst. Ansonsten ist eine Berechnung nicht möglich.
====

.Berechnungstypen in der Portotabelle
image::_best-practices/auftragsabwicklung/fulfillment/assets/Portotabelle_Berechnungstypen.png[]


[NOTE]
.Portotabelle aktivieren
====
Eine Portotabelle ist erst aktiv, wenn diese min. einmal gespeichert wurde. Ansonsten siehst du den Hinweis *Region wird im Versandprofil nicht verwendet. Preis eintragen und speichern, um Region zu verwenden. Portotabelle speichern und neu laden, um Versanddienstleister-Einstellungen anzuzeigen.*
====

== Versandprofil am Artikel aktivieren

Im Menü *Artikel » Artikel bearbeiten Tab: Global* musst du jetzt alle Artikel mit den gewünschten Versandprofilen verknüpfen. Dies kannst du auch über die Gruppenfunktion machen.

== DHL Shipping Plugin konfigurieren

An Testmodus im Plugin denken

=== Plugin Config

=== Einrichtung

**System » Aufträge » Versand » DHLShipping**

**Grundeinstellungen**

**Abrechnungsnummern**

**Absenderdaten**

**Versandeinstellungen**

= Fehlerbehebung DHL

In den folgenden Unterkapiteln findest du Fehlermeldungen, die von DHL an plentymarkets über die Schnittstelle zurückgesendet werden, sowie mögliche Lösungen. Die Fehlermeldungen sind aus Gründen der Übersichtlichkeit in sechs Kategorien eingeordnet.

Die Anmeldedaten und die Antwort mit eventuellen Fehlermeldungen können für zwei Wochen im Menü **Daten » API-Log » Tab: Versand Center API-Log** abgerufen werden. In der Spalte ganz rechts wird mit einem Klick auf **Anfrageprotokoll öffnen** ein Fenster geöffnet, das die Anmeldedaten anzeigt. Ein Klick auf *Antwortprotokoll öffnen* öffnet ein Fenster mit der Rückmeldung von DHL.

.Versand-Center API-Log
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Versand_Center_API_Log.png[]

[#100]
== Zugangsdaten, Passwort, Productive-Modus, Anmeldung

Hier findest du Fehlermeldungen, die im Zusammenhang mit Zugangsdaten, Passwort, Productive-Modus und der Anmeldung in Verbindung stehen, sowie mögliche Lösungsvorschläge.

[#200]
=== Fehler bei der Anmeldung: (1001) login failed

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Es gab einen Fehler bei der Anmeldung: (1001) login failed.`

Diese Fehlermeldung kann zwei Ursachen haben:

* Fehlerhafte Login-Daten bzw. Zeichenbegrenzung überschritten

* Passwortgültigkeit bei DHL abgelaufen

[.subhead]
Fehlerhafte Login-Daten bzw. Zeichenbegrenzung überschritten

Überprüfe deine Login-Daten im plentymarkets Backend. Die Schnittstelle verlangt feste Vorgaben, die bei der Anmeldung über die Webseite von DHL nicht greifen. Die Schnittstelle arbeitet hier strikter: Häufig ist entweder die Zeichenbegrenzung von 20 Zeichen für Passwort und/oder Benutzernamen überschritten worden oder der Benutzername wurde “falsch” geschrieben. So könnte bei der Registrierung zwar z.B. das erste Zeichen ein Großbuchstabe sein, wird jedoch als Kleinbuchstabe gespeichert und so von der Schnittstelle gefordert.

[.subhead]
Passwortgültigkeit bei DHL abgelaufen

Die Passwortgültigkeit für den Benutzer zum DHL-Backend beträgt bei GKP-Admin-Benutzern 90 Tage. Wenn das Passwort die Gültigkeit verloren hat, wird von DHL im plentymarkets Backend keine gesonderte Fehlermeldung ausgegeben, welches auf die Ungültigkeit des Passworts hinweist, sondern nur die oben genannte Fehlermeldung. Anders verhält es sich, wenn du dich direkt im DHL-Geschäftskundenportal anmelden möchtest. Dort wird dann angezeigt, dass du ein neues Passwort setzen musst.

Es ist sinnvoll, einen Systembenutzer im DHL-Backend zu erstellen, da die Gültigkeit für diesen 365 Tage beträgt.

Das neue Passwort musst du dann ebenfalls im plentymarkets Backend speichern:

* im Plugin im Menü *System » Aufträge » Versand » DHL Shipping » Grundeinstellungen*

* in der Schnittstellenkonfiguration im Menü *System » Aufträge » Versand » Dienstleister » DHL Intraship/Versenden*

[#300]
=== Code 1001: Der Nutzer des Webservice konnte nicht authentifiziert werden.

`Code 1001 : Der Nutzer des Webservice konnte nicht authentifiziert werden.`

In der Vergangenheit mussten Händler, die diese Fehlermeldung erhalten haben, das Passwort bei DHL ändern, da dieses seine Gültigkeit verloren hat. Im plentymarkets Backend wird von DHL keine gesonderte Fehlermeldung ausgegeben, welches auf die Ungültigkeit des Passworts hinweist, sondern nur die oben genannte Fehlermeldung. Anders verhält es sich, wenn du dich direkt im DHL-Geschäftskundenportal anmelden möchtest. Dort wird dann angezeigt, dass du ein neues Passwort setzen musst.

Das neue Passwort musst du dann ebenfalls im plentymarkets Backend speichern:

* im Plugin im Menü *System » Aufträge » Versand » DHL Shipping » Grundeinstellungen*

* in der Schnittstellenkonfiguration im Menü *System » Aufträge » Versand » Dienstleister » DHL Intraship/Versenden*

Das Passwort für das DHL-Backend ist 90 Tage gültig (für Admin-Benutzer) und DHL verlangt nach Ablauf der 90 Tage ein neues Passwort. Für einen Systembenutzer, den man im DHL-Backend erstellt, ist das Passwort für eine Dauer von 365 Tagen gültig.

[#400]
=== Code 1: Authorization Required

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXX: Authorization Required.`

Prüfe, ob sich das DHL Shipping (Versenden)-Plugin im Produktivmodus und nicht im Testmodus befindet. Dazu öffnest du das Menü *Plugins » Plugin-Übersicht*, klickst auf das DHL Shipping (Versenden)-Plugin und wählst im Bereich *Konfiguration* aus der Dropdown-Liste die Einstellung *Productive*.

Als Standardeinstellung ist der Testmodus gewählt. Dadurch wird eine Anmeldung in der Sandbox-Umgebung (DHL-Entwicklerportal) durchgeführt – hierfür werden eigene Zugangsdaten für das Entwicklerportal benötigt. Sobald der Produktivmodus gewählt und gespeichert wurde, läuft die Anmeldung gegen das Live-System.

[#500]
=== Invalid XML: cvc-complex-type.2.4.d: Ungültiger Content wurde beginnend mit Element 'Shipment' gefunden.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Invalid XML: cvc-complex-type.2.4.d: Ungültiger Content wurde beginnend mit Element 'Shipment' gefunden. An dieser Stelle wird kein untergeordnetes Element erwartet.`

Diese Fehlermeldung haben Händler bisher erhalten, wenn sie eine größere Anzahl an Aufträgen im Menü *Aufträge » Versand-Center* anmelden wollten.

Wir empfehlen in dem Fall in erster Linie, einen <<basics/automatisierung/prozesse/prozesse-einrichten#, Prozess>> mit der Aktion <<basics/automatisierung/prozesse/aktionen#430, Versand-Center>> einzurichten. Damit wird die Fehlermeldung nicht mehr angezeigt. Eine ander Möglichkeit ist, die Anzahl der ausgewählten Aufträge für die manuelle Anmeldung im Versand-Center zu verringern.

[#600]
== Produkte, EKP, Verfahren, Teilnahme, Abrechnungsnummern

Hier findest du Fehlermeldungen, die im Zusammenhang mit Produkten, der EKP oder der Teilnahme in Verbindung stehen, sowie mögliche Lösungsvorschläge.

[#700]
=== Exception in extension function java.lang.RuntimeException: +**productId cannot be mapped**+

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen.	Exception in extension function java.lang.RuntimeException: **productId cannot be mapped**.`

Es wurde keine Abrechnungsnummer, die die productId enthält, gespeichert. Öffne das Menü *System » Aufträge » Versand » Optionen* und dort das DHL-Versandprofil mit der Portotabelle der entsprechenden Region.

Beachte, dass die Abrechnungsnummer zuvor im Menü *System » Aufträge » Versand » DHL Shipping » Abrechnungsnummern* gespeichert werden muss. Wenn du die Schnittstelle verwendest, speichere die Abrechnungsnummer im Menü *System » Aufträge » Versand » Versanddienstleister » DHL Intraship/Versenden*.

[#800]
=== Exception in extension function java.lang.RuntimeException: productId +**EXP/OFP**+ cannot be mapped

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Exception in extension function java.lang.RuntimeException: productId **EXP/OFP** cannot be mapped.`

*DHL Paket* und *DHL Express* sind zwei unterschiedliche Dienstleister.

DHL Intraship-Kunden können sowohl DHL Paket-Produkte als auch DHL Express-Produkte nutzen, z.B. OFP (Office Paket). Für Kunden des Geschäftskundenportals ist das leider nicht mehr möglich. Über das Geschäftskundenportal lassen sich nur DHL Paket-Produkte anmelden.

Da plentymarkets noch die DHL Intraship-Schnittstelle nutzt und unsere Anmeldungen je nach Kundenkonto unter Umständen an das GKP weitergeleitet werden, erhalten GKP-Kunden mit Express-Produkten die Meldung, dass die Anmeldung nicht gemapped werden konnte.

[#900]
== Versandprofile

Hier findest du Fehlermeldungen, die im Zusammenhang mit Versandprofilen in Verbindung stehen, sowie mögliche Lösungsvorschläge.

[#1000]
=== The combination of shipping profile ID xx and shipping region ID xx does not exist.

`The combination of shipping profile ID xxxx and shipping region ID xxxx does not exist.`

In diesem Fall konnte keine Versandeinstellung gefunden werden (Menü *System » Aufträge » Versand » DHLShipping » Versandeinstellungen*), die mit dem Versandprofil am Auftrag erstellt wurde.

Prüfe, welches Versandprofil bei den Versandeinstellungen für das Plugin gewählt wurde.

Häufig wird das “alte” DHL-Versandprofil mit dem Auftrag verknüpft. Die Einstellungen sind jedoch mit einem “neuen” Versandprofil für das DHL Shipping (Versenden)-Plugin erstellt worden.

Stimmt das Versandprofil mit dem am Auftrag überein, muss die Region überprüft werden.

Kann die Region bei den Versandeinstellungen in dem Versandprofil nicht gewählt werden, muss die Region in der Portotabelle des Versandprofils im Menü *System » Aufträge » Versand » Optionen » Tab: Versandprofile » Versandprofil öffnen » Tab: Portotabelle* geprüft werden. Der folgende Hinweistext darf *nicht* angezeigt werden:

`Region wird im Versandprofil nicht verwendet. Preis eintragen und speichern, um Region zu verwenden. Portotabelle speichern und neu laden, um Versanddienstleister-Einstellungen anzuzeigen.`

Beispielansicht einer nicht verwendeten Region im Versandprofil:

.Nicht verwendete Region in der Portotabelle des Versandprofils
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Portotabelle_Region.png[]

[#1100]
=== Ein interner Fehler ist aufgetreten

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Ein interner Fehler ist aufgetreten!`

Prüfe, ob die Region in der Portotabelle des Versandprofils aktiv ist.

Beispielansicht einer nicht verwendeten Region im Versandprofil:

.Nicht verwendete Region in der Portotabelle des Versandprofils
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Portotabelle_Region.png[]

[#1200]
=== Keine gültigen Versandprofile vorhanden: SystemShippingController

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Keine gültigen Versandprofile vorhanden: SystemShippingController`

Prüfe im Menü *System » Aufträge » Versand » Optionen » Tab: Versanddienstleister*, ob der korrekte Versanddienstleister gewählt wurde. Entsprechende Daten können nur geladen werden, wenn dies der Fall ist.

Wenn man die Portotabellen betrachtet, würde auffallen, dass DHL-spezifischen Angaben nicht gemacht werden können, da Felder wie die DHL-Abrechnungsnummer und DHL-Services nicht vorhanden sind.

[#1300]
=== Bitte Dateneingabe prüfen. unknown

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. unknown`

Diese Fehlermeldung sagt leider wenig aus und könnte verschiedene Ursachen haben:

* Prüfe zuerst die eingestellte Abrechnungsnummer in der Portotabelle.
Wurde evtl. eine Abrechnungsnummer gelöscht, die im verwendeten Versandprofil weiterhin abgerufen werden soll?

* Sollte es sich um eine Ausfuhrlieferung handeln, die den Wert von 1000 € übersteigt, erscheint ebenfalls die Meldung `unknown`.

Folgender Hinweis wird laut einem betroffenen Kunden bei Intraship angezeigt:

_Achtung! Ausfuhranmeldung wird erforderlich.
(Bitte fügen Sie eine ausgefüllte Ausfuhranmeldung bei und kennzeichnen sie Ihre Sendung mit dem Aufkleber "Achtung Ausfuhranmeldung").
Wenn Ihr Versand geschäftlichen Zwecken dient und der Warenwert Ihres Paketes oder Päckchens 1000 Euro übersteigt, benötigen Sie zusätzlich zu Paketkarte, Zollinhaltserklärung und Handelsrechnung eine Ausfuhranmeldung.
Bitte beachten Sie, dass diese Ausfuhranmeldung bereits ab einem Betrag > 1000 Euro von Ihren Zollamt vorab gefertigt (gestempelt) sein muss.
Sollte Ihnen Ihr Zollamt bereits ein vereinfachtes Verfahren bewilligt haben, so geben Sie bitte die jeweilige Bewilligungsnummer auf der Handelsrechnung an.
Die Aufkleber "Achtung Ausfuhranmeldung" erhalten Sie über unseren Vertrieb unter der Bestellnummer 915-830-000._

[#1400]
== Adressdaten Shipper/Receiver

Hier findest du Fehlermeldungen, die im Zusammenhang mit Adressdaten in Verbindung stehen, sowie mögliche Lösungsvorschläge.

[#1500]
=== Invalid fieldlength in element ‘Note’. Please refer to documentation.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Invalid fieldlength in element 'Note'. Please refer to documentation.`

Das Feld `Note` ist über die Schnittstelle auf 50 Zeichen begrenzt. Es wird von uns verwendet, wenn für die Hausnummer zu viele Zeichen (mehr als 7) oder ein Adresszusatz angegeben wurden.
Hier muss die Angabe z.B. in der Lieferanschrift korrigiert werden.

[#1600]
=== The Customer ID Number is invalid. Please check Customer ID Number. Your order could not be processed.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXXXX: The Customer ID Number is invalid. Please check the Customer ID Number. Your order could not be processed Your order could not be processed.`

Die in der Lieferadresse angegebene "Postnummer" ist nicht korrekt oder passt nicht zu den Daten des Kunden. Erfrage bei deinem Kunden die korrekten Daten. Bei der Validierung wird von DHL auch die Adresse geprüft, die übereinstimmen muss.

[#1700]
=== Invalid value in element ‘germany’

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Invalid value('3411') in element 'germany'. oder auch Invalid value('DE-34117') in element 'germany'.`

oder

`Auftrag XXXXXX: Hard validation error occured., Es handelt sich um eine ungültige Postleitzahl. Bitte verwenden Sie das Format 99999.`

In der Lieferadresse ist eine ungültige Postleitzahl angegeben (in unserem Beispiel für Deutschland). Die Schnittstelle erwartet 5 Ziffern. Zusätzliche Angaben wie “DE” sind über die Schnittstelle nicht erlaubt.
Für andere Länder würden entsprechende Meldungen erscheinen.

Die ungültige Postleitzahl kannst du im Menü *Aufträge » Aufträge bearbeiten* im Feld *Kundendaten* suchen und korrigieren.

[#1800]
=== Hard validation error occured., Bitte geben Sie einen Ort / Name 1 / Postleitzahl / Straße / Hausnummer / Telefonnummer an.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXXXX: Hard validation error occured, Bitte geben Sie einen Ort an. Bitte geben Sie Name 1 an. Bitte geben Sie eine Postleitzahl an. Bitte geben Sie eine Straße an. Bitte geben Sie eine Hausnummer an.`

oder

`Hard validation error occured, Bitte geben Sie eine gültige Telefonnummer an.`

Wenn eine der oben aufgelisteten Meldungen häufiger angezeigt wird, bezieht sich dies auf möglicherweise fehlerhaft angegebene oder fehlende Absenderdaten im Menü *System » Aufträge » Versand » Dienstleister » DHL Intraship/Versenden*.

.Absenderdaten im Menü *System » Aufträge » Versand » Dienstleister » DHL Intraship/Versenden*
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL_Absenderdaten_Intraship_Versenden.png[]

Wenn kein Fehler “sichtbar” ist, könnte ein unsichtbares Steuerzeichen die Ursache sein. Dieses wird häufig unbewusst mit Copy & Paste hinzugefügt. Lösche also dieses unsichtbare Steuerzeichen in den Absenderdaten. Gegebenenfalls musst du den Wert erneut eingeben.

Wenn eine der oben aufgelisteten Meldungen nur "einfach" angezeigt wird, prüfe die Empfängerdaten im Auftrag.

[#1900]
== Ausfuhrlieferungen

Hier findest du Fehlermeldungen, die im Zusammenhang mit Ausfuhrlieferungen in Verbindung stehen, sowie mögliche Lösungsvorschläge.

[#2000]
=== Hard validation error occured., Die Gewichtsangabe ist kleiner als im CN23-Formular.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXXXX: Hard validation error occured., Die Gewichtsangabe ist kleiner als im CN23-Formular.`

Diese Fehlermeldung erscheint, wenn Ausfuhrlieferungen bei DHL Versenden angemeldet werden sollen, die eine Artikelposition mit der Menge > 1 angegeben haben. Leider werden von DHL die Daten über die aktuelle Schnittstelle zu Versenden anders gemapped, sodass das Gewicht nicht korrekt angegeben werden kann.

Wir haben DHL das Problem des öfteren gemeldet, aber es konnte keine gemeinsame Lösung gefunden werden.

Mit dem link:https://marketplace.plentymarkets.com/plugins/integration/DHLShipping_4871[DHL Shipping (Versenden)-Plugin^], das wie alle Plugins nur mit plentymarkets Version 7 funktioniert, ist diese Problematik nicht mehr vorhanden.

Wenn du noch die "alte" Schnittstelle und DHL Intraship nutzt, ist eine Anmeldungen mit deinem DHL Intraship-Zugangsdaten weiterhin möglich und die oben genannte Fehlermeldung wird nicht angezeigt.

[#2100]
=== Bitte geben Sie eine Anzahl / Beschreibung / Warenwert / Gewicht / Art der Sendung an. Die angegebene Art der Sendung ist nicht gültig.

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXXXX: Hard validation error occured., Bitte geben Sie die Anzahl an., Bitte geben Sie die Beschreibung an., Bitte geben Sie den Warenwert an., Bitte geben Sie das Gewicht an., Bitte geben Sie das Gewicht an., Bitte geben Sie die Art der Sendung an., Die angegebene Art der Sendung ist nicht gültig.`

Hier fehlen Angaben, die für Ausfuhrlieferungen relevant sind. Meist liegt dies daran, dass keine Voranmeldung des CN23-Formulars möglich ist. (Voranmeldung bedeutet, dass plentymarkets die Artikeldaten im Vorfeld an DHL übermittelt. Dies ist bei Ausfuhrlieferungen verpflichtend.)

Der Hintergrund dafür ist am häufigsten auf spezielle Gebiete in den Lieferländern zurückzuführen: Diese müssen zolltechnisch anders behandelt werden, gehören jedoch politisch zu einem EU-Land, das keine Ausfuhrpapiere benötigt. Ein Beispiel für Deutschland ist die Insel Helgoland; für Spanien die Kanarischen Inseln.

Aktiviere daher das entsprechende Lieferland im Menü *System » Aufträge » Versand » Optionen » Tab: Lieferländer*, weise das Lieferland danach im Tab *Region* einer Region zu und ändere das Lieferland anschließend im Auftrag. Auf diese Weise können die fehlenden Angaben übermittelt werden  und die Anmeldung kann weitergeführt werden.

Wenn du das DHL Shipping (Versenden)-Plugin verwendest, könnte die Meldung auch wegen der bereitgestellten Version des Plugins erscheinen, da man über Versionen, die älter als Version 1.3.0 sind, keine Ausfuhrlieferungen anmelden kann. Du musst also mindestens Plugin-Version 1.3.0 nutzen. Um zu prüfen, welche Version du nutzt, halte den Cursor über die folgenden Bereiche im Menü *Plugins » Plugin-Übersicht*. Je nach gewählter Ansicht sieht dies wie folgt aus:

Screenshot aus dem Testsystem:

.Tabellenansicht der Pluginversion
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL-Pluginversion-Tabellenansicht.png[]

Screenshot aus dem Testsystem:

.Kartenansicht der Pluginversion
image::_best-practices/auftragsabwicklung/fulfillment/assets/DHL-Pluginversion-Kartenansicht.png[]

Beachte, dass du jeweils eine Option in den Dropdown-Listen *Frankatur bei Auslandssendungen* und *Sendungsart* im Menü *System » Aufträge » Versand » DHL Shipping » Versandeinstellungen* wählen musst.


[#2200]
=== incoterms, origin country code, export document missing, weight for packages, terms of trade, shipment weight may not be smaller than 0.1 kg, valid type of shipment, quantity of goods / description of goods / country of origin / value of goods, exportdoc position

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Auftrag XXXXX: The current incoterms are not included in the list of the available incoterms., The current origin country code is not included in the list of the available countries., Export document is missing., Your order could not be processed Your order could not be processed , Please enter weight for the packages, Terms of Trade have not been selected., The shipment weight may not be smaller than 0.1 kg for this product code., The shipment weight may not be smaller than 0.1 kg for this product code., Please select a valid type of shipment., Please enter quantity of goods., Please enter a description of goods., Please enter the country of ofigin., Please enter value of goods., Please add an exportdoc position.`

In der Fehlermeldung ist von “incoterms” und “origin country” die Rede. Diese Fehlermeldung kommt von DHL und sagt aus, dass es sich um eine Ausfuhrlieferung handelt und Informationen für den Zoll fehlen. Das kann in der Regel zwei Ursachen haben:

1. An den Artikeln fehlen Angaben wie Zolltarifnummer und/oder Herkunftsland des Produktes.

2. Für die Lieferadresse wird das falsche Land genutzt. Deshalb werden die Daten von 1., obwohl vorhanden, nicht an DHL übermittelt. Das kann z.B. der Fall sein, wenn die Ware zu den Kanarischen Inseln geliefert werden soll, als Lieferland aber Spanien ausgewählt wurde.

[#2300]
=== Invalid fieldlength: InvoiceDate

`Code 1 : Der Vorgang konnte nicht korrekt durchgeführt werden. Bitte Dateneingabe prüfen. Invalid fieldlength: InvoiceDate`

Bei Anmeldungen von Ausfuhrlieferung ist es für die Voranmeldung der Artikel notwendig, dass eine Rechnung am Auftrag erstellt wurde, damit das Pflichtfeld *InvoiceDate* gefüllt werden kann. Die Fehlermeldung erscheint, wenn dies nicht der Fall ist.

"Voranmeldung" bedeutet, dass plentymarkets die Artikeldaten im Vorfeld an DHL übermittelt. Dies ist bei Ausfuhrlieferungen verpflichtend.

[#2400]
== DHL Plugin-Installation

Nachdem du ein Update des Plugins heruntergeladen hast, ist es erforderlich, dass du das Plugin erneut in Productive bereitstellst. Das Herunterladen des Updates allein bewirkt noch nicht, dass die Neuerungen bzw. Änderungen in der neuen Version auch aktiv sind.
