= EmailBuilder (Testphase)
:lang: de
include::{includedir}/_header.adoc[]
:keywords:
:description: Erfahre, wie du den EmailBuilder in plentymarkets verwendest.
:position: 600
:url: crm/emailbuilder-testphase
:id: MYFLVYO
:author: team-crm


[IMPORTANT]
.EmailBuilder wird kontinuierlich weiterentwickelt
====
Auf dieser Seite stellen wir dir die Funktionen des neuen EmailBuilder vor. Der EmailBuilder wird kontinuierlich weiterentwickelt und um weitere Funktionen und Features ergänzt. Natürlich werden in diesem Zuge auch die Beschreibungen auf dieser Handbuchseite nach und nach erweitert.
====

Alle E-Mails, die über plentymarkets versendet werden, basieren auf Vorlagen. Vorlagen erstellst und verwaltest du mit dem EmailBuilder im Menü *CRM » EmailBuilder (Testphase)*.

Der EmailBuilder ist ein Baukastenmodul, mit dem du deine E-Mail-Vorlagen schnell und einfach per Drag-and-drop erstellen und bearbeiten kannst. Dafür benötigst du keinerlei Programmierungskenntnisse.

Der EmailBuilder besteht aus 2 Ansichten: dem Konfigurationsmanager und dem Editor. Im Konfigurationsmanager erstellst du Ordner, ggf. Unterordner, Vorlagen sowie Vorlagen für deinen Footer und deinen Header. Im Editor befüllst du deine Vorlagen, Header und Footer mit Inhalt. Du kannst zum Beispiel eine Vorlage für eine Rechnung erstellen und diese zukünftig für alle Rechnungen an deine Kund:innen verwenden. +
Die Header- und Footer-Vorlagen kannst du dann beliebig in deinen E-Mail-Vorlagen verwenden. Header und Footer sind global wirksam; Änderungen, die du am Header und Footer vornimmst, wirken sich demnach auch auf alle bestehenden Vorlagen sowie weitere Vorlagen, die du zukünftig erstellst, aus.

Mit dem Header, dem Footer und den Einstellungen in der Vorlage wie Name, Betreff etc. erstellst du sozusagen das Gerüst deiner E-Mail. Den Inhalt der Vorlage bildest du mit den Widgets und Variablen. Die Variablen werden dann in der E-Mail an deine Kund:innen durch den korrekten Inhalt ersetzt. Zum Beispiel wird die Variable `Lieferadresse Vorname und Nachname` in der E-Mail dann durch den Vor- und Nachnamen deines Kontakts aus der Lieferadresse ausgegeben.

Dieses Video bietet dir eine Einführung in das Thema:

.EmailBuilder: Überblick
video::580717951[vimeo]

Außerdem kannst du einstellen, dass dein plentymarkets System bei bestimmten Ereignissen, z.B. beim Eingehen neuer Bestellungen in deinem plentyShop oder nachdem Kund:innen deinen Newsletter abonniert haben, automatisch E-Mails aus diesen Vorlagen erstellt und an deine Kund:innen versendet.

[#vorbereitende-einstellungen]
== Vorbereitende Einstellungen vornehmen

In den folgenden Unterkapiteln wird beschrieben, welche vorbereitenden Einstellungen nötig sind, damit du mit dem EmailBuilder arbeiten kannst.


[#rechte-vergeben]
=== Rechte für Backend-Benutzer:innen vergeben

:rights-purpose: mit dem EmailBuilder arbeiten können
:right-one: pass:quotes[*CRM > E-Mail > Automatischen Versand bearbeiten*]
:right-two: pass:quotes[*CRM > E-Mail > HTML-Design bearbeiten*]
:right-three: pass:quotes[*CRM > E-Mail > Infodienst bearbeiten*]
:right-four: pass:quotes[*CRM > E-Mail > Newsletter bearbeiten*]
:right-five: pass:quotes[*CRM > E-Mail > Signatur bearbeiten*]
:right-six: pass:quotes[*CRM > E-Mail > Vorlagen bearbeiten*]
:right-seven: pass:quotes[*CRM > E-Mail > Zugangsdaten bearbeiten*]
:right-eight: pass:quotes[im Bereich *Menü-Sichtbarkeiten*: *CRM > EmailBuilder*]

include::../_includes/textblocks/instructions/rechte.adoc[]

[#e-mail-server-zugangsdaten]
=== E-Mail-Server-Zugangsdaten speichern

Im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Zugangsdaten* speicherst du die Zugangsdaten des E-Mail-Postfachs, aus dem du E-Mails versenden möchtest, damit dein plentymarkets System E-Mails wie Auftragsbestätigungen und Versandbestätigungen von dieser E-Mail-Adresse versenden kann.

[.instruction]
E-Mail-Server-Zugangsdaten speichern:

. Öffne das Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Zugangsdaten*.
. Nimm die gewünschten Einstellungen vor. Beachte dazu die Erläuterungen in <<#table-email-server-login-details>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[table-email-server-login-details]]
.E-Mail-Server-Zugangsdaten speichern
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Testmodus*
| *Aktiv* oder *Inaktiv* wählen. +
*Aktiv* = Der Testmodus ist aktiviert. Alle E-Mails werden nur an die eingegebene E-Mail-Adresse gesendet. So kann vor dem Live-Betrieb die korrekte Funktionsweise geprüft werden. +
*Inaktiv* = Der Live-Modus ist aktiviert. +
*_Wichtig:_* Der Testmodus gilt nur für diesen Webshop. Die Einstellungen für weitere Mandanten werden im Menü des Mandanten (Shops) konfiguriert.

| *Name des Absenders*
|Eigenen Namen oder Namen des Webshops eingeben. Der Name wird den Empfänger:innen angezeigt. Für die korrekte Darstellung die Verwendung von Sonderzeichen vermeiden.

| *E-Mail-Adresse*
|E-Mail-Adresse eingeben, wie sie auch im E-Mail-Programm steht.

| *Postausgangsserver/SMTP-Server*
|Postausgangsserver wie vom Provider angegeben eingeben (meist smtp.domain.de oder mail.domain.de). +
*_mailbox.org:_* Für Postfächer bei mailbox.org den Postausgangsserver *smtp.mailbox.org* eingeben und Verschlüsselung *SSL* wählen.

| *Benutzername*
|Benutzer:innenname zu der E-Mail-Adresse eingeben. +
*_mailbox.org:_* Der mailbox.org-Benutzer:innenname ist die vollständige E-Mail-Adresse des mailbox.org-Postfachs.

| *Passwort*
|Passwort zu dem Benutzer:innenname und der E-Mail-Adresse eingeben.

| *Port (Standardport: 25)*
|Wert *25* eingeben. Dieser Wert ist für fast alle Provider korrekt. Ggf. den korrekten Port beim Provider erfragen. +
*_mailbox.org:_* Für Postfächer bei mailbox.org den Port *465* eingeben und als Verschlüsselung *SSL* wählen.

| *Verschlüsselung*
| *SSL*, *TLS* oder *keine Verschlüsselung* wählen.  +
*_mailbox.org:_* Für Postfächer bei mailbox.org den Port *465* eingeben und als Verschlüsselung *SSL* wählen.

|====

[TIP]
.Newsletter-Zugangsdaten eingeben
====
Wenn du Newsletter an deine Kund:innen versenden möchtest, gibst du die Zugangsdaten im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Newsletter* ein. Weitere Informationen dazu findest du auf der Handbuchseite <<crm/newsletter-versenden#, Newsletter>> im Kapitel <<crm/newsletter-versenden#200, Newsletter-Zugangsdaten eingeben>>.
====

[#e-mail-signatur]
=== E-Mail-Signatur speichern

Im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* speicherst du deine Signatur, die dann in deinen E-Mail-Vorlagen automatisch eingefügt wird, wenn du die entsprechende Variable in der Vorlage eingefügt hast.

[IMPORTANT]
.Priorität der Signatur beachten
====
Die im Benutzerkonto im Menü *Einrichtung » Einstellungen » Benutzer » Konten* eingegebene Signatur hat Priorität gegenüber der Signatur, die im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* gespeichert ist. +
*_Das bedeutet:_* Wenn du z.B. die Variable `Signatur im HTML-Format` in die Vorlage einfügst, wird die Signatur aus dem Benutzer:innenkonto übernommen. Wenn keine Signatur im Benutzer:innenkonto gespeichert ist, wird die Signatur, die im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* gespeichert ist, übernommen.
====

// Prüfen --> Wenn du die Variable `Signatur im reinen Textformat` in die E-Mail-Vorlage einfügst, wird immer die Signatur, die im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* gespeichert ist, übernommen.


// Prüfen --> Infodienst hier auch erwähnen?

[#ordner-verwalten]
== Ordner verwalten

Du kannst im EmailBuilder beliebig viele Ordner und Unterordner erstellen. Nachdem der Ordner erstellt ist, kannst du mit einem Klick auf icon:more_vert[set=material] neue Unterordner, neue Vorlagen allgemein und neue Vorlagen für Header und Footer erstellen und die Ordner umbenennen oder löschen.

In deinem plentymarkets System befindet sich bereits ein Ordner mit einigen vordefinierten Standardvorlagen. Diese werden weiter unten im Kapitel <<#standardvorlagen-verwenden, Standardvorlagen verwenden>> erläutert.

[[image-emailbuilder-folder-structure]]
.Ordnerstruktur im EmailBuilder
image::crm/assets/emailbuilder-ordner-struktur.png[width=640, height=360]

[#ordner-erstellen]
=== Ordner erstellen

Erstelle Ordner, um später eine bessere Übersicht über deine E-Mail-Vorlagen zu bekommen. Gehe wie im Folgenden beschrieben vor, um einen neuen Ordner zu erstellen.

[.instruction]
Ordner erstellen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke unten links auf icon:plus[role="green"] *Neuer Hauptordner*. +
→ Das Fenster *Neuen Ordner erstellen* wird geöffnet.
. Gib den Namen für den Ordner ein.
. Klicke auf *Speichern*. +
→ Der neue Ordner wird der Ordnerliste hinzugefügt.

[TIP]
Wenn du alle Einstellungen wie im Folgenden beschrieben vorgenommen hast – also Unterordner, Vorlagen, Header und Footer erstellt hast –, kannst du den Hauptordner mit einem Klick auf icon:chevron_right[set=material] öffnen. Dort siehst du dann auf einen Blick alle Unterordner, Vorlagen, Header und Footer, die du direkt unter dem Hauptordner erstellt hast.

In diesem Video zeigen wir dir, wie du Ordner im EmailBuilder erstellst:

.EmailBuilder: Ordner erstellen
video::580717879[vimeo]

[#order-umbenennen]
=== Ordner umbenennen

Du kannst den Namen des Ordners jederzeit anpassen. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Ordner umbenennen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners, den du umbenennen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf icon:edit[set=material] *Umbenennen*. +
→ Das Fenster *Ordner umbenennen* wird geöffnet.
. Gib einen anderen Namen für den Ordner ein.
. Klicke auf *Aktualisieren*. +
→ Der neue Name des Ordners wird aktualisiert und in der Liste angezeigt.

[#unterordner-erstellen]
=== Unterordner erstellen

Erstelle Unterordner in deinen Ordnern, um deine E-Mail-Vorlagen später noch differenzierter zu gruppieren. Du kannst beliebig viele Unterordner erstellen. Auch die Anzahl der Ebenen ist unbegrenzt.

[TIP]
.Entwurf für deine Ordner-Struktur im Vorfeld erstellen
====
Wir empfehlen dir, im Vorfeld einen Entwurf zu erstellen, um unübersichtliche Verschachtelungen in deiner Ordnerstruktur zu vermeiden, denn: Je mehr Ebenen du erstellst, desto unübersichtlicher wird die Struktur.
====

[.instruction]
Unterordner erstellen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners, für den du einen Unterordner erstellen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf icon:plus[] *Neuer Unterordner*. +
→ Das Fenster *Neuen Ordner erstellen* wird geöffnet.
. Gib den Namen für den Unterordner ein.
. Klicke auf *Speichern*. +
→ Der Unterordner wird in dem Hauptordner erstellt.

Öffne den Unterordner, indem du den Hauptordner mit einem Klick auf icon:chevron_right[set=material] öffnest. Du siehst dort auf einen Blick alle erstellten Unterordner.

[#ordner-loeschen]
=== Ordner löschen

Du kannst Ordner und Unterordner jederzeit löschen. Beachte, dass dabei alle Inhalte in dem Ordner, den du löschen möchtest, entfernt werden.

[.instruction]
Ordner löschen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners bzw. Unterordners, den du löschen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf *Löschen*. +
→ Ein Fenster mit einer Sicherheitsabfrage wird geöffnet.
. Klicke auf *Löschen*. +
→ Der Ordner mit allen dazugehörigen Unterordnern und darin enthaltenen Vorlagen wird gelöscht.

[#vorlagen-verwalten]
== Vorlagen verwalten

In den folgenden Unterkapiteln erfährst du, wie du Vorlagen für <<#header-erstellen, Header>> und <<#footer-erstellen, Footer>> und anschließend <<#vorlage-erstellen, allgemeine Vorlagen>> erstellst, suchst und bearbeitest. Du kannst außerdem bereits vordefinierte <<#standardvorlagen-verwenden, Standardvorlagen verwenden>>. Außerdem erfährst du alles über die verfügbaren <<#widget-einfuegen, Widgets>> und wie du diese Widgets verwenden kannst.

Die Widgets und Variablen, die in der Vorlage enthalten sind, bilden den eigentlichen Inhalt deiner E-Mail. In einer Vorlage kannst du über die verfügbaren Widgets beliebig viele Variablen per Drag-and-drop einfügen, die dann in der E-Mail an deine Kund:innen durch den korrekten Inhalt ersetzt werden.

Welche Variablen dir für deine E-Mail-Vorlagen zur Verfügung stehen, findest du in den Listen ganz unten auf dieser Seite im Kapitel <<#variablen-emailbuilder, Verfügbare Variablen und twig expressions für das Code-Widget und den Betreff>>.

[#vorlage-header-footer]
=== Vorlagen für Header und Footer erstellen

Erstelle Vorlagen für den Header und den Footer, die du dann in all deinen E-Mail-Vorlagen wählen kannst. Header und Footer sind global wirksam. Das bedeutet: Änderungen, die du am Header und Footer vornimmst, wirken sich demnach auch auf alle bestehenden Vorlagen sowie weitere Vorlagen, die du zukünftig erstellst, aus.

Im Header kannst du beispielsweise dein Firmenlogo speichern und im Footer deine Signatur und die allgemeinen Firmendaten wie die Adresse, Links zu sozialen Netzwerken, die Rechtsform deiner Firma, Informationen zu Geschäftsführung etc.

Gehe wie im Folgenden beschrieben vor, um Vorlagen für den <<#header-erstellen, Header>> und den <<#footer-erstellen, Footer>> zu erstellen.

[#header-erstellen]
==== Vorlage für den Header erstellen

Gehe wie im Folgenden beschrieben vor, um eine Vorlage für den Header deiner E-Mail-Vorlage zu erstellen.

[.instruction]
Vorlage für den Header erstellen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners bzw. Unterordners, in dem du einen Header erstellen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf icon:plus[] *Neuer Header*.
. Gib einen Namen für den Header ein.
. *Speichere* (icon:save[set=material]) die Einstellungen. +
→ Die Vorlage wird erstellt.
. Klicke auf *Bearbeiten* (icon:edit[set=material]).
. Bearbeite den Header nach deinen Wünschen und füge <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> ein.
. *Speichere* die Einstellungen.

In diesem Video zeigen wir dir, wie du einen Header im EmailBuilder erstellst:

.EmailBuilder: Header erstellen
video::580717711[vimeo]

[#header-vorschau-anzeigen]
[discrete]
==== Vorschau des Headers anzeigen

Prüfe den Header, indem du die Vorschau öffnest.

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der den Header enthält, von dem du eine Vorschau anzeigen möchtest.
. Klicke auf den Header.
. Klicke auf *Vorschau* (icon:preview[set=material]).
. Wähle *Vorschau HTML* oder *Vorschau reiner Text*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet.
. Prüfe den Header.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, bearbeite den Inhalt deines Headers erneut.

[#footer-erstellen]
==== Vorlage für den Footer erstellen

Gehe wie im Folgenden beschrieben vor, um eine Vorlage für den Footer deiner E-Mail-Vorlage zu erstellen.

[.instruction]
Vorlage für den Footer erstellen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners bzw. Unterordners, in dem du einen Footer erstellen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf icon:plus[] *Neuer Footer*. +
→ Eine weitere Ansicht öffnet sich.
. Gib einen Namen für den Footer ein.
. *Speichere* (icon:save[set=material]) die Einstellungen. +
→ Die Vorlage wird erstellt.
. Klicke auf *Bearbeiten* (icon:edit[set=material]).
. Bearbeite den Footer nach deinen Wünschen und füge <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> ein.
. *Speichere* die Einstellungen.

In diesem Video zeigen wir dir, wie du einen Footer im EmailBuilder erstellst:

.EmailBuilder: Footer erstellen
video::580717037[vimeo]

[#footer-vorschau-anzeigen]
[discrete]
==== Vorschau des Footers anzeigen

Prüfe den Footer, indem du die Vorschau öffnest.

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der den Footer enthält, von dem du eine Vorschau anzeigen möchtest.
. Klicke auf den Footer.
. Klicke auf *Vorschau* (icon:preview[set=material]).
. Wähle *Vorschau HTML* oder *Vorschau reiner Text*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet.
. Prüfe den Footer.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, bearbeite den Inhalt deines Footers erneut.

[#vorlage-erstellen]
=== Vorlage erstellen

Erstelle nun die Vorlage und speichere grundlegende Einstellungen wie den Namen, den Betreff, CC und BCC und wähle die zur Vorlage passenden Header und Footer. Gehe wie im Folgenden beschrieben vor, um eine Vorlage zu erstellen.

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit im Editor bearbeitest, kannst du über die Navigation zwischen den einzelnen Vorlagen hin- und herwechseln. Mit einem Klick auf *Konfiguration* gelangst du wieder in den Ordnerbaum. Dort ist dann automatisch die Vorlage geöffnet, die du zuletzt geöffnet hattest.
====

[[image-emailbuilder-template]]
.Neue Vorlage im EmailBuilder erstellen
image::crm/assets/emailbuilder-neue-vorlage-erstellen.png[width=640, height=360]

[.instruction]
Vorlage erstellen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klicke in der Zeile des Ordners, in dem du eine Vorlage erstellen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf icon:plus[] *Neue Vorlage*.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<#table-emailbuilder-create-template>> und <<#image-emailbuilder-template>>.
. *Speichere* (icon:save[set=material]) die Einstellungen.

[[table-emailbuilder-create-template]]
.Vorlage im EmailBuilder erstellen
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Speichern*
|Speichert die Einstellungen.

// | *Vorschau*
// |Zeigt eine Vorschau der Vorlage an. +
// Wähle, ob du die Vorschau im HTML-Format oder im reinen Textformat anzeigen lassen möchtest.
// Je nachdem, welchen Vorschautypen du wählst, öffnet sich ein Fenster mit dem Inhalt der E-Mail-Vorlage im HTML-Format oder in reinem Textformat.

2+| *Name*

| *Name*
|Wie lautet der Name der Vorlage? Gib einen aussagekräftigen Namen ein, damit du die Vorlage später leicht wiederfinden kannst. +
*_Hinweis:_* Dieses Feld ist ein Pflichtfeld.

2+| *Inhalt*
2+| Klicke auf icon:edit[set=material], um den Inhalt der Vorlage zu bearbeiten und <<#widget-einfuegen, Widgets>> und <<#variablen-emailbuilder, Variablen>> einzufügen. +
Der Editor-Bereich öffnet sich und du kannst über die Widgets den Inhalt der Vorlage bearbeiten.

| *Aus Standardvorlage erstellen*
|Klappe den Bereich auf (icon:caret-down[]), um eine der <<#standardvorlagen-verwenden, Standardvorlagen>> zu wählen und mit der neuen Vorlage zu verknüpfen.

2+| *Einstellungen*

| *Header*
|Welchen Header möchtest du in dieser Vorlage anzeigen? Wähle einen Header aus der Dropdown-Liste (icon:caret-down[]). +
Die Liste enthält alle <<#header-erstellen, Header>>, die du bereits erstellt hast.

| *Footer*
|Welchen Footer möchtest du in dieser Vorlage anzeigen? Wähle einen Footer aus der Dropdown-Liste (icon:caret-down[]). +
Die Liste enthält alle <<#footer-erstellen, Footer>>, die du bereits erstellt hast.

//| *Typ*
//|In welchem Bereich soll die E-Mail-Vorlage als Auswahl zur Verfügung stehen? Wähle einen Typ aus der Dropdown-Liste.

| *Wähle statische Anhänge*
|In dieser Dropdown-Liste stehen dir alle Anhänge zur Verfügung, die du vorher im Menü *CMS » Dokumente* hochgeladen hast. Dies sind zum Beispiel Installationsanleitungen oder Produktdatenblätter. Wähle (icon:check-square[role="blue"]) bis zu 3 statische Anhänge aus der Dropdown-Liste.

| *Wähle dynamische Anhänge*
|In dieser Dropdown-Liste stehen dir alle <<auftraege/auftragsdokumente#100, standortbezogenen Dokumente>> zur Verfügung, die du im Menü *Einrichtung » Mandant » [Mandant wählen] » Standorte » [Standort wählen] » Dokumente* eingerichtet hast. Wähle (icon:check-square[role="blue"]) bis zu 3 dynamische Anhänge aus der Dropdown-Liste.

| *Betreff*
|Wie lautet der Betreff deiner E-Mail?

//| *Von*
//|Das ist der Absender der E-Mail, so wie er im plentymarkets System in den E-Mail-Einstellungen hinterlegt ist.

| *Antwort an*
|An wen soll die E-Mail gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

| *CC*
|An wen soll die E-Mail in Kopie gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

| *BCC*
|An wen soll die E-Mail als blinde Kopie gesendet werden? Gib die E-Mail-Adresse(n) ein. +
*_Hinweis:_* Wenn du mehrere E-Mail-Adressen eingibst, trenne diese jeweils durch ein Komma.

|====

Gestalte nun den Inhalt deiner E-Mail, indem du über die Widgets Variablen einfügst. Wie du dazu vorgehst, ist im folgenden Kapitel <<widget-einfuegen#, Widget in Vorlage einfügen>> beschrieben.

In diesem Video zeigen wir dir, wie du eine Vorlage mit Widgets erstellst:

.EmailBuilder: Vorlage mit Widget erstellen
video::580718073[vimeo]

[#widget-einfuegen]
=== Widget in Vorlage einfügen

Im Editor findest du eine Auswahl an Widgets, deren Inhalte bereits teilweise für dich vorkonfiguriert sind. Beispielsweise findest du im Widget *Auftragspositionen* eine vordefinierte Liste mit den wichtigsten Variablen rund um den bestellten Artikel wie Artikelname, Anzahl der bestellten Menge, Preise, Versandkosten und Gesamtrechnungsbetrag. Du kannst die Inhalte jedoch jederzeit nach deinen Wünschen anpassen und weitere Spaltennamen und einzelne Positionen hinzufügen. <<#image-emailbuilder-widget-order-items>> zeigt den Bearbeitungsmodus des vordefinierten Widget *Auftragspositionen*.

[[image-emailbuilder-widget-order-items]]
.Bearbeitungsmodus des vordefinierten Widget *Auftragspositionen*
image::crm/assets/emailbuilder-bearbeitungsmodus-auftragspositionen.png[width=640, height=360]

In <<#table-available-widgets-emailbuilder>> findest du alle im EmailBuilder verfügbaren Widgets sowie eine Erläuterung, wie du die Widgets verwenden kannst.

[[table-available-widgets-emailbuilder]]
.Im EmailBuilder verfügbare Widgets
[cols="1,3"]
|====
|Widget |Erläuterung

| *Zweispaltiges Layout*
a|Ermöglicht die Darstellung von Text in einem zweispaltigen Layout. Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du das Verhältnis, wie die beiden Spalten angezeigt werden, bestimmen. Zur Auswahl stehen die folgenden Werte:

* 50% / 50% (Standard)
* 30% / 70%
* 70% / 30%

Du kannst weitere Widgets in dieses Widget einfügen, indem du diese per Drag-and-drop in eine der beiden Spalten ziehst.

Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (icon:delete[set=material]), um das Widget zu entfernen.

| *Dreispaltiges Layout*
a|Ermöglicht die Darstellung von Text in einem dreispaltigen Layout. 

Du kannst weitere Widgets in dieses Widget einfügen, indem du diese per Drag-and-drop in eine der drei Spalten ziehst.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (icon:delete[set=material]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen.

| *Text*
|In diesem Widget kannst du Text eingeben und Variablen verwenden. Du hast auch die Möglichkeit, den eingegebenen Text zu formatieren. Mache dazu einen Doppelklick auf das Wort, das du formatieren möchtest.

Mit einem Klick auf icon:edit[set=material] öffnet sich auf der linken Seite die Liste mit den Variablen. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (icon:chevron_right[set=material]). Klicke auf die Variable, die du einfügen möchtest. Gib ggf. zusätzlich Text in das Widget ein.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (icon:delete[set=material]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen.

| *Code*
|In diesem Widget kannst du Text im HTML-Format eingeben. Hierzu sind einige grundlegende HTML-Kenntnisse notwendig.

Klicke auf icon:code[role="darkGrey"], um die Ansicht zu öffnen.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (icon:delete[set=material]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen.

| *Kontaktadresse*
|Dieses Widget enthält Musterdaten der Kontaktadresse. Das Layout der Adresse richtet sich nach den Einstellungen, die du im Menü *Einrichtung » CRM » Adress-Layout* gespeichert hast. Das bedeutet, das Layout wird im EmailBuilder genauso ausgegeben, wie das Adress-Layout, das du als Standard-Adress-Layout im Menü *Einrichtung » CRM » Adress-Layout* definiert hast.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Wähle aus der Dropdown-Liste den Adresstyp *Rechnungsadresse* oder *Lieferadresse*.

Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (icon:delete[set=material]), um das Widget zu entfernen.

| *Auftragsadresse*
|Dieses Widget enthält Musterdaten der Auftragsadresse. Das Layout der Adresse richtet sich nach den Einstellungen, die du im Menü *Einrichtung » CRM » Adress-Layout* gespeichert hast. Das bedeutet, das Layout wird im EmailBuilder genauso ausgegeben, wie das Adress-Layout, das du als Standard-Adress-Layout im Menü *Einrichtung » CRM » Adress-Layout* definiert hast.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Wähle aus der Dropdown-Liste den Adresstyp *Rechnungsadresse* oder *Lieferadresse*.

Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (icon:delete[set=material]), um das Widget zu entfernen.

| *Auftragspositionen*
|Dieses Widget enthält bereits ein vordefiniertes Layout für die Auftragspositionen mit Musterdaten. Die Musterdaten werden dann in der E-Mail durch die korrekten Werte ausgegeben. <<#image-emailbuilder-widget-order-items>> zeigt das Standard-Widget mit den weiteren Einstellungsmöglichkeiten. 

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du aus den Dropdown-Listen wählen, welche Inhalte angezeigt werden sollen. Mit einem Klick auf *Neuen Eintrag hinzufügen* (icon:plus-square[role="green"]) in den Einstellungen kannst du weitere Spalten hinzufügen. Mit einem Klick auf *Eintrag entfernen* (icon:minus-square[role="red"]) löschst du die Spalten aus der Übersicht.

| *Artikelliste*
|In diesem Widget kannst du Text eingeben und Variablen verwenden. Beachte, dass in diesem Widget nur die Variablen aus der Unterkategorie <<#variablen-auftrag-auftragspositionen, Auftrag / Auftragspositionen>> verwendet werden können.

Mit einem Klick auf icon:edit[set=material] öffnet sich auf der linken Seite die Liste mit den Variablen. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (icon:chevron_right[set=material]). Klicke auf die Variable, die du einfügen möchtest. Gib ggf. zusätzlich Text in das Widget ein.

Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du das Widget mit einem Klick auf *Widget löschen* (icon:delete[set=material]) entfernen. Weitere Einstellungen können hier nicht vorgenommen werden. Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen.

| *Bild*
| In diesem Widget kannst du Bilder wie z.B. dein Firmenlogo hochladen, um dieses in deinen E-Mail-Vorlagen anzuziegen. Mit einem Klick auf icon:settings[set=material] öffnen sich die Einstellungen. Hier kannst du die Breite und die Höhe des Bildes anpassen, das Bild hochladen, einen alternativen Text eingeben sowie das Styling im CSS-Format anpassen. 

Klicke auf *Einstellungen schließen* (icon:times[]), um die Einstellungen zu schließen. Klicke auf *Widget löschen* (icon:delete[set=material]), um das Widget zu entfernen.

|====

Gehe wie im Folgenden beschrieben vor, um ein Widget in der Vorlage einzufügen.

[.instruction]
Widget in Vorlage einfügen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Bearbeiten* (icon:edit[set=material]). +
→ Der Editor öffnet sich und die Widgets werden geladen.
. Klicke auf das Widget auf der linken Seite, das du einbinden möchtest, und ziehe es via Drag-and-drop in den schraffierten Bereich.
. Klicke auf icon:edit[set=material] bzw. auf icon:settings[set=material] und nimm die Einstellungen vor.
. *Speichere* (icon:save[set=material]) die Einstellungen.

[#widget-vorschau-anzeigen]
[discrete]
==== Vorschau des Widgets anzeigen

Prüfe den das Widget, indem du die Vorschau öffnest.

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, von der du eine Vorschau anzeigen möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Vorschau* (icon:preview[set=material]).
. Wähle *Vorschau HTML* oder *Vorschau reiner Text*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet.
. Prüfe das Widget.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, <<#widget-bearbeiten, bearbeite das Widget>>.

[#widget-bearbeiten]
=== Widget bearbeiten

Du kannst die Inhalte der Widgets jederzeit bearbeiten. Gehe dazu wie im Folgenden beschrieben vor.

[.instruction]
Widget bearbeiten:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Bearbeiten* (icon:edit[set=material]). +
→ Der Editor öffnet sich und die Widgets werden geladen.
. Klicke auf icon:settings[set=material]. +
→ Die Widget-Einstellungen werden – sofern vorhanden – geöffnet.
. Klicke auf icon:edit[set=material] – sofern vorhanden. +
→ Auf der linken Seite öffnen sich die Variablen.
. Nutze die Suchfunktion, um nach einzelnen Variablen zu suchen oder finde die passenden Variablen, indem du die einzelnen Bereiche aufklappst (icon:chevron_right[set=material]).
. Klicke auf die Variable, die du in dem Widget anzeigen möchtest. +
→ Die Variable wird in das Widget übernommen.
. *Speichere* die Einstellungen.

[#standardvorlagen-verwenden]
=== Standardvorlagen verwenden

Bevor du einen <<#ordner-erstellen, neuen Ordner erstellt>> hast, sind dir bestimmt die beiden bereits vorhandenen Ordner *Standardvorlagen* und *Default templates* aufgefallen? Diese Ordner enthalten vordefinierte Vorlagen in deutscher und englischer Sprache. Du kannst die Vorlagen, so wie sie sind, verwenden oder die Inhalte nach deinen Wünschen anpassen.

In einer Standardvorlage sind neben dem Inhalt der E-Mail bereits der Name der Vorlage sowie der Betreff ausgefüllt. Das bedeutet, du musst nur noch Header und Footer wählen und die Felder *Antwort an* und ggf. *CC* und *BCC* befüllen.

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit im Editor bearbeitest, kannst du über die Navigation zwischen den einzelnen Vorlagen hin- und herwechseln. Mit einem Klick auf *Konfiguration* gelangst du wieder in den Ordnerbaum. Dort ist dann automatisch die Vorlage geöffnet, die du zuletzt geöffnet hattest.
====

[[image-emailbuilder-example-default-template]]
.Beispiel: Standardvorlage *Auftrag: Versandbestätigung*
image::crm/assets/emailbuilder-example-default-template.png[width=640, height=360]


Möchtest du wissen, welche Standardvorlagen bereits im EmailBuilder vorhanden sind und wie deren Betreff lautet? Dann klappe den folgenden Bereich mit einem Klick auf icon:expand_more[set=material] einfach auf.

[#standarvorlagen-name-und-betreff]
[.collapseBox]
.Standardvorlagen im EmailBuilder und deren Betreff
--

*Deutsche Standardvorlagen im EmailBuilder und deren Betreff*

[[table-default-templates-german]]
.Deutsche Standardvorlagen im EmailBuilder und deren Betreff
[cols="2,2"]
|====
|Deutsche Vorlage |Betreff

|Auftrag: Änderung
|Auftragsänderung Ihrer Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Auftrag: Teilzahlung erhalten
|Teilzahlung für Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; erhalten

|Auftrag: Versandbestätigung
|Versandbestätigung für Ihre Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Auftrag: Zahlungseingang vollständig
|Zahlung für Auftrag &#123;&#8288;&#123;order.id&#125;&#8288;&#125; vollständig erhalten

|eBay: Disput / Storno, keine Zahlung
|Ihre Bestellung mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; wurde storniert

|eBay: Eingangsbestätigung Bestellung
|eBay-Auktion gewonnen: Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|eBay: Eingangsbestätigung mit Bankdaten ohne Checkout
|Eingangsbestätigung zum eBay-Auftrag mit der ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Shop: Neues Passwort
|Ihre angeforderten Zugangsdaten zu unserem Webshop

|Shop: Newsletter-Anmeldung
|Bestätigung zur Newsletter-Anmeldung

|Shop: Eingangsbestätigung Bestellung
|Auftragsbestätigung für Auftrags-ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|====

*Englische Standardvorlagen im EmailBuilder und deren Betreff*

[[table-default-templates-english]]
.Englische Standardvorlagen im EmailBuilder und deren Betreff
[cols="2,2"]
|====
|Englische Vorlage |Betreff

|Order: Changes
|Change to your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Order: Partial payment received
|Partial payment for order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; received

|Order: Shipping confirmation
|Shipping confirmation for your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Order: Payment complete
|Payment for order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; fully received

|eBay: dispute / cancellation, no payment
|Your order with the ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125; was cancelled

|eBay: Order confirmation
|eBay auction won: Order ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|eBay: Order confirmation with bank details without checkout
|Order confirmation for your eBay order with the ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|Shop: New password
|Your requested login details for our online shop

|Shop: Newsletter registration
|Confirmation of newsletter registration

|Shop: Order confirmation
|Order confirmation for your order with ID &#123;&#8288;&#123;order.id&#125;&#8288;&#125;

|====

--

[#vorlage-vorschau-anzeigen]
=== Vorschau der Vorlage anzeigen

Prüfe die E-Mail-Vorlage, indem du die Vorschau öffnest.

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, von der du eine Vorschau anzeigen möchtest.
. Klicke auf die Vorlage.
. Klicke auf *Vorschau* (icon:preview[set=material]).
. Wähle *Vorschau HTML* oder *Vorschau reiner Text*. +
→ Die Vorschau wird in einem separaten Fenster geöffnet.
. Prüfe die Vorlage.
. *Schließe* das Fenster.

Wenn du mit dem Ergebnis nicht zufrieden bist, <<#vorlage-bearbeiten, bearbeite>> den Inhalt deiner Vorlage.

[#vorlage-suchen]
=== Vorlage suchen

Die folgende Handlungsanweisung beschreibt, wie du im Allgemeinen nach Vorlagen suchst. Die Vorgehensweise ist demnach identisch für die Suche nach allen Vorlagen, so z.B. auch für die Suche nach deinen Vorlagen, die du für Header und Footer erstellt hast.

[.instruction]
Vorlage suchen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Wähle die Sprache und/oder den Mandanten aus den Dropdown-Listen. +
→ Die Vorlagen, die den eingestellten Suchkriterien entsprechen, werden angezeigt.
. Klicke auf die Vorlage, um diese zu öffnen.

[#vorlage-bearbeiten]
=== Vorlage bearbeiten

Die folgende Handlungsanleitung beschreibt, wie du allgemein Vorlagen bearbeitest. Die Vorgehensweise ist demnach identisch für das Bearbeiten aller Vorlagen, so z.B. auch für das Bearbeiten von deinen Vorlagen, die du für Header und Footer erstellt hast.

[TIP]
.Zwischen mehreren Vorlagen hin- und herwechseln
====
Wenn du später mehrere Vorlagen zur selben Zeit im Editor bearbeitest, kannst du über die Navigation zwischen den einzelnen Vorlagen hin- und herwechseln. Mit einem Klick auf *Konfiguration* gelangst du wieder in den Ordnerbaum. Dort ist dann automatisch die Vorlage geöffnet, die du zuletzt geöffnet hattest.
====

[.instruction]
Vorlage bearbeiten:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, die du bearbeiten möchtest.
. Klicke auf die Vorlage.
. Nimm die Änderungen vor. Beachte dazu auch die Erläuterungen in <<#table-emailbuilder-create-template>>.
. *Speichere* (icon:save[set=material]) die Einstellungen.

[#vorlage-loeschen]
=== Vorlage löschen

Gehe wie im Folgenden beschrieben vor, um Vorlagen zu löschen. Nur die zusammengesetzte Vorlage wird gelöscht, aber _nicht_ die darin enthaltenen Komponenten wie der Header und der Footer.

[.instruction]
Vorlage löschen:

. Öffne das Menü *CRM » EmailBuilder (Testphase)*.
. Klappe den Ordner auf (icon:chevron_right[set=material]), der die Vorlage enthält, die du löschen möchtest.
. Klicke in der Zeile der Vorlage, die du löschen möchtest, auf icon:more_vert[set=material]. +
→ Ein Fenster wird geöffnet.
. Klicke auf *Löschen*. +
→ Ein Fenster mit einer Sicherheitsabfrage wird geöffnet.
. Klicke auf *Löschen*. +
→ Die Vorlage wird gelöscht.

[#variablen-emailbuilder]
== Verfügbare Variablen und twig expressions für das Code-Widget und den Betreff

Erfahre in den folgenden Unterkapiteln, welche Variablen dir zur Verfügung stehen und wie die twig expressions lauten, die du im Code-Widget und im Betreff der Vorlage einfügen kannst.

[#verfuegbare-variablen]
[discrete]
=== Verfügbare Variablen

Die verfügbaren Variablen für den EmailBuilder sind in verschiedene Kategorien bzw. Unterkategorien gruppiert:

* Auftrag

** Auftragsvariablen allgemein
** Lieferadresse
** Rechnungsadresse
** Auftragspositionen (nur für Artikellisten-Widget)
** Versand

* Kontakt

** Kontaktvariablen allgemein
** Lieferadresse
** Rechnungsadresse
** Optionen

* Global

* Newsletter

Möchtest du wissen, welche Variablen für die einzelnen Kategorien und Unterkategorien zur Verfügung stehen und wie die twig expressions lauten, die du im Code-Widget und im Betreff einer Vorlage verwenden kannst? Dann klappe weiter unten die jeweiligen Bereiche mit einem Klick auf icon:expand_more[set=material] einfach auf.

[#twig-einleitung]
[discrete]
=== Twig expressions für das Code-Widget und den Betreff

In den folgenden aufklappbaren Bereichen findest du neben den Variablen auch die twig expressions, die du im Code-Widget und im Betreff einer Vorlage verwenden kannst.

[#twig-betreff]
[discrete]
==== Twig expression im Betreff

Wenn du eine twig expression im Betreff der Vorlage verwenden möchtest, muss diese von doppelt geschweiften Klammern umgeben sein.

*_Beispiel:_* Wenn du im Betreff deiner Vorlage den Versanddienstleister anzeigen möchtest, öffnest du den aufklappbaren Bereich *Auftrag / Versand*, suchst nach der Variable *Versanddienstleister* und setzt dann die entsprechende twig expression wie folgt in den Betreff deiner Vorlage ein:  `&#123;&#8288;&#123;order.formattedShipping.providerName&#125;&#8288;&#125;`.

[#twig-code-widget]
[discrete]
==== Twig expression im Code-Widget

Wenn du im Code-Widget beispielsweise mit link:https://twig.symfony.com/doc/3.x/tags/if.html[if-Abfragen^]{nbsp}icon:external-link[] arbeitest, benötigst du in der if-Abfrage selbst keine doppelt geschweiften Klammern zusätzlich, sondern nur im Fließtext. Allgemeine Informationen zu Twig findest du in der link:https://twig.symfony.com/doc/3.x/[Twig Documentation^]{nbsp}icon:external-link[].

Im Kapitel <<#code-beispiele-code-widget, Code-Beispiele für das Code-Wigdet>> findest du einige if-Abfragen, die du einfach in dein Code-Widget kopieren kannst.

Möchtest du wissen, welche Variablen für die einzelnen Kategorien und Unterkategorien zur Verfügung stehen und wie die twig expressions lauten, die du im Code-Widget verwenden kannst? Dann klappe jeweils die folgenden Bereiche mit einem Klick auf icon:expand_more[set=material] einfach auf.


[#variablen-auftrag]
[.collapseBox]
.Variablen in der Kategorie *Auftrag*
--

[cols="2,4,3"]
|====
|Name der Variable |Erläuterung |Twig expression

| `Auftrags-ID`
|
| `order.id`

| `ID des Hauptauftrags`
|ID des obersten Vorgängerauftrags. Dies ist in der Regel ein normaler Auftrag. +
*_Beispiel:_* Bei einer Gutschrift G1 aus einer Retoure R1 aus einem Auftrag A1 gibt die Variable `ID des Elternauftrags` die ID von R1 und `ID des Hauptauftrags` die ID von A1 aus.
| `order.formattedOriginOrder.originOrderId`

| `ID des Elternauftrags`
|ID des direkten Vorgängerauftrags +
*_Beispiel:_* Bei einer Gutschrift kann es die ID der Retoure oder des Auftrags sein, aus dem die Gutschrift erzeugt wurde.
| `order.parent_order_id`

| `Status`
|Name des Auftragsstatus wie im Menü *Einrichtung » Aufträge » Status* gespeichert.
| `order.statusName`

| `Status-ID`
|ID des Auftragsstatus wie im Menü *Einrichtung » Aufträge » Status* gespeichert.
| `order.statusId`

| `Markierung`
|Markierung, die im Auftrag gewählt wurde.
| `order.formattedProperties.flag`


| `Kundenzeichen`
|
| `order.formattedProperties.customerSign`


| `Externe Auftrags-ID`
|
| `order.formattedProperties.externalOrderId`


| `Währungscode`
|Währungscode, z.B. *EUR* oder *USD*.
| `order.formattedSubtotals.currencyCode`


| `Währungszeichen`
|Währungssymbol, z.B. *€* oder *$*.
| `order.formattedSubtotals.currencySymbol`


| `Rechnungsadresse USt-IdNr.`
|Umsatzsteuer-Identifikationsnummer aus der Rechnungsadresse, wie im Auftrag gespeichert.
| `order.formattedAddresses.invoiceAddress.formattedOptions.VATNumber`


| `Lieferadresse USt-IdNr.`
|Umsatzsteuer-Identifikationsnummer aus der Lieferadresse, wie im Auftrag gespeichert.
| `order.formattedAddresses.deliveryAddress.formattedOptions.VATNumber`


| `Wert der Artikel`
|
| `order.formattedGeneral.valueOfItems`


| `Gesamtrechnungsbetrag`
|*_Beispiel:_* 1.234,00
| `order.formattedGeneral.invoiceTotal \| number_format(2, ',', '.')`


| `Gesamtrechnungsbetrag, durch Punkt getrennt`
|*_Beispiel:_* 1234.00
| `order.formattedGeneral.invoiceTotal \| number_format(2, '.', '')`


| `Gesamtrechnungsbetrag netto`
|
| `order.formattedGeneral.invoiceTotalNet`


| `Gesamtbetrag der Mehrwertsteuer`
|
| `order.formattedGeneral.totalVat`


| `Gesamtbetrag des Auftrags netto`
|
| `order.formattedGeneral.totalNet`


| `Datum und Uhrzeit des Auftragseingangs`
|
| `order.formattedDates.createdOn`


| `Datum des Zahlungseingangs`
|Datum und Uhrzeit des Zahlungseingangs wie im Auftrag gespeichert.
| `order.formattedDates.paidOn`

| `Zahlungsart`
|Name der Zahlungsart wie im Menü *Einrichtung » Aufträge » Zahlung » Zahlungsarten* gespeichert.
| `order.formattedGeneral.methodOfPaymentName`


| `Zahlungsart-ID`
|Die ID wird vom System vergeben. Die IDs sind im Menü *Einrichtung » Aufträge » Zahlung » Zahlungsarten* aufgeführt.
| `order.formattedProperties.paymentMethod`

| `Herkunft`
|Name der Auftragsherkunft wie im Menü *Einrichtung » Aufträge » Auftragsherkunft* gespeichert.
| `order.formattedReferrer.name`

| `Herkunfts-ID`
|ID der Auftragsherkunft wie im Menü *Einrichtung » Aufträge » Auftragsherkunft* gespeichert.
| `order.formattedReferrer.id`

| `Bezahlter Betrag`
|
| `order.formattedGeneral.paidAmount`


| `Offener Betrag`
|
| `order.formattedGeneral.openAmount`


| `Überbezahlter Betrag`
|
| `order.formattedGeneral.overpaidAmount`


| `Auftrag Lager-ID`
|
| `order.formattedProperties.warehouse`


| `Plenty ID`
|Die ID wird vom System vergeben und kann nicht geändert werden. Du findest die ID im Menü *Einrichtung » Mandant » [Mandant wählen] » Einstellungen*.
| `order.plentyId`


| `Verkäuferkonto`
|
| `order.formattedProperties.sellerAccount`


| `eBay-Zahlungs-ID`
|
| `order.formattedProperties.ebayUniquePaymentID`


| `Barcode-ID`
|
| `order.formattedGeneral.barcodeOrderID`


| `Kundenwunsch`
|Kund:innen können bei der Bestellung über den Webshop einen Wunsch angeben. Dieser Wunsch wird als Auftragsnotiz in den Auftragsdaten gespeichert.
| `order.formattedComments.customerSpecialWishes`


| `Auftragstyp`
|Typ des Auftrags, z.B. Lieferauftrag, Retoure, Gutschrift oder Reparatur.
| `order.typeId`


| `Auftrag im Webshop aufrufen`
|Öffnet die URL des Auftrags in deinem Webshop.
| `order.access_key`


| `Nachbestellungs-ID`
|
| `order.formattedReorder.id`


| `Gutscheinwert`
|
| `order.formattedGeneral.couponValue`


| `Rechnungsnummer-ID`
|
| `order.formattedDocuments.invoice`


| `DHL Retoure Online QR-Code`
|Sendet deinen Kund:innen einen QR-Code für DHL Retoure Online. Wenn deine Kund:innen einen Artikel zurücksenden möchten, müssen sie dem Personal in der Postfiliale vor Ort den QR-Code auf ihrem Smartphone vorzeigen und diese drucken dann das Retourenlabel und bringen es auf dem Paket an. Deine Kund:innen benötigen also keinen Drucker mehr und du musst das Retourenlabel nicht als PDF-Anhang in der E-Mail versenden. +
Der QR-Code wird in der E-Mail an deine Kund:innen als URL ausgegeben. Nach einem Klick auf die URL erscheint dann in einem separaten Fenster der QR-Code.
| `order.formattedGeneral.DHLRetoureOnlineQRCodeURL`

|====

--

[#variablen-auftrag-lieferadresse]
[.collapseBox]
.Variablen in der Unterkategorie *Auftrag / Lieferadresse*
--

[cols="1,3"]
|====
|Name der Variable |Twig expression

| `Lieferadresse Vorname und Nachname`
| `order.formattedAddresses.deliveryAddress.name2 ~ ' ' ~ order.formattedAddresses.deliveryAddress.name3`


| `Lieferadresse Adresszusatz`
| `order.formattedAddresses.deliveryAddress.address3`


| `Lieferadresse Vorname`
| `order.formattedAddresses.deliveryAddress.name2`


| `Lieferadresse Nachname`
| `order.formattedAddresses.deliveryAddress.name3`


| `Lieferadresse Firmenname`
| `order.formattedAddresses.deliveryAddress.name1`


| `Lieferadresse Kontaktperson`
| `order.formattedAddresses.deliveryAddress.formattedOptions.contactPerson`


| `Lieferadresse Telefon`
| `order.formattedAddresses.deliveryAddress.formattedOptions.telephone`


| `Lieferadresse Straße`
| `order.formattedAddresses.deliveryAddress.address1`


| `Lieferadresse Postleitzahl und Ort`
| `order.formattedAddresses.deliveryAddress.postalCode ~ ' ' ~ order.formattedAddresses.deliveryAddress.town`


| `Lieferadresse Ort`
| `order.formattedAddresses.deliveryAddress.town`


| `Lieferadresse Postleitzahl`
| `order.formattedAddresses.deliveryAddress.postalCode`


| `Lieferadresse Land`
| `order.formattedAddresses.deliveryAddress.country.name`


| `Lieferadresse Länder-ID`
| `order.formattedAddresses.deliveryAddress.country.id`


| `Lieferadresse Länder-ISO-Code 2`
| `order.formattedAddresses.deliveryAddress.country.isoCode2`


| `Lieferadresse Länder-ISO-Code 3`
| `order.formattedAddresses.deliveryAddress.country.isoCode3`


| `Lieferadresse Bundesland`
| `order.formattedAddresses.deliveryAddress.state.name`

|====

--




[#variablen-auftrag-rechnungsadresse]
[.collapseBox]
.Variablen in der Unterkategorie *Auftrag / Rechnungsadresse*
--

[cols="1,3"]
|====
|Name der Variable |Twig expression

| `Rechnungsadresse Vorname und Nachname`
| `order.formattedAddresses.invoiceAddress.name2 ~ ' ' ~ order.formattedAddresses.invoiceAddress.name3`


| `Rechnungsadresse Adresszusatz`
| `order.formattedAddresses.invoiceAddress.address3`


| `Rechnungsadresse Vorname`
| `order.formattedAddresses.invoiceAddress.name2`


| `Rechnungsadresse Nachname`
| `order.formattedAddresses.invoiceAddress.name3`


| `Rechnungsadresse Firmenname`
| `order.formattedAddresses.invoiceAddress.name1`


| `Rechnungsadresse Kontaktperson`
| `order.formattedAddresses.invoiceAddress.formattedOptions.contactPerson`


| `Rechnungsadresse Telefon`
| `order.formattedAddresses.invoiceAddress.formattedOptions.telephone`


| `Rechnungsadresse Straße`
| `order.formattedAddresses.invoiceAddress.address1`


| `Rechnungsadresse Postleitzahl und Ort`
| `order.formattedAddresses.invoiceAddress.postalCode ~ ' ' ~ order.formattedAddresses.invoiceAddress.town`


| `Rechnungsadresse Ort`
| `order.formattedAddresses.invoiceAddress.town`


| `Rechnungsadresse Postleitzahl`
| `order.formattedAddresses.invoiceAddress.postalCode`


| `Rechnungsadresse Land`
| `order.formattedAddresses.invoiceAddress.country.name`


| `Rechnungsadresse Länder-ID`
| `order.formattedAddresses.invoiceAddress.country.id`


| `Rechnungsadresse Länder-ISO-Code 2`
| `order.formattedAddresses.invoiceAddress.country.isoCode2`


| `Rechnungsadresse Länder-ISO-Code 3`
| `order.formattedAddresses.invoiceAddress.country.isoCode3`


| `Rechnungsadresse Bundesland`
| `order.formattedAddresses.invoiceAddress.state.name`

|====

--



[#variablen-auftrag-auftragspositionen]
[.collapseBox]
.Variablen in der Unterkategorie *Auftrag / Auftragspositionen*
--

[cols="2,4,3"]
|====
|Name der Variable |Erläuterung |Twig expression

| `Artikel-ID`
|
| `orderItem.variation.itemId`


| `Artikeleigenschaften`
|
| `orderItem.formattedProperties.all`


| `Artikelnummer`
|
| `orderItem.variation.item.ArtNo`


| `Status-ID des retournierten Artikels`
|
| `orderItem.formattedReturn.statusId`


| `Name des retournierten Artikels`
|
| `orderItem.formattedReturn.statusLabel`


| `Variantennummer`
|
| `orderItem.variation.number`


| `Artikelname`
|
| `orderItem.orderItemName`


| `Artikelmenge`
|
| `orderItem.quantity`


| `Bruttopreis`
|
| `orderItem.formattedAmounts.grossPrice`


| `Nettopreis`
|
| `orderItem.formattedAmounts.netPrice`


| `Mehrwertsteuersatz`
|
| `orderItem.vatRate`


| `Herkunft`
|
| `orderItem.formattedReferrer.referrerName`


| `Externe Artikel-ID`
|
| `orderItem.variation.item.external_article_id`


| `Externe Varianten-ID`
|
| `orderItem.variation.externalId`


| `Externe Token-ID`
|
| `orderItem.formattedExternalTokenId`


| `Inhalt`
|
| `orderItem.formattedUnit.unitContent`


| `Einheit`
|
| `orderItem.formattedUnit.unitName`


| `Variantenname`
|
| `orderItem.variation.name`


| `Varianten-ID`
|
| `orderItem.variation.id`


| `Attributwerte`
|
| `orderItem.attributeValues`

| `Modell`
|Modellbezeichnung des Artikels
| `orderItem.variation.model`

| `GTIN`
|Global Trade Item Number (GTIN) des Artikels
| `orderItem.formattedBarcodes.GTIN`

| `ISBN`
|ISBN-Code des Artikels
| `orderItem.formattedBarcodes.ISBN`

| `ASIN`
|Amazon Standard Ident Number (ASIN) des Artikels
| `orderItem.formattedBarcodes.ASIN`

| `Verfügbarkeitstext`
|Name der Artikelverfügbarkeit des Nettowarenbestands
| `orderItem.formattedAvailability.availabilityName`

| `Verfügbarkeits-ID`
|ID der Artikelverfügbarket des Netttowarenbestands
| `orderItem.formattedAvailability.availabilityId`

| `Verfügbarkeitstext physischer Warenbestand`
|Name der Artikelverfügbarkeit des physischen Warenbestands
| `orderItem.formattedAvailability.availabilityPhysicalStockName`

| `Verfügbarkeits-ID physischer Warenbestand`
|ID der Artikelverfügbarkeit des physischen Warenbestands
| `orderItem.formattedAvailability.availabilityPhysicalStockId`

| `Freitextfeld 1`
|Freitextfelder für die Artikel wie im Menü *Einrichtung » Artikel » Freitextfelder* gespeichert. +
*_Beispiel:_* `Freitextfeld 3` gibt den Text aus, der unter *Feld 3* gespeichert ist.
| `orderItem.variation.item.free1`


| `Freitextfeld 2`
|
| `orderItem.variation.item.free2`


| `Freitextfeld 3`
|
| `orderItem.variation.item.free3`


| `Freitextfeld 4`
|
| `orderItem.variation.item.free4`


| `Freitextfeld 5`
|
| `orderItem.variation.item.free5`


| `Freitextfeld 6`
|
| `orderItem.variation.item.free6`


| `Freitextfeld 7`
|
| `orderItem.variation.item.free7`


| `Freitextfeld 8`
|
| `orderItem.variation.item.free8`


| `Freitextfeld 9`
|
| `orderItem.variation.item.free9`


| `Freitextfeld 10`
|
| `orderItem.variation.item.free10`


| `Freitextfeld 11`
|
| `orderItem.variation.item.free11`

| `Freitextfeld 12`
|
| `orderItem.variation.item.free12`


| `Freitextfeld 13`
|
| `orderItem.variation.item.free13`


| `Freitextfeld 14`
|
| `orderItem.variation.item.free14`


| `Freitextfeld 15`
|
| `orderItem.variation.item.free15`


| `Freitextfeld 16`
|
| `orderItem.variation.item.free16`


| `Freitextfeld 17`
|
| `orderItem.variation.item.free17`


| `Freitextfeld 18`
|
| `orderItem.variation.item.free18`


| `Freitextfeld 19`
|
| `orderItem.variation.item.free19`


| `Freitextfeld 20`
|
| `orderItem.variation.item.free20`


| `URL zum Variantenbild`
|Gibt die URL zum Variantenbild aus.
| `orderItem.formattedImageUrl`


| `Herstellername`
|
| `orderItem.variation.item.producer`


| `Lager-ID`
|
| `orderItem.warehouseId`


| `Retourenkommentar`
|
| `orderItem.formattedReturn.comment`


| `Wert der Retoure in Prozent`
|
| `orderItem.formattedReturn.percentage`


| `ID des Retourengrunds`
|ID des Retourengrund wie im Menü *Einrichtung » Aufträge » Auftragstypen » Retoure* gespeichert.
| `orderItem.formattedReturn.reasonId`


| `Retourengrund`
|Name des Retourengrund wie im Menü *Einrichtung » Aufträge » Auftragstypen » Retoure* gespeichert.
| `orderItem.formattedReturn.reasonLabel`


| `Codes eines Gutscheins`
|
| `orderItem.formattedVoucherCodes`


| `Zolltarifnummer`
|
| `orderItem.variation.customsTariffNumber`


| `Erscheinungsdatum`
|
| `orderItem.variation.releasedAt`


| `Gesamtpreis (Einzelpreis x Menge)`
|
| `orderItem.formattedAmounts.totalPrice`


| `Rabatt pro Auftragsposition`
|
| `orderItem.formattedAmounts.discount`


| `URL zum Artikel`
|Gibt die URL zum Artikel im Webshop aus.
| `orderItem.formattedLink`

|====

--





[#variablen-auftrag-versand]
[.collapseBox]
.Variablen in der Unterkategorie *Auftrag / Versand*
--

[cols="2,4,3"]
|====
|Name der Variable |Erläuterung |Twig expression

| `Mögliches Lieferdatum`
|
| `order.formattedDates.earliestDeliveryDate`


| `Voraussichtliches Versanddatum`
|
| `order.formattedDates.estimatedShippingDate`


| `Datum des Retoureneingangs`
|
| `order.formattedDates.returnDate`


| `Voraussichtliches Lieferdatum`
|
| `order.formattedDates.estimatedDeliveryDate`


| `Retourenpaketnummer`
|
| `order.returns_code`


| `Versandkosten gesamt`
|
| `order.formattedGeneral.shippingCosts`

| `Paketnummernliste`
|Paketnummern bzw. Tracking-Nummern werden nach erfolgreicher Auftragsanmeldung beim Versanddienstleister im Auftrag im Tab *Einstellungen* gespeichert.
| `order.formattedShipping.packageNumberList`

| `Tracking-URL`
|Dient zur Sendungsverfolgung. Die URL wird im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister* gespeichert.
| `order.formattedShipping.trackingURL`

| `Versanddienstleister`
|Name des Versanddienstleisters wie im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister* gespeichert.
| `order.formattedShipping.providerName`

| `Versanddienstleister-ID`
|Wird automatisch vom System vergeben. Die ID des Versanddienstleisters findest du im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versanddienstleister*.
| `order.formattedShipping.providerId`

| `Versandprofil`
| Name des Versandprofils wie im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versandprofile* gespeichert.
| `order.formattedShipping.profileName`

| `Versandprofil-ID`
|Wird automatisch vom System vergeben. Die ID des Versandprofils findest du im Menü *Einrichtung » Aufträge » Versand » Optionen* im Tab *Versandprofile*.
| `order.formattedShipping.profileId`


| `Lieferschein-ID`
|
| `order.formattedDocuments.deliveryNote`


| `Nachbestellung Lieferdatum`
|
| `order.formattedReorder.estimatedDeliveryDate`


|====

--



[#variablen-kontakt]
[.collapseBox]
.Variablen in der Kategorie *Kontakt*
--



[cols="2,4,3"]
|====
|Name der Variable |Erläuterung |Twig expression

| `Kontakt-ID`
|
| `contact.id`


| `Vorname`
|
| `contact.firstName`


| `Nachname`
|
| `contact.lastName`


| `Vollständiger Name`
|
| `contact.fullName`



| `Geschlecht`
|Anzeige, wenn männlich: *male* +
Anzeige, wenn weiblich: *female* +
Anzeige, wenn divers: leere Option
| `contact.gender is same as ('diverse') ? '' : contact.gender`


| `Anrede`
|
| `contact.formattedSalutation.label`


| `Anrede geschäftlich`
|
| `contact.formattedOptions.salutationWork`


| `Anrede privat`
|
| `contact.formattedOptions.salutationPrivate`


| `Firmenname`
|
| `contact.formattedAccounts.companyName`


| `Sprache`
|Sprache wie im Kontaktdatensatz gespeichert. Wenn du eine E-Mail-Vorlage in der gewählten Sprache erstellt hast, werden E-Mail-Vorlagen in dieser Sprache an den Kontakt versendet.
| `contact.lang`


| `Klasse`
| Klasse, der der Kontakt zugeordnet ist. Klassen erstellst du im Menü *Einrichtung » CRM » Kundenklassen*.
| `contact.formattedClass.name`


| `Nummer`
|Zusätzliche Nummer für den Kontakt
| `contact.number`


| `Titel`
|
| `contact.title`


| `Vorname und Nachname des Systembenutzers`
|Vorname und Nachname des Systembenutzers, der als Eigner am Kontaktdatensatz gespeichert ist.
| `contact.formattedUser.realName`


| `Signatur des Systembenutzers`
|Signatur des Systembenutzers, der als Eigner am Kontaktdatensatz gespeichert ist, im Textformat.
| `contact.formattedUser.signatureNoHtml`


| `Signatur des Systembenutzers im HTML-Format`
|Signatur des Systembenutzers, der als Eigner im Kontaktdatensatz gespeichert ist, im HTML-Format.
| `contact.formattedUser.signatureHtml`


| `Kontoinhaber (Kontakt)`
|Kontoinhaber:in wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.accountOwner`


| `Bankname des Kontakts`
|Bankname wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.bankName`


| `IBAN des Kontakts`
|IBAN wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.iban`


| `BIC des Kontakts`
|BIC wie im Kontaktdatensatz gespeichert.
| `contact.formattedBanks.bic`


| `Anzahl der Aufträge`
|
| `contact.formattedOrdersCount`


| `Newsletter-Empfang: Zustimmung durch Kontakt`
|Datum, wann der Kontakt dem Newsletter-Empfang zugestimmt hat. +
Datumsformat in der E-Mail: `mm-tt-jjjj`. +
Im Kontaktdatensatz wird zusätzlich zum Datum im Format `tt-mm-jjjj` der Zeitstempel im Format `00:00:00` gespeichert.
| `contact.newsletterAllowanceAt`

|====

--



[#variablen-kontakt-lieferadresse]
[.collapseBox]
.Variablen in der Unterkategorie *Kontakt / Lieferadresse*
--

[cols="1,3"]
|====
|Name der Variable |Twig expression

| `Lieferadresse Vorname und Nachname`
| `contact.formattedAddresses.deliveryAddress.name2 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.name3`


| `Lieferadresse Adresszusatz`
| `contact.formattedAddresses.deliveryAddress.address3 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.address4`


| `Lieferadresse Vorname`
| `contact.formattedAddresses.deliveryAddress.name2`


| `Lieferadresse Nachname`
| `contact.formattedAddresses.deliveryAddress.name3`


| `Lieferadresse Firmenname`
| `contact.formattedAddresses.deliveryAddress.name1`


| `Lieferadresse Telefon`
| `contact.formattedAddresses.deliveryAddress.formattedOptions.telephone`


| `Lieferadresse Straße`
| `contact.formattedAddresses.deliveryAddress.address1 ~ ' ' ~ contact.formattedAddresses.deliveryAddress.address2`


| `Lieferadresse Postleitzahl und Ort`
| `contact.formattedAddresses.deliveryAddress.postalCode ~ ' ' ~ contact.formattedAddresses.deliveryAddress.town`


| `Lieferadresse Ort`
| `contact.formattedAddresses.deliveryAddress.town`


| `Lieferadresse Postleitzahl`
| `contact.formattedAddresses.deliveryAddress.postalCode`


| `Lieferadresse Land`
| `contact.formattedAddresses.deliveryAddress.country.name`


| `Lieferadresse Länder-ID`
| `contact.formattedAddresses.deliveryAddress.country.id`


| `Lieferadresse Länder-ISO-Code 2`
| `contact.formattedAddresses.deliveryAddress.country.isoCode2`


| `Lieferadresse Länder-ISO-Code 3`
| `contact.formattedAddresses.deliveryAddress.country.isoCode3`


| `Lieferadresse Bundesland`
| `contact.formattedAddresses.deliveryAddress.state.name`

|====

--


[#variablen-kontakt-rechnungsadresse]
[.collapseBox]
.Variablen in der Unterkategorie *Kontakt / Rechnungsadresse*
--

[cols="1,3"]
|====
|Name der Variable |Twig expression

| `Rechnungsadresse Vorname und Nachname`
| `contact.formattedAddresses.invoiceAddress.name2 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.name3`


| `Rechnungsadresse Adresszusatz`
| `contact.formattedAddresses.invoiceAddress.address3 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.address4`


| `Rechnungsadresse Vorname`
| `contact.formattedAddresses.invoiceAddress.name2`


| `Rechnungsadresse Nachname`
| `contact.formattedAddresses.invoiceAddress.name3`


| `Rechnungsadresse Firmenname`
| `contact.formattedAddresses.invoiceAddress.name1`


| `Rechnungsadresse Telefon`
| `contact.formattedAddresses.invoiceAddress.formattedOptions.telephone`


| `Rechnungsadresse Straße`
| `contact.formattedAddresses.invoiceAddress.address1 ~ ' ' ~ contact.formattedAddresses.invoiceAddress.address2`


| `Rechnungsadresse Postleitzahl und Ort`
| `contact.formattedAddresses.invoiceAddress.postalCode ~ ' ' ~ contact.formattedAddresses.invoiceAddress.town`


| `Rechnungsadresse Ort`
| `contact.formattedAddresses.invoiceAddress.town`

| `Rechnungsadresse Postleitzahl`
| `contact.formattedAddresses.invoiceAddress.postalCode`


| `Rechnungsadresse Land`
| `contact.formattedAddresses.invoiceAddress.country.name`


| `Rechnungsadresse Länder-ID`
| `contact.formattedAddresses.invoiceAddress.country.id`


| `Rechnungsadresse Länder-ISO-Code 2`
| `contact.formattedAddresses.invoiceAddress.country.isoCode2`


| `Rechnungsadresse Länder-ISO-Code 3`
| `contact.formattedAddresses.invoiceAddress.country.isoCode3`


| `Rechnungsadresse Bundesland`
| `contact.formattedAddresses.invoiceAddress.state.name`

|====

--




[.collapseBox]
.Variablen in der Unterkategorie *Kontakt / Optionen*
--

[cols="1,3"]
|====
|Name der Variable |Twig expression

| `E-Mail privat`
| `contact.formattedOptions.emailPrivate`

| `Telefon privat`
| `contact.formattedOptions.telephonePrivate`


| `Mobiltelefon privat`
| `contact.formattedOptions.telephoneMobilePrivate`


| `Fax privat`
| `contact.formattedOptions.telefaxPrivate`


| `E-Mail geschäftlich`
| `contact.formattedOptions.emailWork`


| `Telefon geschäftlich`
| `contact.formattedOptions.telephoneWork`


| `Mobiltelefon geschäftlich`
| `contact.formattedOptions.telephoneMobileWork`


| `Fax geschäftlich`
| `contact.formattedOptions.telefaxWork`


| `eBay-Name`
| `contact.formattedOptions.marketplaceEbay`


| `E-Mail PayPal`
| `contact.formattedOptions.emailPayPal`


| `Zusätzlicher Ansprechpartner`
| `contact.formattedOptions.additionalContactPerson`

|====

--






[#variablen-global]
[.collapseBox]
.Variablen in der Kategorie *Global*
--

[cols="2,5,2"]
|====
|Name der Variable |Erläuterung |Twig expression

| `URL zum Checkout`
|Gibt die URL zum Checkout-Bereich des Auftrags im Webshop aus.
| `globals.links.linkCheckout`

| `URL zum Warenkorb`
|Gibt die URL zum Warenkorb im Webshop aus.
| `globals.links.linkBasket`

| `URL zu den Geschäftsbedingungen`
|Gibt die URL zu den AGB aus.
| `globals.links.linkTermsConditions`

| `URL zum Webshop`
|Gibt die URL zum Webshop aus.
| `globals.links.linkWebstore`

| `URL zum neuen Passwort`
|Gibt die URL zu einem Formular zum Erstellen eines neuen Passworts aus. Dort geben Kund:innen ihre E-Mail-Adresse ein.
| `globals.links.linkNewPassword`

| `URL zum Ändern des Passworts`
|Gibt die URL zum Bereich *Passwort ändern* im Webshop aus. Dort können Kund:innen ein neues Passwort eingeben.
| `globals.links.linkChangePassword`

| `URL zum Bestätigen der E-Mail-Adresse`
|Gibt die URL zum Bestätigen der E-Mail-Adressänderung des Kontakts aus.
| `globals.account.newCustomerEmail`

| `Widerrufsrecht im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsrecht* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.cancellationRights.html`

| `Widerrufsrecht im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsrecht* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.cancellationRights.plain`

| `Datenschutzerklärung im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Datenschutzerklärung* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.privacyPolicy.plain`

| `Datenschutzerklärung im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Datenschutzerklärung* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.privacyPolicy.html`

| `Impressum im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Impressum* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.legalDisclosure.plain`

| `Impressum im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Impressum* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.withdrawalForm.html`

| `Widerrufsformular im reinen Textformat`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsformular* und dort im Tab *Text* gespeichert.
| `globals.legalInformation.withdrawalForm.plain`

| `Widerrufsformular im HTML-Format`
|Der Text wird im Menü *Einrichtung » Mandant » [Mandant wählen] » Webshop » Rechtliches » [Sprache aufklappen]* im Tab *Widerrufsformular* und dort im Tab *HTML* gespeichert.
| `globals.legalInformation.withdrawalForm.html`

| `Heutiges Datum`
|Gibt das heutige Datum im Format `tt-mm-jjjj` aus.
| `"now"\|date("d-m-Y")`

| `Bankname (Stammdaten)`
|Bankname aus den Stammdaten deines plentymarkets Systems. Wird im *Basics*-Assistenten im Schritt *Bankdaten* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Assistenten » Grundeinstellungen*. +
Alternativ findest du den gespeicherten Banknamen im Menü *Einrichtung » Einstellungen » Bank*.
| `globals.bank.name`

| `IBAN (Stammdaten)`
|IBAN aus den Stammdaten deines plentymarkets Systems. Wird im *Basics*-Assistenten im Schritt *Bankdaten* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Assistenten » Grundeinstellungen*. +
Alternativ findest du die gespeicherte IBAN im Menü *Einrichtung » Einstellungen » Bank*.
| `globals.bank.iban`

| `BIC (Stammdaten)`
|BIC aus den Stammdaten deines plentymarkets Systems. Wird im *Basics*-Assistenten im Schritt *Bankdaten* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Assistenten » Grundeinstellungen*. +
Alternativ findest du die gespeicherte BIC im Menü *Einrichtung » Einstellungen » Bank*.
| `globals.bank.bic`

| `Kontoinhaber (Stammdaten)`
|Kontoinhaber:in aus den Stammdaten deines plentymarkets Systems. Wird im *Basics*-Assistenten im Schritt *Bankdaten* gespeichert. Du findest den Assistenten im Menü *Einrichtung » Assistenten » Grundeinstellungen*. +
Alternativ findest du den:die Kontoinhaber:in im Menü *Einrichtung » Einstellungen » Bank*.
| `globals.bank.owner`

| `Signatur im reinen Textformat`
|Die Signatur wird im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* im Bereich *Reine Textsignatur* gespeichert.
| `globals.account.signatureText`

| `Signatur im HTML-Format`
|Die Signatur wird im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Signatur* im Bereich *HTML-Signatur* gespeichert.
| `globals.account.signatureHTML`

| `Gutschein-Code (1)`
|Gutschein-Codes werden in der Kampagne im Menü *Aufträge » Gutscheine* generiert. Ein Gutschein-Code kann immer nur jeweils einer Kampagne zugeordnet werden, um diesen Gutschein-Code aus der Kampagne in der E-Mail-Vorlage zu versenden.
| `globals.coupons.couponCode1`


| `Gutschein-Code (2)`
|
| `globals.coupons.couponCode2`


| `Gutschein-Code (3)`
|
| `globals.coupons.couponCode3`


| `Gutschein-Code (4)`
|
| `globals.coupons.couponCode4`


| `Gutschein-Code (5)`
|
| `globals.coupons.couponCode5`


| `Gutschein-Code (6)`
|
| `globals.coupons.couponCode6`


| `Gutschein-Code (7)`
|
| `globals.coupons.couponCode7`


| `Gutschein-Code (8)`
|
| `globals.coupons.couponCode8`


| `Gutschein-Code (9)`
|
| `globals.coupons.couponCode9`


| `Gutschein-Code (10)`
|
| `globals.coupons.couponCode10`


| `EORI-Nummer`
|Eindeutige Identifizierungsnummer, die für Zollzwecke benötigt wird.
| `globals.account.EORINumber`

|====

--


[#variablen-newsletter]
[.collapseBox]
.Variablen in der Kategorie *Newsletter*
--

[cols="2,5,2"]
|====
|Name der Variable |Erläuterung |Twig expression

| `URL zur Bestätigung des Newsletter-Abonnements`
|Gibt die URL zum Bestätigen des Newsletter-Abonnements aus.
| `newsletter.formattedConfirmUrl`

|====

--

[#e-mail-versand-automatisieren]
== E-Mail-Versand automatisieren

Dir stehen in plentymarkets mehrere Möglichkeiten zur Verfügung, den E-Mail-Versand an deine Kund:innen zu automatisieren.

=== Automatischen E-Mail-Versand einrichten

Im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Automatischer Versand* stehen dir verschiedene Ereignisse zur Verfügung, die mit einer Vorlage verknüpft werden können. Wähle aus der Dropdown-Liste die Vorlage, die du zuvor im Menü *CRM » EmailBuilder (Testphase)* <<#vorlage-erstellen, erstellt>> hast. Dadurch wird bei Eintritt des Ereignisses diese Vorlage automatisch an deine Kund:innen versendet.

[IMPORTANT]
.Verknüpfung vor Löschen der E-Mail-Vorlage entfernen
====
Das Löschen einer Vorlage, die mit einem Ereignis im Bereich *Automatischer Versand* verknüpft ist, kann zu unerwünschten Effekten führen. Entferne daher zunächst die Verknüpfung im Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Automatischer Versand*, indem du in der Zeile des Ereignisses in der Dropdown-Liste die Option *Kein Versand* wählen. Anschließend löschst du die Vorlage im Menü *CRM » EmailBuilder (Testphase)*.
====

[.instruction]
Automatischen E-Mail-Versand einrichten:

. Öffne das Menü *Einrichtung » Mandant » [Mandant wählen] » E-Mail » Automatischer Versand*.
. Wähle die in der Zeile des Ereignisses die Vorlage aus der Dropdown-Liste. Beachte dazu die Erläuterungen in <<#table-events-automatic-email-dispatch>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.


[[table-events-automatic-email-dispatch]]
.Erläuterungen zu einigen Ereignissen für den automatischen Versand
[cols="1,3"]
|====
|Einstellung |Erläuterung

| *Neue Bestellung über den Webshop*
|Sendet Kund:innen eine E-Mail mit der Auftragsbestätigung, nachdem der Kaufvorgang im Webshop abgeschlossen wurde. +
*_Hinweis:_* Wenn du möchtest, dass dein:e Kund:in über diese E-Mail in die Auftragsabwicklung in deinem Webshop gelangen kann, um den Status der Bestellung einzusehen, musst du die Variable `URL zum Checkout` in die Vorlage, die du für dieses automatische Ereignis wählst, einfügen.

| *Sende Kunde E-Mail zur Passwortänderung*
|Sendet Kund:innen eine E-Mail mit einem Link zum neuen Passwort, der aktiv bestätigt werden muss. Die Variable `URL zum Ändern des Passworts` muss in der Vorlage enthalten sein.

| *Newsletter Opt-In*
|Sendet Kund:innen eine E-Mail, wenn die Kund:innen sich für den Newsletter angemeldet haben. Die Vorlage sollte den Bestätigungslink, den die Kund:innen anklicken müssen, um die Newsletter-Anmeldung abzuschließen, enthalten: `URL zur Bestätigung des Newsletter-Abonnements`.

| *Bestätigung Newsletter Opt-In*
|Sendet Kund:innen eine E-Mail als Bestätigung, sobald die Kund:innen den Bestätigungslink, der mit der E-Mail-Vorlage für das Ereignis *Newsletter Opt-In* versendet wurde, aktiviert haben.

| *Benachrichtigung bei verfügbarem Artikel*
|Sendet Kund:innen eine E-Mail mit dem Hinweis, dass ein bestimmter Artikel wieder verfügbar ist. Voraussetzung: Die Kund:innen haben zuvor ihre E-Mail-Adresse im Webshop bei dem nicht lieferbaren Artikel eingetragen.

|====

[#ereignisaktionen-einrichten]
=== Ereignisaktionen einrichten

Du hast außerdem die Möglichkeit, Ereignisaktionen im Menü *Einrichtung » Aufträge » Ereignisse* einzurichten. Definiere ein Ereignis, setze einen oder mehrere Filter und lege Aktionen fest, die von deinem plentymarkets System automatisch im Ereignisfall ausgeführt werden.

Richte z.B. ein, dass der E-Mail-Versand eines Gutscheins ausgelöst wird, wenn eine Person eine bestimmte Anzahl an Aufträgen generiert hat. Weitere Informationen findest du auf der Handbuchseite <<automatisierung/ereignisaktionen#, Ereignisaktionen>>.

[#e-mail-versand-an-mehrere-e-mail-adressen]
[discrete]
=== E-Mail-Versand an mehrere E-Mail-Adressen

Im Menü *Einrichtung » Aufträge » Ereignisse* kannst du eine <<automatisierung/ereignisaktionen#, Ereignisaktion>> einrichten, die bei Eintritt des von dir gewählten Ereignisses in deinem plentyShop eine E-Mail an deine Kund:innen und Mitarbeiter:innen versendet.

Füge in der Ereignisaktion die Aktion *Kunde > E-Mail versenden* hinzu und wähle dann dort die passende Vorlage sowie die Empfänger:innen, um die E-Mail bei Eintritt des gewählten Ereignisses zeitgleich an mehrere Empfänger:innen zu versenden.

Die folgenden Empfänger:innen stehen zur Verfügung:

* Kunde
* Lager
* Rechnungsadresse aus Auftrag 
* Lieferadresse aus Auftrag 
* Kontakt E-Mail geschäftlich 
* Kontakt E-Mail privat 
* Kontakt E-Mail PayPal
* verfügbare Eigner

Du kannst entweder die selbe Vorlage an alle Empfänger:innen senden oder jeweils eine separate Vorlage wählen.


[#code-beispiele-code-widget]
== Code-Beispiele für das Code-Wigdet

Setze in deinen E-Mail-Vorlagen Fallunterscheidungen nach den Prinzipien der if-Abfragen ein. Im Folgenden findest du einige if-Abfragen, die du einfach in dein Code-Widget kopieren kannst.

[#code-beispiel-versandprofil]
=== Code-Beispiel: Versandprofil

Füge einen Code ein, der bewirkt, dass ein Hinweis bezüglich der Spedition und Kontaktaufnahme in der E-Mail an deine Kund:innen nur angezeigt wird, wenn der Versanddienstleister im Versandprofil eine Spedition ist. In unserem Beispiel hat das Versandprofil mit der Spedition die ID `6`.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/manual/master/de/crm/assets/emailbuilder-code-beispiel-versandprofil.txt[unter diesem Link^]{nbsp}icon:external-link[].


//// 
[source,plenty]
----
include::assets/emailbuilder-code-beispiel-versandprofil.txt[]

----
////

[#code-beispiel-bankdaten]
=== Code-Beispiel: Bankdaten

Füge einen Code ein, der bewirkt, dass deine Bankdaten in der E-Mail an deine Kund:innen nur angezeigt werden, wenn sie im plentyShop die Zahlungsart *Vorkasse* (ID `0`) gewählt haben.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/manual/master/de/crm/assets/emailbuilder-code-beispiel-bankdaten.txt[unter diesem Link^]{nbsp}icon:external-link[].

//// 
[source,plenty]
----
include::assets/emailbuilder-code-beispiel-bankdaten.txt[]

----
////

[#code-beispiel-auftragspositionen]
=== Code-Beispiel: Auftragspositionen

Füge einen Code ein, der bewirkt, dass die Auftragspositionen mit den Varianten-IDs, den Artikelnamen, der Artikelanzahl und dem Preis in einer Tabelle angezeigt werden.

Das Code-Beispiel findest du link:https://raw.githubusercontent.com/plentymarkets/manual/master/de/crm/assets/emailbuilder-code-beispiel-auftragspositionen.txt[unter diesem Link^]{nbsp}icon:external-link[].

////
[source,plenty]
----
include::assets/emailbuilder-code-beispiel-auftragspositionen.txt[]

----
////