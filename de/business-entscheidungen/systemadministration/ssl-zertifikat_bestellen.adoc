= SSL-Zertifikate
:lang: de
include::{includedir}/_header.adoc[]
:keywords: SSL, SSL-Zertifikat, SSL-Zertifikate, SSL-Zertifizierung, Trusted Shops, Zertifizierungsstelle, Zertifizierungsstellen, AlwaysOn, DigiCert, Let’s Encrypt, Let's_Encrypt, let's_enrypt, Lets_Encrypt, lets_encrypt, COMODO, comodo, Primärdomain, Primär-Domain, Hauptdomain, Haupt-Domain, DNS, DNS-Einstellungen, AutoScaling, CNAME, CNAME-Eintrag, Hostmaster, Wildcard, challengeSolved
:position: 50
:url: business-entscheidungen/systemadministration/ssl-zertifikat_bestellen
:id: LAF1PEI
:author: team-cloud

Ein SSL-Zertifikat dient dazu, deine Website zu verschlüsseln und gewährleistet eine sichere Verbindung zu deiner Website und deinem Onlineshop. Du benötigst ein SSL-Zertifikat für bestimmte Marktplätze und zum Beispiel für die Zertifizierung mit Trusted Shops. Dass du ein SSL-Zertifikat verwendest, ist daran erkennbar, dass deine Website über _https_ erreichbar ist.

[#100]
== Welche SSL-Zertifikate stehen zur Auswahl?

SSL-Zertifikate werden von unabhängigen Zertifizierungsstellen ausgestellt. plentymarkets bietet 2 verschiedene Arten von SSL-Zertifikaten an:

[cols="1,4"]
|====
|Art |Erläuterung

|link:https://www.websecurity.digicert.com/de/de/security-topics/always-on-ssl[AlwaysOn]{nbsp}icon:external-link[]
a|* günstigstes SSL-Zertifizierungsmodell
* ausgestellt von DigiCert
* Gültigkeitsdauer:
** 6 Monate
* Verlängerung:
** verlängert sich nicht automatisch
** sollte nach 5 Monaten <<#1300, verlängert werden>>.

|link:https://comodosslstore.com/[COMODO]{nbsp}icon:external-link[]
a|* weltweit anerkannte und über Jahre vertrauensvolle Zertifizierungsstelle.
* im Falle eines Missbrauchs oder Datenverlustes besteht Garantieanspruch bei der ausstellenden Zertifizierungsstelle.
* Gültigkeitsdauer:
** die Laufzeit von 1 oder 2 Jahren wird während des Bestellprozesses gewählt.
** die Gültigkeitsdauer von neu bestellten Zertifikaten beginnt mit dem Datum der Bestätigung der Zertifizierungsstelle.
** eine eventuelle Restlaufzeit des vorherigen Zertifikats kann nicht übernommen werden.
* Verlängerung:
** verlängert sich nicht automatisch
** sollte nach Ende der Laufzeit (mindestens 1 Jahr) <<#1300, verlängert werden>>.
** 14 Tage vor offiziellem Ablaufdatum des Zertifikats wird eine Erinnerungs-E-Mail an die Hostmaster-Adresse gesendet.
** Zusätzlich besteht die Möglichkeit, sich per E-Mail erinnern zu lassen. Eine kostenfreie Möglichkeit stellt der Dienst link:https://letsmonitor.org/[LetsMonitor.org]{nbsp}icon:external-link[] dar.
|====

[#200]
[discrete]
=== Preis-Modell der SSL-Zertifizierung

Für das Bereitstellen des SSL-Zertifikates wird eine *mtl. Gebühr in Höhe 2,- € netto zzgl. der Kosten des SSL-Zertifikats* erhoben.

Demnach ergeben sich folgende jährliche Kosten je Modell in aufsteigender Reihenfolge:

[options="header,footer"]
|===
|Zertifikat     |Berechnung     | Kosten p.a.^*^
|AlwaysOn  | 12*2 + 12*0   | 24,- €
|COMODO 2 Jahre | 12*2 + 1*59,50/2 | 53,75 €
|COMODO 1 Jahr  | 12*2 + 1*35,70   | 59,70 €
|===
*[.small]#Alle Preise sind in netto angegeben.#

[#300]
== Voraussetzungen für das Buchen eines SSL-Zertifikats

[#400]
=== Domain

Die Domain, für die das SSL-Zertifikat bestellt werden soll, muss eine Primärdomain sein.
Die Domain muss also im Menü *Einrichtung » Assistenten » Grundeinrichtung » Domains-Assistenten* als Primärdomain genannt werden.

*_Tipp_*: Schaue dir deine Domains mit der Tabellenansicht an, um zu erkennen, welche die Primärdomain ist.

.Domain-Assistent in Tabellenansicht
image::../../business-entscheidungen/systemadministration/assets/hauptdomain.png[]

Wenn du ein SSL-Zertifikat für eine andere Domain einrichten möchtest, musst du <<business-entscheidungen/systemadministration/domains#210a, diese Domain zunächst als Hauptdomain festlegen>>.

Die Bestellung eines SSL-Zertifikats ist nicht möglich, wenn die entsprechende Domain als extern abgespeichert ist (also auf eine externe IP-Adresse verweist).

image::../../business-entscheidungen/systemadministration/assets/extern-domain.png[]

[#500]
=== Aktiviertes Autoscaling

Vereinzelt gibt es Systeme, die nicht auf link:https://aws.amazon.com/de/autoscaling/[Autoscaling]{nbsp}icon:external-link[] (AS) umgestellt wurden.
In den meisten Fällen liegt das daran, dass die Domain nicht bei plentymarkets gehostet wird. Aus diesem Grund muss die Person, der die Domain gehört, die DNS-Einstellungen der Domain manuell anpassen.
Eine weitere mögliche Ursache ist, dass eine Domain erstmalig zu einem Mandanten hinzugeführt wurde. Diese Mandanten werden dann nicht automatisch auf Autoscaling umgestellt. Der plentymarkets Support muss Autoscaling manuell aktivieren.

[#600]
[discrete]
==== Woran erkenne ich aktiviertes AS?

Ob für das jeweilige System AS aktiviert ist oder nicht erkennt man anhand der dargestellten DNS-Einstellungen im Domain Assistenten.

[.instruction]
Autoscaling-Status prüfen:

. <<business-entscheidungen/systemadministration/domains#50, Rufe den Domain-Assistenten auf>> und navigiere zum Schritt *Aktuelle DNS Einstellungen*. +
*_Hinweis_*: Dieser Schritt erscheint nur, wenn du im Schritt <<business-entscheidungen/systemadministration/domains#100, Domain Typ>> die Option *Neue, extern gehostete, Domain hinterlegen* gewählt hast.
. Prüfe in der Spalte *DNS Record Type*, ob für die Domain ein CNAME-Eintrag vorhanden ist. +
→ Wenn ein CNAME-Eintrag vorhanden ist, ist Autoscaling aktiviert. Ein SSL-Zertifikat kann bestellt werden. +
→ Wenn kein CNAME-Eintrag vorhanden ist, sondern nur zwei A-Records, ist Autoscaling nicht aktiviert.
. Wenn Autoscaling nicht aktiviert ist, bitte den plentymarkets Support über das link:https://forum.plentymarkets.com/t/46996/[plentymarkets Forum]{nbsp}icon:external-link[], Autoscaling zu aktivieren.

Beispiel der dargestellten DNS-Einstellungen bei einem System auf AS:

image::../../business-entscheidungen/systemadministration/assets/aktuelle-dns-einstellungen.png[]

[#700]
=== Bei Subdomains: Vorhandene Parent-Domain

Wenn du ein SSL-Zertifikat für eine Subdomain bestellen möchtest, muss auch die Parent-Domain im Assistenten existieren. Auch die Beziehung zwischen Domain und Subdomain muss im Assistenten korrekt eingetragen sein.
<<business-entscheidungen/systemadministration/domains#50, Prüfe zunächst die Einstellungen im Assistenten>>.

Falls die Parent-Domain aus dem Assistenten entfernt wurde, lege die Parent-Domain erneut an. Wenn diese Parent-Domain nicht auf plentymarkets zeigen soll, sondern z.B. auf Shopware, versehe die Parent-Domain mit einem externen A-Record, indem du eine <<business-entscheidungen/systemadministration/domains#210a, Systemverknüpfung erstellst>>.

[#800]
=== Bei externen Domains: DNS-Einstellungen

Die Validierung der SSL-Bestellung erfolgt auf Dateiebene.
Das bedeutet, dass die Domain, für die das Zertifikat bestellt werden soll, zwingend korrekt erreichbar sein muss.

* Die beim <<business-entscheidungen/systemadministration/domains#160, externen Provider gespeicherten DNS-Einstellungen>> müssen mit den DNS-Einstellungen im Assistenten identisch sein. +
→ Prüfe die Einstellungen im Service-Bereich deines Domain-Providers.
* Für die Domain, für die das SSL-Zertifikat bestellt werden soll, darf kein IPv6-Eintrag (AAAA-Record) existieren. +
→ Prüfe die Einstellungen im Service-Bereich deines Domain-Providers.
* Für die Domain, für die das SSL-Zertifikat bestellt werden soll, müssen eventuell vorhandene link:https://de.wikipedia.org/wiki/DNS_Certification_Authority_Authorization[CAA-Records]{nbsp}icon:external-link[]s die Bestellung des gewünschten Zertifikats zulassen. +
→ Prüfe die Einstellungen im Service-Bereich deines Domain-Providers.

[#900]
=== 301-Weiterleitungen für '/' entfernen
Im Domain-Assistent der jeweiligen Domain darf <<business-entscheidungen/systemadministration/domains#domain-mailserver, keine 301-Weiterleitung für die Startseite>> angelegt sein, wie sie im nachfolgenden Beispiel dargestellt ist:

`/;Ziel-URL;301;L`

`/*;Ziel-URL;301;L`

`^/*;Ziel-URL;301;L`

[#1000]
=== Keine manuell angelegte Sub-Domain für www.
Eine manuell angelegte Sub-Domain für `www.deineDomain.tld` verhindert die Auslieferung des SSL-Zertifikats, da sie einen doppelten DNS-Eintrag für `www` erzeugen würde.
Falls eine solche Sub-Domain manuell angelegt wurde, muss diese gelöscht werden.

[#1100]
=== Checkliste

Bereit, ein SSL-Zertifikat zu bestellen?
Gehe diese Checkliste durch, um sicherzustellen, dass du alle <<#300, Voraussetzungen>> erfüllt hast.

[%interactive]

* [ ] Domain ist nicht gekündigt
* [ ] Domain ist Hauptdomain
* [ ] Domain ist auf AutoScaling (AS) umgestellt
* [ ] Bei Sub-Domains: existierende Parent-Domain
* [ ] DNS-Einstellungen gem. Angaben im Domain-Assistenten
* [ ] Kein AAAA-Record für die Domain, für die das Zertifikat bestellt werden soll
* [ ] Kein negativer CAA-Record
* [ ] Keine 301-Weiterleitung auf der Startseite
* [ ] Keine manuell angelegte Sub-Domain für www.

[#1200]
== Bestellen eines SSL-Zertifikats

Nachdem du alle <<#300, Voraussetzungen>> erfüllt hast, kannst du ein SSL-Zertifikat bestellen.
Die Bestellung bei der Zertifizierungsstelle führt plentymarkets in deinem Auftrag durch und stellt dir den Kaufbetrag und die monatlichen Bereitstellungskosten in Rechnung.

[.instruction]
SSL-Zertifikat bestellen:

. Öffne das Menü *Einrichtung » Mandant » Mandant wählen » SSL*. +
→ Die Zertifikate der Domain werden angezeigt.
. Klicke in der Zeile *Neues SSL bestellen für Domain: [Domain-Name]* rechts auf den Pfeil nach unten. +
→ Die für die Domain buchbaren SSL-Zertifikate werden angezeigt.
. Prüfe die buchbaren SSL-Zertifikate.
. Klicke in der Zeile des SSL-Zertifikats, das du buchen möchtest, auf icon:shopping-cart[role="darkGrey"] *SSL bestellen*. +
→ Das SSL-Zertifikat wird bestellt. +
*_Hinweis:_* Es kann bis zu 2 Stunden dauern, bis das SSL-Zertifikat aktiviert ist.
. Lösche den Browser-Cache.
. *_Optional:_* Lösche den DNS-Cache.
  .. Klicke die Tastenkombination *Windows-Taste + R*.
  .. Gib `CMD` ein und drücke *Enter*.
  .. Gib den Befehl `ipconfig /flushdns` ein. +
    → Der DNS-Cache wird gelöscht.

[TIP]
.Wann ist die Bestellung abgeschlossen?
====
Die Bestellung des Zertifikates ist erst abgeschlossen, wenn beim Status im Backend "Abgeschlossen" steht. Alle Meldungen, die "challenge..." beinhalten bedeuten, dass die Bestellung noch im Gange ist. <<#1400, Siehe die FAQ>>, wenn der Bestellstatus in "challengeSolved" feststeckt.
====

[#1300]
== Verlängern eines SSL-Zertifikats

SSL-Zertifikate müssen vor Ende der Laufzeit verlängert, d.h. neu bestellt werden.
Unabhängig davon, ob du bereits ein SSL-Zertifikat hast, musst du ein neues Zertifikat bestellen.
Du wählst also Zertifizierungsstelle und Laufzeit bei jeder Bestellung neu.

[.instruction]
Restlaufzeit eines SSL-Zertifikats anzeigen:

. Öffne das Menü *Einrichtung » Mandant » Mandant wählen » SSL*. +
→ Eine Tabelle mit den Zertifikaten der Domain wird angezeigt. +
. In der Spalte *Ablaufdatum* findest du das Datum, an dem das Zertifikat abläuft.

[#1400]
== Häufig gestellte Fragen (FAQ)

[qanda]
*Für welche Domain wird ein SSL-Zertifikat bestellt?*::
.. Du bestellst das SSL-Zertifikat für deine Primärdomain, also die Domain, die im Menü *Einrichtung » Assistenten » Grundeinrichtung » Domains-Assistenten* als Primärdomain eingestellt ist.
Wenn du ein SSL-Zertifikat für eine andere Domain einrichten möchtest, musst du <<business-entscheidungen/systemadministration/domains#210a, diese Domain zunächst als Hauptdomain festlegen>>.
.. Eine externe Domain kannst du beim externen Hoster belassen und <<business-entscheidungen/systemadministration/domains#160, die DNS-Einstellungen bei diesem externen Hoster speichern>>. Das SSL-Zertifikat muss jedoch systemnah liegen, also auch wenn die Domain bei einem anderen Hoster liegt, erfolgt die Verschlüsselung erst nach der Weiterleitung über die IP-Adresse bei plentymarkets im System. Daher muss das SSL-Zertifikat bei plentymarkets gebucht werden, da plentymarkets aus Sicherheitsgründen keine externen Zertifikate zulässt.
.. Für gekündigte Domains sowie für Start-up-Domains und Testdomains, also Domains mit den Bestandteilen _plenty-testdrive.eu_, _plentymarkets-x1.com_ usw., können keine SSL-Zertifikate bestellt werden.

*Was passiert, wenn ich die Hauptdomain ändere?*::
.. SSL-Zertifikate sind domaingebunden. Das bedeutet, dass beispielsweise bei Umstellung der Hauptdomain das aktuelle Zertifikat inaktiv geschaltet wird, da eine neue Hauptdomain ohne bestelltes Zertifikat vorliegt.
Inaktiv bedeutet nicht gelöscht - Sollte die Hauptdomain erneut auf die Domain umgestellt werden, die bereits ein SSL-Zertifikat besaß, kann dieses wieder aktiviert werden, sofern das SSL-Zertifikat noch gültig ist.

*Kann ich das SSL-Zertifikat bei einem Domain-Umzug mitnehmen?*::
.. SSL-Zertifikate können bei einem Domainumzug zu plentymarkets *nicht* mitgenommen werden. Aufgrund der technischen Gegebenheiten ist die Bestellung nur innerhalb unserer link:https://de.wikipedia.org/wiki/Public-Key-Infrastruktur[Public-Key-Infrastruktur]{nbsp}icon:external-link[] möglich.
Dies gilt für *_beide Richtungen_*. Sowohl von *_extern zu plentymarkets_*, als auch von *_plentymarkets zu extern_*. Ein über plentymarkets gebuchtes SSL-Zertifikat muss *_systemnah_* liegen und kann bei einem Domaintransfer nicht mitgenommen werden. Ein Export der Zertifikatsdaten (geheimer Private-Key) ist *nicht* möglich. Auch ein "Transfer" eines SSL-Zertifikats von einer Domain(-ID) auf eine andere ist nicht möglich.

*Brauche ich ein Hostmaster-Postfach?*::
.. Nein, für die Bestellung eines SSL-Zertifikats über das Backend wird kein Postfach `hostmaster@deineDomain.tld` vorausgesetzt.

*Können Wildcard-SSL-Zertifikate ausgestellt werden?*::
.. Nein, das Ausstellen von sogenannten Wildcard-SSL-Zertifikaten ist in unserer Infrastruktur nicht möglich.

*Wie lange dauert es, bis das SSL-Zertifikat aktiviert wird?*::
.. Nach Bestellung eines neuen Zertifikats muss dieses durch einen regelmäßig ausgeführten *Systemprozess* veröffentlicht werden. *Dies kann bis zu 120 Minuten dauern.*
.. In Einzelfällen führt die Zertifizierungsstelle eine Qualitätskontrolle durch bevor sie SSL-Zertifikate freischaltet. Prüfe daher die auf dem Bildschirm angezeigte Bestätigungsnachricht. Eine Qualitätskontrolle dauert in der Regel bis zu 24 Stunden. Sollte der Status im Backend nach 24 Stunden nicht "Abgeschlossen" lauten, melde dich im Forum unter Angabe der betroffenen Domain.

*Ich habe mein Zertifikat bereits vor mehreren Stunden bestellt, meine Seite wird aber noch immer nicht als sicher eingestuft - Was kann ich machen?*::
.. *Option 1:* Nachdem die Bestellung im Backend der Status "Abgeschlossen" erhalten hat muss der lokale Browser-Cache geleert werden (link:https://forum.plentymarkets.com/t/loeschen-des-lokalen-dns-cache/64288[Löschen des lokalen Browser- und/oder DNS-Cache]{nbsp}icon:external-link[]), damit das zwischengespeicherte Zertifikat aktualisiert wird.
.. *Option 2:* Evtl. liegt bei der Erreichbarkeit deiner Domain ein Problem vor und das Zertifikat kann deswegen nicht korrekt ausgeliefert werden. Du kannst auf der nachfolgenden Seite prüfen, ob eine Installation von LetsEncrypt für Deine Domain möglich ist: link:https://letsdebug.net/[https://letsdebug.net/]{nbsp}icon:external-link[] +
*Validation method: HTTP-01*. Falls dort eine Fehlermeldung ausgegeben wird kannst Du uns diese gern im Forum mitteilen, damit wir den Sachverhalt prüfen können.

*Ich möchte von COMODO auf AlwaysOn umsteigen - was ist zu beachten?*::
.. Im Falle einer Bestellung von AlwaysOn bei einem bereits aktiven SSL-Zertifikat von COMODO (alias RapidSSL), wird das COMODO-Zertifikat durch das von AlwaysOn ersetzt.
Das "alte" Zertifikat wird jedoch nicht gelöscht, sondern auf inaktiv geschaltet.
Das link:https://forum.plentymarkets.com/c/core[plenty-Core-Team]{nbsp}icon:external-link[] kann das Zertifikat innerhalb des Gültigkeitszeitraums reaktivieren.
Es kann sein, dass die Domain für maximal eine Stunde als "nicht sicher" eingestuft wird, wenn das AlwaysOn-Zertifikat gerade erst bestellt wurde, da dies nach der Bestellung angefordert, generiert und installiert werden muss. Nachdem die Bestellung im Backend der Status "Abgeschlossen" erhalten hat muss der lokale Browser-Cache geleert werden, damit das zwischengespeicherte Zertifikat aktualisiert wird.

*Der Status der Bestellung steckt fest bei "challengeSolved". Wie kann ich dieses Problem beheben?*::
.. Prüfe, ob <<#300, alle genannten Voraussetzungen>> zum erfolgreichen Bestellen eines SSL-Zertifikats erfüllt sind.
Wenn die Voraussetzungen alle erfüllt sind, aber der Status weiterhin in "challengeSolved" festhängt, wende dich an link:https://forum.plentymarkets.com/c/core[das plenty-Core-Team im Forum]{nbsp}icon:external-link[].
