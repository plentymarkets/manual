= Daten mit ElasticSync importieren
:lang: de
include::{includedir}/_header.adoc[]
:keywords: Daten importieren, Datenimport, ElasticSync, Sync, Elastic Sync, Sync, Synchronisieren, Synchronisation, Datenformat, Datenformate, dynamischer Import, Abgleich, Importoptionen, Zuordnung, Importdaten, Sync-Verlauf
:description: Erfahre, wie du mit ElasticSync Daten in plentymarkets importierst.
:position: 10
:url: daten/daten-importieren/ElasticSync
:id: 6Z40YCT
:icons: font
:docinfodir: /workspace/manual-adoc
:docinfo1:

Diese Handbuchseite beschreibt den Datenimport in plentymarkets mit ElasticSync. Ein Import von Daten ist ratsam, wenn du z.B. neue Artikel, Kundendaten oder Lagerbestände in dein plentymarkets System einpflegen möchtest und die Daten bereits digital vorliegen. ElasticSync ermöglicht es über das Erstellen von sogenannten Syncs, Datenimporte auszuführen. Ein Import kann manuell oder automatisiert erfolgen. Lerne in diesem Video alle grundlegenden Dinge zum Datenimport mit ElasticSync.

.Verschaffe dir einen Überblick über das Tool ElasticSync
video::322201964[vimeo]

== Benutzerrechte für Backend-Benutzer vergeben

Nutzer vom Typ Backend sehen nur bestimmte Bereiche und Menüs im plentymarkets Backend. Somit können sie nur eingeschränkt im System arbeiten. Sollen Mitarbeiter mit diesem Nutzertyp mit Syncs und Zuordnungen arbeiten, muss ein Nutzer vom Typ *Admin* die in <<tabelle-berechtigungen-elasticsync>> beschriebenen Rechte für diesen Benutzer vergeben.

[.instruction]
Benutzerrechte für Backend-Benutzer vergeben:

. Öffne das Menü *Einrichtung » Einstellungen » Benutzer » Rechte » Benutzer*.
. Nutze die Suchfunktion (icon:search[role="blue"]) und öffne den zu bearbeitenden Benutzer.
. Aktiviere im Bereich *Berechtigungen* die Berechtigungen gemäß <<tabelle-berechtigungen-elasticsync>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[tabelle-berechtigungen-elasticsync]]
.Berechtigungen für das Menü *Daten » Import* vergeben
[cols=”1,2”]
|====
|*Einstellung* |*Erläuterung*

|*Daten > Sync > aktualisieren*
|Erlaubt dem Backend-Benutzer, Syncs zu aktualisieren.

|*Daten > Sync > anzeigen*
|Erlaubt dem Backend-Benutzer, Syncs anzuzeigen.

|*Daten > Sync > erstellen*
|Erlaubt dem Backend-Benutzer, Syncs zu erstellen.

|*Daten > Sync > löschen*
|Erlaubt dem Backend-Benutzer, Syncs zu löschen.

|*Daten > Sync > Zuordnung > aktualisieren*
|Erlaubt dem Backend-Benutzer, eine Zuordnung zu aktualisieren.

|*Daten > Sync > Zuordnung > anzeigen*
|Erlaubt dem Backend-Benutzer, eine Zuordnung anzuzeigen.

|*Daten > Sync > Zuordnung > erstellen*
|Erlaubt dem Backend-Benutzer, eine Zuordnung zu erstellen.

|*Daten > Sync > Zuordnung > löschen*
|Erlaubt dem Backend-Benutzer, eine Zuordnung zu löschen.

|*Daten > Sync Daten-Log*
|Erlaubt dem Backend-Benutzer, den Daten-Log eines Syncs zu aktualisieren, anzuzeigen, zu erstellen und zu löschen.
|====

[#1210]
== Sync erstellen

Die grundsätzliche Funktionsweise zum Erstellen und Importieren eines Syncs ist für alle Sync-Typen gleich und wird hier einmal übergreifend beschrieben.

Syncs erstellst, bearbeitest und verwaltest du im Menü **Daten » Import**. Hier siehst du eine Übersicht aller Syncs. Ein Sync dient dazu, die Daten einer per FTP oder HTTPS zugänglichen Datei in plentymarkets zuzuordnen und zu importieren. Beim Erstellen des Syncs speicherst du Informationen zur Datenquelle. Wichtig für einen Sync ist außerdem, dass du Daten für den Abgleich festlegst und zuordnest, welche Daten der Datei welchen Daten in plentymarkets entsprechen. Mit dem Abgleich bestimmst du, anhand welcher Daten versucht wird zu identifizieren, ob bereits ein Datensatz besteht oder nicht. Mit der Zuordnung legst du fest, welche Spalte deiner Datei welchem Datenfeld in plentymarkets entspricht. Am Ende legst du ein Importintervall fest. Gehe wie im Folgenden beschrieben vor, um einen Sync zu erstellen.

[NOTE]
.Importintervall am Ende einstellen, damit nicht vorzeitig ein Sync ausgeführt wird
====
Stelle das Importintervall am Ende ein, damit nicht schon ein Sync ausgeführt wird, während du noch Abgleich- oder Zuordnungseinstellungen vornimmst.
====

[.instruction]
Sync erstellen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke auf *Sync hinzufügen* (icon:plus-square[role="green"]). +
→ Der Bearbeitungsbereich *Neuer Sync* wird angezeigt.
. Nimm die Einstellungen vor. Beachte dazu die Erläuterungen in <<tabelle-sync-erstellen>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Der Sync wird erstellt. +
→ Die Abgleicheinstellungen des Syncs werden geöffnet.

[[tabelle-sync-erstellen]]
.Sync erstellen
[cols="1,3"]
|====
|Einstellung |Erläuterung

2+^|*Grunddaten*

|*Name*
|Name eingeben. Dieser Name wird in der Übersicht angezeigt und kann für die Suche genutzt werden.

|*Intervall*
|Intervall für den Import von Syncs wählen. +
Mit der Option *Zeitplan* kann festgelegt werden, wie oft und zu welchem Zeitpunkt der Import von Syncs gestartet werden soll.

|*Typ*
a|Typ aus Dropdown-Liste wählen.

* <<daten/daten-importieren/sync-typen/elasticSync-artikel#, Artikel>> = Wählen, um Artikeldaten und Variantendaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-attribute#, Attribute>> = Wählen, um Attributdaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-auftraege#, Aufträge>> = Wählen, um Auftragsdaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-eigenschaften#, Eigenschaften>> = Wählen, um Eigenschaften zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-facetten#, Facetten>> = Wählen, um Facetten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticsync-fahrzeugverwendungsliste#, Fahrzeugverwendungsliste>> = Wählen, um Daten der Fahrzeugverwendungsliste zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-gutschein-codes#, Gutschein-Codes>> = Wählen, um Gutschein-Codes zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-hersteller#, Hersteller>> = Wählen, um Herstellerdaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-kampagnen#, Kampagnen>> = Wählen, um Gutscheinkampagnen zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-kategorien#, Kategorien>> = Wählen, um Kategoriedaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-kontakte#, Kontakte, Firmen und Adressen>> = Wählen, um Kontakt-, Firmen- und Adressdaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-lager#, Lager>> = Wählen, um Lagerorte zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-merkmale#, Merkmale>> = Wählen, um Merkmaldaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-newsletter-empfaenger#, Newsletter-Empfänger>> = Wählen, um Newsletter-Daten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-notizen#, Notizen>> = Wählen, um Notizen zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-warenbestand#, Warenbestand>> = Wählen, um Warenbestandsdaten zu importieren.
* <<daten/daten-importieren/sync-typen/elasticSync-wareneingang#, Wareneingang>> = Wählen, um Wareneingangsdaten zu importieren.

2+^|*Import*

|*Datentyp*
|Dateiformat der Importdatei wählen. +
Aktuell ist jedoch nur die Auswahl *CSV/TXT* verfügbar, da nur CSV- oder TXT-Dateien importiert werden können.

|*Zeichensatz*
|Zeichensatz der Datei oder die Option *Automatisch erkennen* wählen.

|*Beginne ab Zeile*
|Wählen, ab welcher Zeile der Datei Daten importiert werden sollen.

|*Kopfzeile enthalten*
|Wählen, ob die Importdatei eine Kopfzeile enthält.

|*Globalen Cache nutzen*
|Nutzt man dieselbe Datei für mehrere Syncs, kann man festlegen, ob der globale Cache genutzt werden soll. Bei Aktivierung wird die Datei global, also für alle Syncs, gecached.

|*Automatische Zuordnung*
|Wählen, ob die automatische Zuordnung verwendet werden soll. Die Spalten der CSV- oder TXT-Datei können automatisch den plentymarkets Datenfeldern zugeordnet werden. Damit die Zuordnung funktioniert, darf die Benennung der im FormatDesigner gewählten Felder nicht geändert werden.

2+^|*Trennzeichen*

|*Trennzeichen*
|Das Trennzeichen der CSV- oder TXT-Datei wird automatisch erkannt. Diese Einstellung ist standardmäßig aktiviert. +
Alternativ kann das Trennzeichen, das in der Importdatei verwendet wird, um die Datenfelder (Spalten) eines Datensatzes voneinander zu trennen, manuell gewählt werden. +
Mögliche Trennzeichen sind *Semikolon*, *Komma*, *Tabulator* oder *Pipe*.

|*Feldbegrenzungszeichen*
|Begrenzungszeichen innerhalb von Feldern wählen, die mehrere Werte enthalten können. +
* " = einzelne Werte innerhalb eines Feldes sind durch doppelte Anführungszeichen voneinander getrennt.
* ' = einzelne Werte innerhalb eines Feldes sind durch einfache Anführungszeichen voneinander getrennt.

2+^|*Quelle*

|*Quelle*
a|*Manueller Upload*, *FTP*, *HTTPS* oder *SFTP* wählen. +
Je nach gewählter Option werden weitere Einstellungen sichtbar:

*Manueller Upload* = lokale Datei wählen und direkt hochladen. +
Nachdem ein Sync ausgeführt wurde, wird die Datei automatisch vom Webspace gelöscht. Dies ist standardmäßig voreingestellt. Um die Datei zu speichern, muss der Haken in der Checkbox entfernt werden. *_Hinweis_*: Das Speichern der Datei auf dem Webspace ist kostenpflichtig.

*FTP* = Host, Port, Benutzername, Passwort und Dateiname werden als Einstellungen sichtbar.

    * *Host (Pflichtfeld)* = Host des FTP-Servers eingeben. +
      *_Tipp:_* Nutze hierzu deinen plentymarkets FTP-Zugang.
    * *Port* = Port des FTP-Servers. Wenn kein Port eingetragen ist, wird der Standard-Port (22) verwendet.
    * *Benutzername (Pflichtfeld)* = Benutzer für FTP-Zugang eingeben.
    * *Passwort (Pflichtfeld)* = Passwort für FTP-Zugang eingeben.
    * *Dateiname* = Pfad und Name der Datei eingeben, aus der Daten importiert werden sollen. Der Dateiname muss auf .csv oder .txt enden. +
    *_Hinweis:_* Wildcards können im Feld *Dateiname* verwendet werden, indem z.B. ein Teil des Dateinamens durch ein *** ersetzt wird. Wildcards nur in Kombination mit der Option *Datei nach erfolgreichem Import in Archiv verschieben* verwenden.
    * *Datei nach erfolgreichem Import in Archiv verschieben* = Wenn diese Option aktiv ist, wird nach erfolgreichem Import die Importdatei automatisch in einen neuen Ordner *Archiv* auf dem FTP-Verzeichnis verschoben.


*HTTPS* = *Externe URL* wählen.

        * *Externe URL* = URL eingeben, unter der die Importdatei erreichbar ist. +
         *_Tipp:_* Speichere die Datei auf dem plentymarkets Webspace.
          * *Authentifizierung*: Wählen, ob für den Zugriff auf die Datei eine Authentifizierung erforderlich ist oder nicht.
            ** *keine* = keine Authentifizierung erforderlich
            ** *HTTP-Authentifizierung* = Authentifizierung per Benutzer und Passwort erforderlich

*SFTP* = Host, Port, Benutzername, Passwort und Dateiname werden als Einstellungen sichtbar.

        * *Host (Pflichtfeld)* = Host des FTP-Servers eingeben. +
        * *Port (Pflichtfeld)* = Port des FTP-Servers. Wenn kein Port eingetragen ist, wird der Standard-Port (22) verwendet.
        * *Benutzername (Pflichtfeld)* = Benutzer für FTP-Zugang eingeben.
        * *Passwort (Pflichtfeld)* = Passwort für FTP-Zugang eingeben.
        * *Dateiname* = Pfad und Name der Datei eingeben, aus der Daten importiert werden sollen. Der Dateiname muss auf .csv oder .txt enden. +
        *_Hinweis:_* Wildcards können im Feld *Dateiname* verwendet werden, indem z.B. ein Teil des Dateinamens durch ein *** ersetzt wird. Wildcards nur in Kombination mit der Option *Datei nach erfolgreichem Import in Archiv verschieben* verwenden.
        * *Datei nach erfolgreichem Import in Archiv verschieben* = Wenn diese Option aktiv ist, wird nach erfolgreichem Import die Importdatei automatisch in einen neuen Ordner *Archiv* auf dem FTP-Verzeichnis verschoben.
|====

[#1300]
== Importoptionen festlegen

Die Importoptionen befinden sich im Bereich *Abgleich* und gelten sowohl für den Abgleich als auch für die Zuordnung.

Bevor wir zu den konkreten Einstellungen der Importoptionen kommen, hast du hier die Möglichkeit, mehr über den Datenimport zu erfahren.
Wie bereits erwähnt, kann dieser manuell oder automatisch erfolgen. Wenn du neu bei plentymarkets bist und deine Artikel einmalig manuell importieren möchtest, schaue dir dieses Video an und lerne, wie du Informationen wie beispielsweise Produkt- oder Kundendaten in deiner CSV-Datei einmalig manuell importierst.

.Importiere deine Daten einmalig manuell
video::321227748[vimeo]

In diesem Video erfährst du, wie du plentymarkets so konfigurierst, dass neue Dateien automatisch importiert und alte archiviert werden.

.Lasse deine Daten automatisch importieren oder archivieren
video::322203826[vimeo]

Nun zurück zu den Importoptionen.

[.instruction]
Importoptionen festlegen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke in der Sync-Übersicht auf den Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Abgleich*.
. Lege die Importoptionen fest. Beachte dazu die Erläuterungen in <<tabelle-Sync-Importoptionen>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[tabelle-Sync-Importoptionen]]
.Importoptionen für Syncs
[cols="1,2"]
|====
|Importoption |Erläuterung

|*Importoption wählen*
a|

* *Neue Daten importieren, vorhandene aktualisieren* = Wenn anhand der Abgleichfelder keine übereinstimmenden Daten gefunden werden, wird ein neuer Datensatz, z.B. ein neuer Artikel oder ein neuer Auftrag, hinzugefügt. Gleichzeitig werden bereits vorhandene Daten aktualisiert.
* *Nur vorhandene Daten aktualisieren* = Vorhandene Daten werden aktualisiert. Wenn anhand der Abgleichfelder keine übereinstimmenden Daten gefunden werden, wird der Datensatz nicht importiert.
* *Nur neue Daten importieren* = Es werden ausschließlich neue Datensätze importiert, für die anhand der Abgleichfelder keine übereinstimmenden Daten gefunden werden.

|*Dezimalzahl*
a|*Deutsche Schreibweise* oder *Englische Schreibweise* wählen.

* *Deutsche Schreibweise* = Dezimalzahlen werden kommasepariert angegeben und ein Punkt dient als Tausendertrennzeichen.
* *Englische Schreibweise* = Dezimalzahlen werden punktsepariert angegeben und ein Komma dient als Tausendertrennzeichen.

|*Datumsformat*
|Datumsformat eingeben. Wenn die Datumsangaben in der Datei dem Standardformat Y-m-d H:i:s entsprechen, muss nichts eingegeben werden. Andere Formate müssen eingetragen werden. Zulässig sind alle link:http://php.net/manual/de/function.date.php[php-konformen Datumsformate^].

|====

[#1400]
== Abgleich festlegen

Nachdem du einen Sync erstellt hast, öffne diesen, um weitere Einstellungen vorzunehmen. Zunächst wählst du die Felder, die zum Abgleichen der Daten verwendet werden sollen. Lege außerdem fest, was passieren soll, wenn durch den Abgleich keine bestehenden Daten gefunden werden.

[NOTE]
.Abgleich ist optional
====
Bei den Abgleichfeldern handelt es sich um optionale Einstellungen. Wenn du kein Abgleichfeld wählst, können die Daten deiner Datei keinen bestehenden Daten in deinem System zugeordnet werden. Du kannst eins, mehrere oder alle Abgleichfelder festlegen. Die angezeigten Abgleichfelder unterscheiden sich für jeden Sync-Typ.
====

[.instruction]
Abgleich festlegen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke in der Sync-Übersicht auf den Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Abgleich*.
. Nimm die Einstellungen vor.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[#1500]
== Zuordnung erstellen

Mithilfe einer Zuordnung legst du fest, welche Spalte deiner Datei welchem Datenfeld in deinem System entspricht. Ohne Zuordnung können keine Daten importiert werden.

[.instruction]
Zuordnung festlegen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke in der Sync-Übersicht auf den Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Zuordnung*.
. Klicke auf *Zuordnung hinzufügen* (icon:plus-square[role="green"]).
. Gib einen Namen für die Zuordnung ein.
. Gib optional eine Position für die Zuordnung ein.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die verfügbaren Zuordnungsfelder unterscheiden sich je nach Sync-Typ.
. Wähle Datenfelder für die Zuordnung aus, indem du Häkchen bei diesen Feldern setzt. +
→ Die gewählten Datenfelder werden zur Zuordnung hinzugefügt.
. Wähle für jedes Datenfeld eine Spalte aus deiner Datei oder die Option *Eigener Wert*.
. *Speichere* (icon:save[role="green"]) die Einstellungen.


Willst du eine Datei in plentymarkets importieren, aber es fehlen einige wichtige Informationen? Du musst die Datei nicht manuell anpassen! Das Video zeigt dir, wie du mit dem Eigenen Wert die fehlenden Informationen hinzufügst.

.Nutze den Eigenen Wert, um Informationen zu deiner Datei hinzuzufügen
video::328394037[vimeo]

[NOTE]
.Eigener Wert
====
Die Option *Eigener Wert* erlaubt dir, für ein Datenfeld einen festen Wert zu importieren. Dieser feste Wert ist somit für jeden Datensatz, der durch diesen Sync importiert wird, gleich.
====

[NOTE]
.Mathematische Berechnungen
====
Wähle in der Übersicht der Zuordnung die Quelle *Mathematische Berechnungen*, um Werte der CSV- oder TXT-Datei während des Imports anzupassen. Zur Auswahl stehen die Addition (+++), die Subtraktion (-), die Multiplikation (*), die Division (/) und die Anpassung des Prozentsatzes (+)/(-). Bei dem Wert, der in der CSV- oder TXT-Spalte angepasst wird, muss es sich um eine Zahl handeln.
====

[#1510]
=== Zeilen einer Zuordnung für den Import aktivieren

Im Bereich *Zuordnung* kannst du mit nur einem Klick alle gewählten Zeilen für den Import gesammelt aktivieren und auch wieder deaktivieren. Alternativ kannst du bei jeder Zeile individuell entscheiden, ob sie aktiv oder inaktiv sein soll, sprich, ob sie beim Import berücksichtigt werden soll oder nicht.

[.instruction]
Zeilen für den Import aktivieren:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke auf einen Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Zuordnung*.
. Klicke auf eine Zuordnung. +
→ Die Zuordnung wird geöffnet.
. Hake am linken Rand alle Zeilen an, die du beim Import berücksichtigen möchtest.
. Klicke anschließend oben auf die Schaltfläche *Alle aktivieren* (icon:power-off[role="green"]). Mit Klick auf *Alle deaktivieren* (icon:power-off[role="red"]) kannst du die gewählten Zeilen auch wieder gesammelt deaktivieren.
. Verwende alternativ die Umschaltfläche *Zeile aktivieren* (icon:toggle-off[role="red"]) am rechten Rand, um Zeilen einzeln für den Import zu aktivieren.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[NOTE]
.Ansicht in der Zuordnung
====
Auf der linken Seite der Zuordnung sind die Importdaten aus der CSV- oder TXT-Datei dargestellt, die auf der plentymarkets Seite zugeordnet werden müssen. Auf der rechten Seite sind die plentymarkets Datenfelder aufgeführt. Die Vorschau (icon:eye[role="blue"]) zeigt die ersten 6 Werte der Datei.
====

[TIP]
.Position und Name bearbeiten
====
Mit Klick auf die Schaltfläche *Einstellungen* (icon:cog[role="black"]) in der Zuordnung werden die Felder *Name* und *Position* sichtbar und können angepasst werden.
====

[#1515]
=== Zuordnung aktivieren/deaktivieren

Wenn du mehrere Zuordnungen in einem Sync pflegst, kannst du bestimmte Zuordnungen eines Syncs in der Übersicht der Zuordnungen mit Klick auf die Umschaltfläche in der Spalte *Aktiv/Inaktiv* deaktivieren bzw. aktivieren. Neue Zuordnungen, die du erstellst, sind standardmäßig aktiv.

[#1520]
=== Werte mit der RegEx-Funktion ersetzen

Damit eine CSV- oder TXT-Datei beim Import wie gewünscht berücksichtigt wird, kann die sog. RegEx-Funktion (Regular Expression) genutzt werden. Diese sorgt dafür, dass Daten anhand von Befehlen beim Import manipuliert werden und folglich in der CSV- oder TXT-Datei keine Änderungen mehr vorgenommen werden müssen. Lerne in diesem Video mehr über die Anwendung der RegEx-Funktion.

.Ändere deine Daten mit der ReEx-Funktion
video::329090839[vimeo]

Die zwei folgenden Beispiele sollen den Vorgang näher veranschaulichen.

*Beispiel 1*: +
*Input*: “24.12.2017” +
*Search pattern*: /^(\d+)\.(\d+)\.(\d+)$/ +
*Replace pattern*: $3﹣$2﹣$1 +
*Result*: “2017-12-24”

*Beispiel 2*: +
*Input*: “Mustermann, Max” +
*Search pattern*: /^(\w+), (\w+)$/ +
*Replace pattern*: $2 $1 +
*Result*: “Max Mustermann” +

*Erläuterung der Beispiele*: +
Ganz am Anfang steht das Input. Im ersten Schritt wird im sog. Search pattern das Muster eingefügt, nach dem gesucht werden soll. Anschließend wird dieses im sog. Replace pattern so modifiziert, wie es beim Import ausgegeben werden soll und als Result kommt das gewünschte Muster heraus, das schließlich in der CSV- oder TXT-Datei berücksichtigt wird.

[.instruction]
Werte ersetzen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke auf einen Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Zuordnung*.
. Klicke auf eine Zuordnung. +
→ Die Zuordnung wird geöffnet.
. Wähle im Feld *Quelle* die Option *Regulärer Ausdruck*. +
→ Die Optionen für *Regulärer Ausdruck* werden geöffnet.
. Gib im Feld *Wert* den Spaltennamen der CSV- oder TXT-Datei ein (z.B. Paketnummer, Auftrags-ID etc.).
. Gib im Feld *Suchen* das Search pattern ein.
. Gib im Feld *Ersetzen* das Replace pattern ein.
. *Speichere* (icon:save[role="green"]) die Einstellungen. +
→ Die Datenfelder werden aktualisiert.

[NOTE]
.Infos zu RegEx
====
Weitere Informationen zu RegEx findest du auf link:http://php.net/manual/en/reference.pcre.pattern.syntax.php[dieser^] oder link:https://regexr.com/[dieser^] Seite.
Auf letzterer muss die Einstellung der RegEx engine auf PCRE umgestellt werden. Dies geschieht über das Dropdown-Menü oben rechts, in dem Javascript voreingestellt ist.
====

[#1520]
=== Eigene Zuordnung

Mit der Eigenen Zuordnung können vorhandene Werte einer CSV- oder TXT-Datei auf andere Werte im System gemappt werden. So kann definiert werden, für welche ID welcher Wert importiert werden soll. Zusätzlich kann ein Default-Wert angegeben werden, wenn für einen Wert in der CSV- oder TXT-Datei keine Zuordnung definiert ist. Ist kein Default-Wert angegeben, wird der Originalwert importiert.

[.instruction]
Eigene Zuordnung festlegen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke auf einen Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Zuordnung*.
. Klicke auf eine Zuordnung. +
→ Die Zuordnung wird geöffnet.
. Wähle im Dropdown-Menü des Felds *Quelle* die Option *Eigene Zuordnung*.
. Fülle die Felder aus. Beachte dazu die Erläuterungen in <<tabelle-eigene-zuordnung>>.
. *Speichere* (icon:save[role="green"]) die Einstellungen.

[[tabelle-eigene-zuordnung]]
.Eigene Zuordnung
[cols="1,3"]
|====
|Feld |Einstellung

|Typ
|Name der CSV- oder TXT-Spalte (z.B. Lieferland)

|Standardwert
|Wert, wenn keine Zuordnung gefunden wurde (z.B. 1)

|Von
|Ursprungswert in der CSV- oder TXT-Datei (z.B. DE für Deutschland)

|Zu
|Wert, auf den der Ursprungswert gemappt werden soll (z.B. 1 für DE, 10 für GB etc.)
|====

[#1530]
=== Importdatei durch die Eigene Zuordnung manipulieren

Im folgenden Abschnitt soll die Verwendung der Eigenen Zuordnung am Beispiel von *Versandprofil aktivieren* demonstriert werden. +
Voraussetzung für diese Vorgehensweise ist, dass bereits ein Artikel/eine Variante sowie ein Versandprofil vorhanden ist. Das folgende Video bietet dir eine Einfürhung in die Funktionsweise der Eigenen Zuordnung.

.Nutze die Eigene Zuordnung zum Austauschen von Informationen
video::328394174[vimeo]

[[bild-daten-importieren]]
.Versandprofil
image::daten/daten-importieren/assets/versandprofil.png[]

Um einen Artikel/eine Variante mit einem Versandprofil zu verknüpfen, wird die ID benötigt. Denn allein mit dem Namen des Versandprofils, der in der Importdatei steht, kann keine Verknüpfung erstellt werden.

[[bild-daten-importieren]]
.Artikel-ID
image::daten/daten-importieren/assets/artikel-id.png[]

Verwende dafür die eigene Zuordnung in ElasticSync, denn dort werden die Daten während des Imports manipuliert. Wähle dazu als Quelle der Importdaten den Wert *Eigene Zuordnung*.

[[bild-daten-importieren]]
.Eigene Zuordnung
image::daten/daten-importieren/assets/eigene-zuordnung.png[]

Wähle bei *Typ* die Spalte aus der Importdatei. In diesem Fall ist es die Spalte *Versandprofil*.

[[bild-daten-importieren]]
.Spalte der Importdatei wählen
image::daten/daten-importieren/assets/typ.png[]

Bestimme nun, welcher Wert in der Importdatei zu welchem Wert geändert werden soll, um den Import erfolgreich durchführen zu können. In diesem Fall soll DPD zur ID des Versandprofils (hier ID 7) geändert werden. Das Gleiche kannst du auch für mehrere Versandprofile tun, indem du noch weitere eigene Zuordnungen hinzufügst.
Führe anschließend den Import aus. Das Versandprofil wird verknüpft.

[[bild-daten-importieren]]
.Wert bestimmen
image::daten/daten-importieren/assets/wert-bestimmen.png[]

Die eigene Zuordnung eignet sich für viele weitere Fälle. Dies gilt insbesondere dort, wo interne IDs von plentymarkets eine Rolle spielen, wie z.B. bei Merkmalnamen, Artikelmarkierungen, Zahlungsmethoden, Länder/Staaten ISO Codes usw.

[#1600]
== Importdaten filtern

Mithilfe von Filtern kannst du die Daten eingrenzen, die importiert werden. Die Filter findest du im Bereich *Zuordnung*.

[NOTE]
.Mehrere Filter sind durch Und verknüpft
====
Wenn du mehrere Filter verwendest, werden nur Datensätze importiert, auf die alle Filter zutreffen. Es handelt sich also um eine Und-Verknüpfung der Filter.
====

[.instruction]
Filter hinzufügen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke in der Sync-Übersicht auf einen Sync. +
→ Die Einstellungen werden geöffnet.
. Wechsele in das Tab *Zuordnung*.
. Klicke auf eine *Zuordnung*. +
→ Die Zuordnung wird geöffnet.
. Klicke in der Symbolleiste auf *Filter* (icon:filter[role="yellow"]).
. Wähle die Spalte aus deiner Datei, die du filtern möchtest.
. Wähle einen Operator.
. Gib einen Wert ein.
. Klicke auf *Filter hinzufügen* (icon:plus-square[role="green"]). +
→ Der Filter wird gespeichert.
. Füge bei Bedarf weitere Filter hinzu. +
→ Nur die Daten, auf die alle hinzugefügten Filter zutreffen, werden importiert.


//[#1620]
//== Report zum Import eines Syncs

//In der Übersicht eines Syncs steht ein Report zur Verfügung. Dieser zeigt die importierten Zeilen des Syncs und die Erfolgs- und Fehlermeldungen an, die mit Klick auf den Eintrag in der Spalte *Nachricht* eingesehen werden können. Verwende den Filter, um bestimmte Sync-Daten abzurufen.

[#1625]
== Erfolgs- und Fehlermeldungen von Syncs einsehen

Im Menü *Daten » Log* können die Erfolgs- und Fehlermeldungen von Syncs eingesehen werden. Um gezielt nach Meldungen zu einem bestimmten Sync zu suchen, als Referenztyp *elasticSyncId* oder *elasticSyncName* wählen und den entsprechenden Referenzwert eingeben. Die konkrete Erfolgs- oder Fehlermeldung kann der Spalte *Nachricht* entnommen werden.

[#1630]
== Sync kopieren

Du kannst Syncs einzeln oder mehrere gleichzeitig kopieren. So kannst du bereits gut konfigurierte Syncs nutzen, um schnell einen neuen Sync anzulegen.

[.instruction]
Sync kopieren:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Markiere einen oder mehrere Syncs.
. Klicke auf *Sync kopieren*. +
→ Der Sync wurde kopiert. Einem kopierten Sync wird *(copy)* hinzugefügt.

[#1640]
== Sync importieren und exportieren

Syncs können importiert und exportiert werden. So kannst du sowohl Syncs lokal sichern als auch Syncs von anderen Nutzern importieren.
Dieses Video zeigt dir, wie du beim Import von Daten Zeit sparst, indem du vorkonfigurierte Sync-Vorlagen nutzt.

.Im- und exportiere deine Syncs
video::342189758[vimeo]
[.instruction]
Sync importieren und exportieren:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Markiere einen oder mehrere Syncs.
. Klicke auf *Sync exportieren* (icon:download[role="purple"]). +
→ Der Sync wird automatisch heruntergeladen.
. Klicke auf *Sync importieren* (icon:upload[role="purple"]). +
→ Die Übersicht der Dateien wird geöffnet.
. Klicke auf *Datei hochladen* (icon:upload[role="purple"]) und wähle eine Datei.
. Markiere die Datei, die du hochladen möchtest und klicke auf *Wählen*. +
→ Es wird abgefragt, ob der Sync importiert werden soll.
. Klicke auf *Ok*, um die Abfrage zu bestätigen. +
→ Es erscheint die Meldung, dass der Import aus einem anderen Mandanten stammt. +
→ Der Sync wurde erfolgreich importiert.


[NOTE]
.Syncs aus einem anderen plentymarkets System importieren
====
Wenn du Syncs aus einem anderen plentymarkets System importierst, musst du deinen Abgleich und die Zuordnung anpassen. Es können nur *.json* Dateien importiert werden.
====

[NOTE]
.Syncs importieren und aktualisieren
====
Wenn du einen Sync importieren und aktualisieren möchtest, müssen eine Zuordnung und ein Abgleich gesetzt sein. Ansonsten ist es nicht möglich, einen Sync zu testen oder auszuführen. Um den Sync speichern zu können, muss in der Zuordnung ein Datenfeld aktiviert sein. +
Zum Importieren eines Syncs genügt die Zuordnung allein.
====

[#1650]
== Dateien schnell und einfach hochladen

Um Dateien schnell und einfach hochzuladen, kannst du die Schaltfläche in der Spalte *Dateiname* verwenden.

[.instruction]
Dateien schnell und einfach hochladen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke in der Spalte *Dateiname* auf die Schaltfläche *Datei hochladen* (icon:upload[role="purple"]). +
→ Deine Dateien werden geöffnet.
. Wähle eine Datei und klicke auf *Öffnen*. +
→ Die Datei wird hochgeladen und der Dateiname wird in der Spalte angezeigt. Nach Ausführen des Syncs verschwindet der Dateiname wieder.

[#1700]
== Sync testen und Daten importieren

Du kannst einen Sync testen und ausführen. Das Testen erlaubt es dir, schnell festzustellen, ob deine Datei korrekt importiert werden kann.

[NOTE]
.Syncs testen
====
Wenn du *Sync testen* wählst, werden nur die ersten zehn Zeilen der Importdatei importiert.
====

[#1710]
== Abarbeitung von Jobs in der Queue

Die Queue sorgt dafür, dass auch große Datenmengen importiert werden können. Noch vor dem Import wird die Importdatei in Pakete zerlegt und anschließend in sogenannten Jobs abgearbeitet. Ein Job besteht aus 750 Zeilen einer CSV- oder TXT-Datei. Jedoch werden auch Importdateien, die weniger als 750 Zeilen enthalten, zu einem Job. Wird ein Sync gestartet, wird die Datei in die entsprechenden Jobs aufgeteilt und in die Queue eingereiht. In der Queue werden neue Jobs ständig abgerufen und die Syncs werden abgearbeitet. Dabei gibt es zwei verschiedene Status. Der Status *Offene Jobs* bedeutet, dass es Jobs gibt, die sich noch in der Queue befinden und darauf warten, abgearbeitet zu werden. *Abgeschlossene Jobs* hingegen wurden bereits bearbeitet und die Daten dementsprechend importiert.

[#1715]
== Status von Syncs einsehen

Die Status-Übersicht der Syncs bietet einen Überblick über den aktuellen Fortschritt von Sync-Jobs und zeigt Details zu eventuell aufgetretenen Fehlern an.

[.instruction]
Status von Syncs einsehen:

. Öffne das Menü *Daten » Import*. +
→ Die Sync-Übersicht wird geöffnet.
. Klicke auf die Schaltfläche *Status* (icon:bars[role="yellow"]). +
→ Die Status-Übersicht wird geöffnet. +
icon:map-signs[] *_Oder:_* Öffne das Menü *Daten » ElasticSync: Status*. +
→ Die Status-Übersicht wird geöffnet.

[[tabelle-sync-status]]
.Sync-Status
[cols="1,3"]
|====
|*Einstellung* |*Erläuterung*

|*Sync-ID*
|ID des Syncs

|*Name*
|Name des Syncs

|*Fortschritt*
|Fortschritt der Sync-Jobs. Sobald alle Sync-Jobs abgeschlossen sind, wird das Datum und die Endzeit angezeigt.

|*Fehler*
|In den Sync-Jobs aufgetretene Fehler

|*Importierte Zeilen*
|Anzahl der Zeilen, die aus der CSV- oder TXT-Datei importiert wurden

|*Zeilen insgesamt*
|Gesamtanzahl der Zeilen in der CSV- oder TXT-Datei

|*Startzeit*
|Startzeit des Syncs
|====

[NOTE]
.Abbruch bei zu hoher Fehleranzahl
====
Treten bei der Verarbeitung der Sync-Jobs zu viele Fehler auf, wird der Vorgang abgebrochen und es erscheint eine Fehlermeldung.
====

=== Nach Syncs filtern

Mit dem Filter in der Status-Übersicht kannst du nach Syncs der letzten 7 Tage filtern und so den Status von bestimmten Syncs einsehen.

[[tabelle-filteroptionen]]
.Filteroptionen
[cols="1,3"]
|====
|*Einstellung* |*Erläuterung*

|*ID*
|ID des Syncs

|*Name*
|Name des Syncs

|*Status*
|Aktueller Status des Syncs. Hier kannst du zwischen *In Arbeit* und *Abgeschlossen* wählen.

|*Startdatum von*
|Datum wählen, ab dem gefiltert werden soll.

|*Stunden*
|Uhrzeit wählen.

|*Minuten*
|Uhrzeit wählen.

|*Startdatum bis*
|Datum wählen, bis zu dem gefiltert werden soll.

|*Stunden*
|Uhrzeit wählen.

|*Minuten*
|Uhrzeit wählen.
|====

=== Detailansicht zu Fehlern eines Syncs

Mit Klick auf die Zeile eines Syncs innerhalb der Status-Übersicht gelangst du in die Detailansicht, in der nähere Informationen zu eventuell aufgetretenen Fehlern aufgeführt sind. Mit Klick auf die Zeile eines Fehlers in der Detailansicht öffnet sich wiederum ein Fenster, in dem du den Namen des Spaltenkopfes, die Rohdaten sowie die konkrete Fehlermeldung einsehen kannst.

[[tabelle-eigene-zuordnung]]
.Details zu Sync-Status
[cols="1,3"]
|====
|*Einstellung* |*Erläuterung*

|*Zeile*
|Zeile, in der der Fehler aufgetreten ist

|*Spaltenname*
|Name der Spalte, in der der Fehler aufgetreten ist

|*Wert*
|Wert der Importdatei

|*Fehler*
|Konkrete Beschreibung des aufgetretenen Fehlers

|*Importierte Zeilen*
|Anzahl der Zeilen, die aus der CSV- oder TXT-Datei importiert wurden

|*Rohdaten*
|Rohdaten des Fehlers
|====

[#1730]
== Backups von Syncs einspielen

Wenn du Sync-Daten auf einen früheren Stand zurücksetzen oder gelöschte Sync-Daten wiederherstellen möchtest, kannst du dies über die Backup-Funktion tun.

[.instruction]
Backups von Syncs einspielen:

. Öffne das Menü *Einrichtung » Einstellungen » Daten » Backup*. +
→ Die Backup-Übersicht wird geöffnet.
. Klicke in der Zeile des Backups, das du einspielen möchtest, rechts auf *Backup einspielen* (icon:upload[role="purple"]).
. Wähle oben *Datenbank teilweise importieren* und setze einen Haken bei *ElasticSync*.
. Klicke auf *Backup einspielen*. +
→ Das Backup wird eingespielt.
