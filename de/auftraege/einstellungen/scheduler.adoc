= Scheduler
:lang: de
include::{includedir}/_header.adoc[]
:keywords: Scheduler, Einstellungen, Abo, ABO
:position: 140

**plentymarkets » Einstellungen » Aufträge » Scheduler**

toc::[]
== Allgemeine Informationen zum Scheduler

Der Scheduler ist ein Abonnement-Modul (Abo-Aufträge). Dieses Modul ermöglicht es Ihren Kunden, bestimmte Artikel in Ihrem Webshop im Abonnement zu kaufen. Das Modul ist eine <<start/plentymarkets-konto/service-center/vertrag#2-5, **zusätzliche Erweiterung** >> und nur in Ihrem plentymarkets-System sichtbar, wenn Sie es gebucht haben. Im Menü **Einstellungen » Aufträge » Scheduler** konfigurieren Sie das Abo-Modul für Ihren Webshop. Nachdem Sie das Modul konfiguriert haben, finden Sie eine Übersicht Ihrer Abonnements unter <<auftraege/scheduler/scheduler-auftraege#, **Aufträge » Scheduler » Scheduler-Aufträge**  >>.

[IMPORTANT]
.Nicht für Artikel mit Bestellmerkmalen
====
Das Abo-Modul funktioniert nicht bei Artikeln mit **<<artikel/artikel-verwalten#480., Bestellmerkmalen >>**.
====

== Grundlegende Einstellungen vornehmen

Legen Sie zuerst fest, welche grundlegenden Einstellungen für das Modul gelten sollen.

image::auftraege/einstellungen/assets/Einstellungen-Auftraege-Scheduler-01.png[]

__Bild 1: Einstellungen des Abo-Moduls__

[.instruction]
Grundlegende Einstellungen konfigurieren:

. Öffnen Sie das Menü **Einstellungen » Aufträge » Scheduler**.
. Nehmen Sie die Einstellungen gemäß Tabelle 1 vor.
. Klicken Sie auf **Speichern**, um die Einstellung zu sichern.

Die folgende Tabelle erläutert die Einstellungen im Menü **Einstellungen » Aufträge » Scheduler**:

[cols="a,a"]
|====
|Einstellung
|Erläuterung

|**Intervalle**
|Die Intervalle für die Abo-Funktion wählen. Mit Strg+C bzw. cmd+C ist Mehrfachauswahl möglich. Die hier gewählten Intervalle stehen Kunden beim Artikel im Webshop zur Auswahl zur Verfügung. So kann der Kunde bei der Bestellung wählen, in welchen Zeitabständen er den Artikel erhalten möchte. Damit die Optionen im Webshop angezeigt werden, muss eine entsprechende Template-Variable eingefügt werden (Kapitel 4).

|**Anzahl der Aufträge**
|Gibt an, wie oft das Abonnement abgewickelt werden soll. Die Optionen wählen, die Kunden zur Auswahl zur Verfügung stehen sollen. Mit Strg+C bzw. cmd+C ist Mehrfachauswahl möglich. Die hier gewählten Werte stehen Kunden beim Artikel im Webshop zur Auswahl zur Verfügung. So kann der Kunde bei der Bestellung wählen, wie oft er den abonnierten Artikel erhalten möchte. Damit die Optionen im Webshop angezeigt werden, muss eine enstprechende Template-Variable eingefügt werden (Kapitel 4).

|**Erlaubte Zahlungsarten**
|Die Zahlungsarten wählen, die für die Abo-Funktion zur Verfügung stehen sollen. Mit Strg+C bzw. cmd+C ist Mehrfachauswahl möglich.

|**Änderungen an Artikeln**
|Wählen, ob Änderungen der Bestelloptionen, z.B. die Menge, im Bestellvorgang erlaubt sein sollen.

|**Artikelfaktor pro Intervall**
|Wählen, in welcher Anzahl ein Artikel für das Intervall geliefert werden soll. Diese Angabe ist optional und kann verwendet werden, um Mindermengen auszugleichen. Wenn eine Artikelmenge z.B. nur für eine Woche ausreicht und der Kunde ein Intervall von zwei Wochen wählt, kann für diesen Fall der Artikelfaktor 2 eingetragen werden. Vorausgesetzt natürlich, dass der Kunde damit einverstanden ist, die korrigierte Menge zu erhalten.

|**Mindest-Laufzeit**
|Eine Mindest-Laufzeit für die Abo-Funktion wählen. Unter dieser Laufzeit ist ein Abonnement nicht möglich. Die Mindest-Laufzeit ist optional.

|**Maximale Laufzeit**
|Die maximale Laufzeit für ein Abonnement wählen. Die maximale Laufzeit ist optional.

|**Auftragsherkunft für generierte Aufträge**
|Die Auftragsherkunft für Abonnements festlegen.
|====

__Tab. 1: Erläuterungen zu den Einstellungen des Abo-Moduls__

== Einstellungen für Abo-Artikel vornehmen

Nehmen Sie zunächst Einstellungen für Ihre Abo-Artikel vor. Zunächst ordnen Sie die Abo-Artikel in Ihren Artikelbestand ein. Dann aktivieren Sie die Abo-Funktion. Gehen Sie dazu wie nachfolgendend beschrieben vor.

=== Abo-Artikel kategorisieren

Sie haben verschiedene Möglichkeiten, Abo-Artikel in Ihren Artikelbestand einzuordnen. Empfehlenswert ist es, eine eigene <<artikel/kategorien/kategorien-bearbeiten#, **Kategorie**  >> für Abo-Artikel anzulegen und die gewünschten Artikel mit dieser Kategorie zu verknüpfen.
//  Eine weitere Möglichkeit ist, die Artikel nochmals als <strong>Artikelpakete</strong> anzulegen, damit sie mit dem Hauptartikel verknüpft sind. Dies ist wichtig für die Bestandspflege.

=== Abo-Funktion aktivieren

Die Abo-Funktion aktivieren Sie zuerst global und dann für jeden Artikel separat. Die globale Aktivierung ermöglicht es Kunden, grundsätzlich Bestellungen im Abonnement aufzugeben. Die Aktivierung für einzelne Artikel bestimmt, welche Artikel Kunden im Abonnement bestellen dürfen. Gehen Sie wie nachfolgendend beschrieben vor, um die Abo-Funktion global zu aktivieren.

[.instruction]
Abo-Funktion global aktivieren:

. Öffnen Sie das Menü **<<mandant-shop/standard/mein-konto/grundeinstellungen#, Einstellungen » Mandant (Shop) » Standard » Mein-Konto » Grundeinstellungen  >>**.
. Wählen Sie für die Option **Abonnements** die Einstellung **aktiviert**.
. Klicken Sie auf **Speichern**, um die Einstellung zu sichern.

Aktivieren Sie nun die Abo-Funktion für jeden Artikel, den Ihre Kunden im Abonnement bestellen dürfen sollen.

[.instruction]
Abo-Funktion des Abo-Artikels aktivieren:

. Öffnen Sie das Menü **Artikel » Artikel bearbeiten**.
. Öffnen Sie den gewünschten Artikel.
. Öffnen Sie die gewünschte Variante
. Klicken Sie auf das Tab **<<artikel/artikel-verwalten#40., Einstellungen >>** der Variante.
. Wählen Sie für die Funktion **Abonnement** die Einstellung **Ja**.
. **Speichern** Sie die Einstellungen.

[IMPORTANT]
.Abo-Funktion deaktivieren
====
Wenn Sie die Abo-Funktion nicht mehr nutzen möchten, stellen Sie die globale Funktion auf **deaktiviert** und die Funktion beim Artikel auf **Nein**. Entfernen Sie den Code aus dem Layout Ihres Webshops (Kapitel 4).
====

== Template-Variablen in das Webshop-Layout einfügen

Damit Kunden in Ihrem Webshop die Abo-Funktionen wählen können, müssen Sie zunächst Template-Variablen und Code in das Layout Ihres Webshops einfügen.

[.instruction]
Template-Variablen einfügen:

. Öffnen Sie das Menü **CMS » Webdesign » Layout » ItemView » ItemViewSingleItem**.
. Fügen Sie die Template-Variablen und Code (Beispiel weiter unten) zwischen **$FormOpenOrder** und **$FormCloseOrder** ein.
. Klicken Sie auf **Speichern**, um die Einstellungen zu sichern.

Die folgende Tabelle erläutert die Template-Variablen zum Einfügen der Abo-Funktion im Webshop:

[cols="a,a"]
|====
|Template-Variable
|Funktion

|**$IsSubscriptionItem**
|Gibt einen Boolschen Wert zurück (TRUE oder FALSE, je nach Einstellung am Artikel). Diese Template-Variable für eine IF-Abfrage im Layout verwenden, um festzustellen, ob ein Artikel ein Abo-Artikel ist oder nicht. Ansonsten wird die Abo-Funktion bei allen Artikeln angezeigt und nicht nur bei den tatsächlichen Abo-Artikeln. Ein Beispiel mit IF-Abfrage befindet sich unter der Tabelle.

|**$SchedulerDateSelector**
|Fügt eine Kalender-Auswahlbox ein, damit Kunden das Datum der ersten Lieferung wählen können.

|**$SchedulerInterval**
|Fügt ein Dropdown-Menü zur Auswahl des Intervalls für das Abonnement ein. Es stehen die Intervalle zur Verfügung, die in den Einstellungen (Kapitel 2) gespeichert wurden.

|**$SchedulerRepeating**
|Fügt ein Dropdown-Menü zur Auswahl der Anzahl der Lieferungen ein. Es stehen die Optionen zur Anzahl der Aufträge zur Verfügung, die in den Einstellungen (Kapitel 2) gespeichert wurden.
|====

__Tab. 2: Erläuterungen zu den Template-Variablen des Abo-Moduls__

Der folgende Code ist ein Beispiel für die Anordnung und Bezeichnung der Template-Variablen:

[cols=""]
|====
|
[source,xml]
----
{% if $IsSubscriptionItem %}
<!--  Box Filter -->
<div class="ff01_pagenav" style="margin-top:5px;"<h2Abonnement</h2></div>
Erste Lieferung: $SchedulerDateSelector<br />
Intervall: $SchedulerInterval<br />
Lieferungen: $SchedulerRepeating<br />
<!--  End Box Filter -->
{% endif %}

----

|====

== Ansicht der Abo-Funktion im Webshop

Nachdem Sie die auf dieser Seite beschriebenen Einstellungen konfiguriert haben, werden Abo-Artikel in Ihrem Webshop angezeigt. Käufer können den Zeitpunkt für die erste Lieferung, das Intervall sowie die Anzahl der Lieferungen festlegen, bevor sie den Artikel in den Warenkorb legen (Bild 2). Im Bestellvorgang können diese Einstellungen dann noch geändert werden, bevor die Bestellung abgeschickt wird. Das Code-Beispiel in Kapitel 4 wird im Webshop folgendermaßen dargestellt:

image::auftraege/einstellungen/assets/Einstellungen-Auftraege-Scheduler-02.png[]

__Bild 2: Abo-Funktion: Umsetzung der Template-Variablen im Webshop__

