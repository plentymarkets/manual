= Maßeingabe
:lang: de
// include::{includedir}/_header.adoc[]
:keywords: Artikel nach Maß bestellen
:position: 10

*System » Artikel » Freitextfelder*

== Allgemeines zur Maßeingabe

In der Artikelansicht *$ItemViewSingleItem* besteht für den Käufer die Möglichkeit, durch die Eingabe von Breiten- und/oder Längenangaben flächige Produkte auf den Quadratmillimeter genau zu bestellen. Dabei wird der Preis automatisch berechnet.

[TIP]
.Tipp
====
Der betreffende Artikel muss im Webshop sichtbar sein.
====

== Artikel für Maßeingabe konfigurieren

Die Konfiguration besteht aus drei Schritten, die im Folgenden beschrieben werden.

=== Freitextfeld anlegen

Legen Sie zunächst wie im Folgenden beschrieben ein Freitextfeld an.

image::omni-channel/online-shop/_cms/webdesign/webdesign-bearbeiten/itemview/assets/DE-CMS-Webdesign-IemView-Masseingabe-01.png[]

__Bild 1: Parameter des Freitextfeldes *Maßeingabe*__

[.instruction]
Freitextfeld anlegen:

. Öffnen Sie das Menü *System » Artikel » Freitextfelder*.
. Tragen Sie in ein freies Freitextfeld die Bezeichnung *Maßeingabe* ein.
. Wählen Sie unter *Datentyp* die Einstellung *kleine Zahl (-127 bis 127)*.
. Tragen Sie unter *Zeichenlänge* die Ziffer *1* ein.
. *Speichern* Sie die Einstellungen.

In das daraus generierte Freitextfeld tragen Sie später bei den Artikeln, die eine Maßeingabe seitens des Käufers erlauben sollen, eine *Ziffer* ein (siehe Kapitel 2.3 Ziffer eintragen).

[IMPORTANT]
.Freitextfeld am nächsten Tag verfügbar
====
Das Freitextfeld steht erst am folgenden Tag in der jeweiligen Artikelbearbeitung zur Verfügung.
====

=== Maßangaben eintragen

Nun konfigurieren Sie die Maßangaben des Artikels. Das sind die Optionen, die für die Maßeingabe benötigt werden.

image::omni-channel/online-shop/_cms/webdesign/webdesign-bearbeiten/itemview/assets/DE-CMS-Webdesign-IemView-Masseingabe-02.png[]

__Bild 2: Parameter der Artikelbearbeitung__

[.instruction]
Maßangaben beim Artikel konfigurieren:

. Öffnen Sie das Bearbeitungsmenü eines Artikels im Tab *Base*. +
→ Dort finden Sie die Felder *Breite*, *Länge* und *Höhe* (Bild 2).
. Geben Sie die maximalen Werte für die Preisberechnung und die Dimensionen des Artikels gemäß der Erläuterungen in Tabelle 1 ein. +
→ Am Beispielbild und der Einheit *Quadratzentimeter* sind somit für die Breite *500 cm* und für die Länge *200 cm* als maximale Werte eingetragen.

Die folgende Tabelle erläutert die Parameter für die Maßangaben im Tab *Base* eines Artikels:

.Maßangaben für Artikel bestimmen
[cols="a,a"]
|====
|Eintrag |Erläuterung

|*Einheit*
|Einheit eintragen, im Beispiel Quadratzentimeter. Den wichtigen Hinweis unter der Tabelle beachten.

|*Inhalt*
|Menge eintragen, auf die sich die Preisberechnung beziehen soll, im Beispiel pro 100 Quadratzentimeter.

|*Länge*
|Maximal bestellbare Länge eintragen.

|*Breite*
|Maximal bestellbare Breite eintragen.
|====

[WARNING]
.Eingabegenauigkeit beachten: Nur ganze Zahlen möglich!
====
Für beide Felder (Breite und Länge) sind nur ganze Zahlen als Eingabe erlaubt. Deshalb hängen die Möglichkeiten bezüglich der Eingabegenauigkeit des Käufers davon ab, welche Einheit Sie für den Artikel gewählt haben. Bei der Einheit Quadratmeter wäre eine Bestellung eines Stoffes von 2,5 m Breite und 4,3 m Länge nicht möglich! Für diesen Fall müssten Sie Quadratzentimeter als Einheit hinterlegen und entsprechend den Wert unter *Inhalt* in Relation zum hinterlegten *Preis* anpassen. Dann kann der Käufer für die Breite 250 und die Länge 430 eingeben. Entsprechend müssen Sie die Einheit in Quadratmillimeter ändern, wenn noch kleinere Maßangaben nötig sind.
====

=== Ziffer eintragen

Hinterlegen Sie in dem Freitextfeld eine Ziffer, um zu bestimmen, was dem Kunden im Bestellvorgang angezeigt wird.

[.instruction]
Ziffer für Eingabefelder eintragen:

. Klicken Sie auf das Tab *Felder* in der jeweiligen Artikelbearbeitung. +
→ Das Freitextfeld *Maßeingabe* (siehe Freitextfeld) wird hier angezeigt.
. Geben Sie in dieses Freitextfeld eine *Ziffer* zur Steuerung der Anzeige der Eingabefelder im Layout ein. +
Folgende Definition gilt für unsere Beispielkonfiguration: +
*1*: Es soll nur das Feld für die Eingabe der Breite angezeigt werden. +
*2*: Es soll nur das Feld für die Eingabe der Länge angezeigt werden. +
*3*: Es sollen beide Felder angezeigt werden.
. *Speichern* Sie die Einstellungen.

[TIP]
.Tipp
====
Das Setzen der Ziffer für das Freitextfeld kann in der Artikelsuche über die *Gruppenfunktion* für mehrere Artikel zugleich erfolgen.
====

[IMPORTANT]
.Datenaustausch
====
Die Angaben für Breite, Länge und Höhe können sowohl über den dynamischen Import ins System importiert werden (Datenformate *Item* und *ItemPrice*), als auch über die plentymarkets-API und das Format *ArticleBasicXML*.
====

== Design für Maßeingabe konfigurieren

Nun tragen Sie an einer passenden Position im *CMS*, z. B. unter dem Code für das Eingabefeld der *Menge*, den HTML-Code ein.

[.instruction]
HTML-Code einfügen:

. Öffnen Sie das Menü *CMS » Webdesign » Ordner: Layout » Ordner: ItemView*.
. Wählen Sie das Template *ItemViewSingleItem* aus.
. Fügen Sie den folgenden HTML-Code ein.
. *Speichern* Sie die Einstellungen.

[source,xml]

----
{% if $Free[10]>0 %}
<table>
<tbody>
{% if $Free[10]==1 %}
<tr>
<th>Breite (nur)</th>
<td>$InputWidth $InputMeasureUnit <input id="input_length" name="input_length" value="$Length" class="PlentyOrder_InputLength" type="hidden" /></td>
</tr>
{% endif %}
{% if $Free[10]==2 %}
<tr>
<th>Länge (nur)</th>
<td>$InputLength $InputMeasureUnit <input id="input_width" name="input_width" value="$Width" class="PlentyOrder_InputWidth" type="hidden" /></td>
</tr>
{% endif %}
{% if $Free[10]==3 %}
<tr>
<th>Breite</th>
<td>$InputWidth $InputMeasureUnit</td>
</tr>
<tr>
<th>Länge</th>
<td>$InputLength $InputMeasureUnit</td>
</tr>
{% endif %}
</tbody>
</table>
{% endif %}

----


[WARNING]
.Ziffer ersetzen
====
Ersetzen Sie bei den Template-Variablen *$Free[10]* in obigem Code die Ziffer 10 ggf. durch die für Ihre Konfiguration zutreffende Ziffer Ihres Freitextfeldes.
====

Hier werden folgende neue *Template-Variablen* benutzt, die es nur in der Ansicht *ItemViewSingleItem* gibt:

* *$InputWidth*: Erzeugt das Eingabeformular für die Breite mit der CSS-Klasse *PlentyOrder_InputWidth*
* *$InputLength*: Erzeugt das Eingabeformular für die Länge mit der CSS-Klasse *PlentyOrder_InputLength*
* *$InputMeasureUnit*: Gibt die Einheit für die Eingabe zurück. Die Werte können 'm', 'cm' oder 'mm' sein, abhänging von der Einheit, die am Artikelpreis definiert wurde (am obigen Beispiel ist die Einheit am Artikelpreis Quadratzentimeter, also liefert$InputMeasureUnit'cm').

Neu sind auch die Template-Variablen *$Width* und *$Length* für die im Artikel angegebenen Werte *Breite* und *Länge*.

Der generierte HTML-Code sieht im Browser für die Beispielkonfiguration für die Ziffer 3 im Freitextfeld folgendermaßen aus:

[source,xml]

----
<table>
<tbody>
<tr>
<th>Breite</th>
<td><input class="PlentyOrder_InputWidth" id="input_width" name="input_width" type="text" value="0" /> cm</td>
</tr>
<tr>
<th>Länge</th>
<td><input class="PlentyOrder_InputLength" id="input_length" name="input_length" type="text" value="0" /> cm</td>
</tr>
</tbody>
</table>

----


Bild 3 zeigt die daraus generierte Ansicht in Ihrem Webshop:

image::omni-channel/online-shop/_cms/webdesign/webdesign-bearbeiten/itemview/assets/DE-CMS-Webdesign-IemView-Masseingabe-03.png[]

__Bild 3: Eingabefelder für Maßeingabe im Webshop__

== Eingabefeld verbergen

[WARNING]
.Wichtig für verborgene Felder
====
Wenn Sie nur ein Eingabefeld benutzen möchten (nur Breite oder nur Länge), so muss die andere Dimension trotzdem angegeben werden, damit die *Flächen* und damit auch die *Preise* korrekt berechnet werden können. Es reicht dabei, die Hidden-Felder wie am nachfolgenden Beispiel-Code zu hinterlegen (vgl. Bild 3, Code für Ziffer 1 und 2).
====

Wenn z. B. nur die *Breite* eingegeben werden soll, weil Ihr Produkt eine feste Länge hat, die nicht unterteilt werden kann oder soll, so muss die Länge folgendermaßen verborgen hinterlegt werden:

[source,xml]

----
<input class="PlentyOrder_InputLength" id="input_length" name="input_length" type="hidden" value="$Length" />

----


[IMPORTANT]
.Variablen-Funktion
====
Die Template-Variable *$Length* gibt automatisch die unter *Länge* in den Artikeldaten hinterlegte Länge aus. +
Das selbe gilt unter Eingabe der Template-Variable *$Width* im umgekehrten Fall, dass die Breite festgelegt ist und nur die Länge eingegeben werden soll.
====
