= Old online store: Paymorrow
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Paymorrow, payment method
:description: Payment in plentymarkets: Set up the interface to Paymorrow in your plentymarkets system.
:position: 160
:url: payment/payment-providers/paymorrow

[IMPORTANT]
.Integration only for Callisto online stores
====
This page only contains instructions for integrating *Paymorrow* in Callisto online stores. The following instructions are not valid for Ceres online stores!
====

Paymorrow is a specialised service provider, which processes payment on invoice for online sellers. Paymorrow makes fair eCommerce with payment on invoice possible for both parties. Customers pay the amount to Paymorrow. They have a payment deadline of 4 weeks. Paymorrow will transfer the accrued payments to the dealer's account in particular intervals (e.g. weekly). Payment failures are insured and will be replaced by Paymorrow's insurance company in a timely manner. Paymorrow is only available in German.

[#10]
==  Important notes

You need to have an <<basics/admin-tasks/plentymarkets-account#ssl-certificate, SSL certificate>> in order to correctly use the payment method.

[IMPORTANT]
.Mandatory fields for manual order generation
====
The fields *Telephone number* and *Date of birth* are mandatory when generating orders manually. Check to make sure that information was saved in these fields when creating an order. Furthermore, the *names* have to be written out completely, abbreviations are not permitted. Otherwise, the check carried out by Paymorrow will fail.
====

[#20]
==  Registering with Paymorrow

In order to set up Paymorrow in plentymarkets, you will need an acceptance contract with Paymorrow and the necessary access data. In the Paymorrow link:http://www.paymorrow.de/onlinehaendler/integration/index.php[seller area^], you will find the necessary instructions related to the contract.

[#30]
==  Setting up Paymorrow for Callisto

Proceed as described below to set up the interface to Paymorrow for your Callisto online store in plentymarkets.

If needed, request a test account from link:mailto:technik@paymorrow.de[technik@paymorrow.de] and carry out a few test transactions before you set up the access data. Paymorrow provides a German *link:https://www.plentymarkets.co.uk/documents/category/2611/Abnahmeprotokoll-paymorrow.pdf[PDF document^]* for this procedure, which you have to fill out in order to receive the access data. The procedure is also described in this document. For the test mode, authentication is done via a separate <<payment/payment-providers/paymorrow#40, RSA certificate registration>>.

[.instruction]
Setting up the interface to Paymorrow:

. Go to *Setup » Orders » Payment » Methods*.
. Place a check mark next to the setting *Also show inactive*.
. Open the folder *DE*.
.  Click on *Paymorrow V2*. +
→ The *Interface* tab will open.
.  Expand the client.
.  Carry out the settings as desired. Pay attention to the information given in <<table-interface-setup-paymorrow>>.
. *Save* the settings.

[[table-interface-setup-paymorrow]]
.setting up the interface to Paymorrow
[cols="1,3"]
|====
| Setting | Explanation

|*Merchant ID*
| Enter the merchant ID that you received from Paymorrow.

|*Test merchant ID*
| Enter the merchant ID for the test mode that you received from Paymorrow.

|*Activate iframe*
| Activate to use the Iframe.

|*Minimum order value*
| Enter a minimum limit for having invoice as the payment method with Paymorrow (optional). Use the decimal point as a separator for decimal numbers.

|*Maximum order value*
| Enter a maximum limit for having invoice as the payment method with Paymorrow (optional). Use the decimal point as a separator for decimal numbers.

|*Activate test mode*
| Activate the test mode to test the exchange of data between plentymarkets and Paymorrow without the need for actual transactions.

2+|*Client (store) options*

|*Activate access data for all clients (stores)*
|Only visible if clients (stores) were set up. Activate to apply the account settings saved for the main store by clicking on *Add account* for all clients (shops). This setting is dominant over the settings saved for each client. Deactivate to use separate access data for your clients (stores). Online stores that do not have account settings saved for them cannot be used with Paymorrow. +
Go to <<omni-channel/online-store/setting-up-clients/online-store#, Setup » Client » Select client » Online store » Settings>> and make sure that you have selected the option *Enable login for every store* in the line *Login*. This makes it possible to support several clients.

2+|*RSA certificate registration*

|*Test certificate registration*
| Displaying the test certificate registration: Activate test mode and save the settings.

|*Live certificate registration*
| Activated by default. If the *Test certificate registration* option is displayed: Deactivate test mode and save the settings.
|====

[#40]
==  Register the RSA certificate

Instead of a password, a RSA certificate is used to activate the interface for both the test and the live mode. Depending on the mode, a different button for registering is displayed. The live mode is activated by default. Proceed as follows to activate the test mode and register the test certificate.

[.instruction]
Registering the test certificate:

. Go to *Setup » Orders » Payment » Methods*.
. Place a check mark next to the setting *Also show inactive*.
. Open the folder *DE*.
.  Click on *Paymorrow V2*. +
→ The *Interface* tab will open.
.  Expand the client.
. Place a check mark next to the option *Activate test mode*.
. *Save* the settings. +
→ The test mode will be activated.
. Expand the *RSA certificate registration* area.
.  Click on *Test-Zertifikatregistrierung* (Test certificate registration).  +
→ The *Test certificate registration* window will open and the certificate is generated.
. Enter the initialisation code.
. Click on *Registrierung* (Registration).

For registering the live certificate, deactivate the test mode and repeat the previous steps.

[#50]
==  Activating the payment method

Set up and activate the Paymorrow <<payment/managing-payment-methods#20, payment methods>> payment on invoice and direct debit in the *Settings* tab of the payment methods. In addition, check the settings for *Permitted payment methods* in the <<payment/managing-payment-methods#30, customer classes>> and for *Blocked payment methods* in the <<fulfilment/preparing-the-shipment#1000, shipping profiles>>.

[#60]
== Customising the invoice template for Paymorrow orders

If you use Paymorrow and you generate invoices for the orders that are paid for with Paymorrow invoices, then make sure to display Paymorrow's bank details on the invoice rather than your own bank details. This is done automatically with a payment instruction. Proceed as described below to use your own <<orders/order-documents#1700, PDF template>>.

[IMPORTANT]
.Respect the payment instruction width
====
In order to display the bank details of Paymorrow correctly on your invoice, save a width of 120 millimetres for the payment instruction in the *Setup » Client » Select client » Locations » Select location » Documents » Invoice* menu.
====

[.instruction]
Using own PDF template:

. Go to *Setup » Client » Select client » Locations » Select location » Documents » Invoice*.
. Click on the *PDF template* tab.
. Click on the *New template* tab.
. Select *Paymorrow* from the drop-down list to save the template for Paymorrow.
. Use the *File* area to select the PDF file on your computer.
. Click on *Open*.
. *Save* the settings. +
→ The PDF file will be uploaded and listed in the *Templates* tab.

Before sending invoices to customers, find out whether customers already receive invoices from Paymorrow. In other words, make sure the customer does not receive 2 invoices.

[#70]
== Automatically sending invoices

Set up event procedures to inform Paymorrow of outgoing items, credit notes and cancellations. For this to work correctly, the documents need to be created in the order's *Receipts* tab. Set up an <<automation/event-procedures#, event procedure>> to automatically send invoices to Paymorrow and to report outgoing items to Paymorrow.

[WARNING]
.Paymorrow only
====
Only set up the event procedures for the payment method Paymorrow. Otherwise unintended messages could be triggered. If you select multiple payment methods in the *filter* tab, then the message that was triggered for Paymorrow will also be sent to all of the other payment providers that were activated.
====

[.collapseBox]
.Setting up an event procedure
--
. Go to *Setup » Orders » Events*.
. Click on *Add event procedure*. +
→ The *Create new event procedure* window will open.
. Enter a name.
. Select the *event* listed in table 2.
. *Save* the settings.
. Pay attention to the explanations given in table 2 and carry out the settings as desired.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--
.event procedure for automatically sending invoices to Paymorrow
[cols="1,3,3"]
|====
| Setting | Option | Selection

|*Event*
|*Order change: Outgoing items booked* +
Documents: Invoice generated
|

|*Filter*
|*Order &gt; Payment method*
|*Paymorrow payment on invoice*

|*Procedure*
|*Payment methods &gt; Send invoice to Paymorrow*
|
|====

[#80]
==  Automatically sending credit notes

If a customer sends back some or all of the items, then you must create a credit note and report this to Paymorrow in order to keep the customer from receiving a dunning letter from Paymorrow. Set up an <<automation/event-procedures#, event procedure>> to automatically send credit notes to Paymorrow.

[.collapseBox]
.Setting up an event procedure
--
. Go to *Setup » Orders » Events*.
. Click on *Add event procedure*. +
→ The *Create new event procedure* window will open.
. Enter a name.
. Select the *event* listed in table 3.
. *Save* the settings.
. Pay attention to the explanations given in table 3 and carry out the settings as desired.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--
.event procedure for automatically sending credit notes to Paymorrow
[cols="1,3,3"]
|====
| Setting | Option | Selection

|*Event*
|*Order change: Status change*
|

|*Filter*
|*Order &gt; Order type*
|*Credit note*

|*Filter*
|*Order &gt; Payment method*
|*Paymorrow payment on invoice*

|*Procedure*
|*Payment methods &gt; Send credit note to Paymorrow*
|
|====

[#90]
== Automatically sending cancellations

If an order was cancelled, then the status has to match the settings under *Setup » Orders » Settings* so that the cancelled operation will also be communicated to Paymorrow. Set up an <<automation/event-procedures#, event procedure>> to automatically send cancellations to Paymorrow.

[.collapseBox]
.Setting up an event procedure
--
. Go to *Setup » Orders » Events*.
. Click on *Add event procedure*. +
→ The *Create new event procedure* window will open.
. Enter a name.
. Select the *event* listed in table 4.
. *Save* the settings.
. Pay attention to the explanations given in table 4 and carry out the settings as desired.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--
.event procedure for automatically sending cancellations to Paymorrow
[cols="1,3,3"]
|====
| Setting | Option | Selection

|*Event*
|*Order change: Status change*
| Select status for *cancelled orders*.

|*Filter*
|*Order &gt; Order type*
|*Order*

|*Filter*
|*Order &gt; Payment method*
|*Paymorrow payment on invoice*

|*Procedure*
|*Payment methods &gt; Send cancellation to Paymorrow*
|
|====

[#100]
==  Checking the order status

At the end of the order process, your customer will receive the information that you will now process the order. A few examples follow, which provide explanations of the various order statuses.

[#110]
===  Order process completed and payment successful through Paymorrow

The customer has completed the order and has initiated payment through Paymorrow. The order is now in *status 5* (cleared for shipping). The items can be shipped. Once Paymorrow receives the invoice, the payment deadline is 30 days. Your customer must pay the invoice to Paymorrow within this time period.

Once a week (providing that sales figures are generated), you will receive an account statement via email, which includes the following documents:

*  Accounting confirmation of individual items (Excel file)
*  Cancellations of individual items (Excel file)
*  Accounting (PDF file)
*  Invoice of your Paymorrow fees (PDF file)

[#120]
===  Paymorrow payment method rejected

The payment method Paymorrow was rejected. The order overview will display the message *No payments* under *Incoming payment*.

[#130]
===  Order value limits were not observed (minimum or maximum)

In this case, the payment method Paymorrow cannot be selected. One of the limits that was set for orders was not observed. The permitted range for orders will be shown. In the example (<<image-order-value-limit-not-observed>>), the minimum was set to 20 Euro and the maximum was set to 20,000 Euro.

[[image-order-value-limit-not-observed]]
.order value; limits were not observed
image::order-processing/payment/assets/DE-Zahlungsarten-paymorrow.png[]
