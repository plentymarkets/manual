= Old online store: Payolution
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Payolution, payment method
:description: Payment in plentymarkets: Set up the interface to Payolution in your plentymarkets system.
:position: 170

[IMPORTANT]
.Integration only for Callisto online stores
====
This page only contains instructions for integrating *Payolution* in Callisto online stores. For further information on using *Payolution* in Ceres online stores, refer to the detailed information in the plugin description available in the link:https://marketplace.plentymarkets.com/plugins/payment/Payolution_5943[plentyMarketplace^].
====

link:https://payolution.com/merchant/en/[Payolution^] offers you and your customers many advantages and possibilities with the payment methods *invoice* and *instalments*. In your plentymarkets system, the payment method invoice is called *Payolution Invoice*. Instalment purchase is called *Payolution Ins* in plentymarkets.

[#10]
== Important notes

This chapter provides you with important information about integrating the payment provider Payolution in plentymarkets.

[#20]
=== Payment process

For the the payment process via *instalment purchase*, the customer selects the payment method first. Afterwards, the customer is forwarded directly to Payolution. The additional content is made available in an iframe. The customer data is automatically transferred to the form on Payolution. The customer still has to accept the terms and conditions and specify how high the instalments should be. Once the data was entered and transferred, the customer is forwarded back to the *My account* area. There, the customer can take another look at the order.

The *invoice* payment process is even easier: The customer completes the purchase in the online store and is directly forwarded to the *My account* area. The entire purchase takes places in the online store.

[#30]
=== SSL certificateYou need to have an <<basics/admin-tasks/plentymarkets-account#ssl-certificate, SSL certificate>> in order to correctly use the payment method.

[WARNING]
.Ask your bank
====
Ask your bank whether it can process payments with iframe before you integrate this payment method.
====

[#40]
=== Available Payolution payment methods

Below you will find an overview of the Payolution payment methods that are available for plentymarkets. They are displayed along with the corresponding System ID in parentheses.

* *Payment on invoice* (2600)
* *Instalment purchase* (2601)

[IMPORTANT]
.Payolution Mangirkart
====
The payment method *Payolution Mangirkart* is currently without any function.
====

[#50]
== Registering with Payolution

Contact link:https://payolution.com/merchant/en/[Payolution^] to register and set up an account. You will receive the access data that you need for setting up Payolution in plentymarkets.

[#60]
== Setting up Payolution for Callisto

In order to set up the interface for Payolution for your Callisto online store in plentymarkets, proceed as described below.

[.instruction]
Setting up the Payolution interface:

. Go to *System » System settings » Orders » Payment » Methods*.
. Place a check mark next to the setting *Also show inactive*.
. Open the folder *International*.
.  Click on *Payolution*. +
→ The *Interface* tab will open.
.  Expand the client.
.  Carry out the settings as desired. Pay attention to the information given in <<table-setup-payolution-interface>>.
. *Save* the settings.

[[table-setup-payolution-interface]]
.setting up the Payolution interface
[cols="1,3"]
|====
|Setting |Explanation

|*Sender*; +
*Channel (PreCheck)*; +
*Channel (payment on invoice B2C)*; +
*Channel (payment on invoice B2B)*; +
*Channel (instalment purchase)*
| Enter the strings that you received from Payolution.

|*User login*
|Enter the user name that you received from Payolution.

|*User password*
|Enter the user password that you received from Payolution.

|*Company logo*
|Click on *Browse...* to upload an image with company name &amp; logo that will be displayed in the header on the Payolution page. +
Maximum size: 130 x 60 px.

|*Activate test mode*
|Activate the test mode and check the Payolution functions before working live with the system.

|*Minimum order value (B2C)*
|Enter the minimum order value for B2C customers according to the contract with Payolution. B2C customers have to reach this value when placing an order. Otherwise they will not be able to select Payolution as the payment provider.

|*Maximum order value (B2C)*
|Enter the maximum order value for B2C customers according to the contract with Payolution. B2C customers may not exceed this value when placing an order. Otherwise they will not be able to select Payolution as the payment provider.

|*Minimum order value (B2B)*
|Enter the minimum order value for B2B customers according to the contract with Payolution. B2C customers have to reach this value when placing an order. Otherwise they will not be able to select Payolution as the payment provider.

|*Maximum order value (B2B)*
|Enter the maximum order value for B2B customers according to the contract with Payolution. B2B customers may not exceed this value when placing an order. Otherwise they will not be able to select Payolution as the payment provider.

|*Minimum order value (instalment purchase)*
|Enter the minimum order value for instalment purchases according to the contract with Payolution. Customers have to reach this value when placing an order. Otherwise they will not be able to select Payolution instalment purchase as the payment method.

|*Maximum order value (instalment purchase)*
|Enter the maximum order value for instalment purchases according to the contract with Payolution. Customers may not exceed this value when placing an order. Otherwise they will not be able to select Payolution instalment purchase as the payment method.

|*Iframe width*
|Enter a value in pixels for the width of the instalment purchase input window in the online store.

|*Iframe height*
|Enter a value in pixels for the height of the instalment purchase input window in the online store. +
_*Note:*_ A scroll bar will be shown if the information displayed is larger than the width and height that you entered for the input window.
|====

[WARNING]
.Bank details
====
If you work with Payolution, then you may not list any bank details other than the ones specified. Otherwise this can lead to errors.
====

[#70]
==  Activating the payment method

Set up and activate the Payolution <<payment/managing-payment-methods#20, payment method>> in the *Settings* tab of the payment method. In addition, check the settings for *Permitted payment methods* in the <<payment/managing-payment-methods#30, customer classes>> and for *Blocked payment methods* in the <<fulfilment/preparing-the-shipment#1000, shipping profiles>>.

[#80]
== Displaying Payolution in the Callisto online store

For example, your customers could see the following screen if they selected the payment method *Payolution instalment purchase* (German example):

.Instalment purchase input window
image::order-processing/payment/assets/DE-Einstellungen-Auftraege-Zahlungsarten-Payolution-05.png[]
[#90]
==  Automatically sending shipping confirmations

Set up an <<automation/event-procedures#, event procedure>> to automatically send shipping confirmations to Payolution when the outgoing items are booked. You do not need a shipping confirmation for instalment purchases. As such, this event procedure should only be set up for payment on invoice.

[.collapseBox]
.Setting up an event procedure
--
.  Go to *System » System settings » Orders » Events*.
.  Click on *Add event procedure*. +
→ The *Create new event procedure* window will open.
.  Enter name.
.  Select the *event* listed in table 2.
. *Save* the settings.
.  Pay attention to the explanations given in table 2 and carry out the settings as desired.
.  Place a check mark next to the option *Active*.
. *Save* the settings.
--
.event procedure for sending automatic shipping confirmations to Payolution
[cols="1,3,3"]
|====
| Setting | Option | Selection

|*Event*
|*Order change: Outgoing items booked*
|

|*Filter 1*
|*Order &gt; Order type*
|*Order*

|*Filter 2*
|*Order &gt; Payment method*
|*Payolution Invoice*

|*Procedure*
|*Shipping &gt; Send shipping confirmation to Payolution*
|
|====

[TIP]
.Tip: Checking the shipping confirmation in the status history
====
Once you have set up this event procedure, the shipping confirmation will automatically be sent to Payolution when the outgoing items are booked. Go to <<orders/managing-orders#, Orders » Edit orders » Open order » Tab: Overview » Tab: Status history>> to check this process.
====

// h2>Rechnungen automatisch senden<a id="95." name="95."></a></h2> <p>Richten Sie eine <a href="{% Link(962) %}"><strong>Ereignisaktion</strong></a> ein, um Rechnungen automatisch an Payolution zu senden und den Warenausgang an Payolution zu melden.</p> <div class="plentyInfoBox plentyIsWarning"> <div class="plentyInfoBoxHeader"> Nur für Paymorrow</div> <div class="plentyInfoBoxContent"> <p> Richten Sie die Ereignisaktionen nur für die Zahlungsart Paymorrow ein, da es sonst zu ungewollten Meldungen kommt. Denn wenn Sie im Tab <strong>Filter</strong> mehrere Zahlungsarten wählen, wird die ausgelöste Meldung für Paymorrow auch an alle weiteren dort aktivierten Zahlungsanbieter geschickt.</p> </div> </div> <div> <ul class="accordionList openableAll"> <li> <strong class="accordionListTrigger trigger-left trigger-plus" style="color:#008EBD">Ereignisaktion einrichten</strong> <div class="accordionListContent"> <ol> <li>Öffnen Sie das Menü <strong>System » System settings » Aufträge » Ereignisaktionen</strong>.</li> <li>Klicken Sie auf <strong>Ereignisaktion hinzufügen</strong>.<br />→ Das Fenster <strong>Neue Ereignisaktion erstellen</strong> wird geöffnet.</li> <li>Geben Sie einen Namen ein.</li> <li>Wählen Sie das <strong>Ereignis</strong> gemäß Tabelle 2.</li> <li><strong>Speichern</strong> Sie die Einstellungen.</li> <li>Nehmen Sie die Einstellungen gemäß Tabelle 2 vor.</li> <li>Setzen Sie ein Häkchen bei <strong>Aktiv</strong>.</li> <li><strong>Speichern</strong> Sie die Einstellungen.</li> </ol> </div> </li> </ul> </div> <table> <caption>Ereignisaktion zum automatischen Senden von Rechnungen an Payolution</caption> <tr> <th> Einstellung</th> <th> Option</th> <th> Auswahl</th> </tr> <tr> <td> <strong>Ereignis</strong></td> <td> <strong>Auftragsänderung: Warenausgang gebucht</strong><br />Dokumente: Rechnung generiert</td> <td> </td> </tr> <tr> <td> <strong>Filter</strong></td> <td> <strong>Auftrag > Zahlungsart</strong></td> <td> <strong>Payolution Invoice</strong></td> </tr> <tr> <td> <strong>Aktion</strong></td> <td> <strong>Zahlungsarten > Rechnung an Paymorrow senden</strong></td> <td> </td> </tr> </table> <p>Legen Sie die folgende Ereignisaktion an, um Rechnungen automatisch per E-Mail an Payolution zu senden.</p> <p><img alt="" class="pmManScreenshot" src="/documents/category/2057/DE-Einstellungen-Auftraege-Zahlungsarten-Payolution-03.png" /></p> <p><em>Bild 3: Ereignisaktion; <strong>Rechnung</strong> an <strong>Payolution</strong> senden</em></p> <h5>Ereignisaktion für Rechnungsversand erstellen:</h5> <ol> <li>Öffnen Sie das Menü <a href="{% Link(962) %}"><strong>System » System settings » Aufträge » Ereignisaktionen</strong></a>.</li> <li>Klicken Sie links unten auf das <strong>grüne Plus</strong>, um eine neue Ereignisaktion zu erstellen.</li> <li>Tragen Sie im Bearbeitungsfenster einen Namen ein, z.B. <strong>Rechnung senden (POL)</strong>.</li> <li>Wählen Sie unter Ereignis die Option <strong>Auftragsänderung &gt; Statuswechsel</strong>.</li> <li>Wählen Sie den Status <strong>[5.2] Rechnung erzeugt</strong>.</li> <li>Klicken Sie auf Speichern.<br /> → Die Ereignisaktion wird angelegt.</li> <li>Fügen Sie über das <strong>grüne Plus</strong> einen <strong>Filter</strong> des Filtertyps <strong>Auftrag &gt; Auftragstyp</strong> hinzu.<br /> → Der Filter wird angelegt.</li> <li>Markieren Sie im Filter die gewünschten Auftragstypen, z.B. <strong>Auftrag</strong> und <strong>Gutschrift</strong>.</li> <li>Fügen Sie über das <strong>grüne Plus</strong> einen <strong>Filter</strong> des Filtertyps <strong>Auftrag &gt; Zahlungsart</strong> hinzu.<br /> → Der Filter wird angelegt.</li> <li>Markieren Sie im Filter die gewünschte Option für <strong>Payolution</strong>, z.B. <strong>Payolution invoice</strong>.</li> <li>Fügen Sie über das <strong>grüne Plus</strong> eine Aktion des Aktionstyps <strong>Kunde &gt; E-Mail versenden</strong> hinzu.<br /> → Die Aktion wird angelegt.</li> <li>Fügen Sie in der Aktion die Option <strong>Weitere Vorlagen &gt; PDF -- Rechnung</strong> über das <strong>grüne Plus</strong> hinzu. Wählen Sie als Empfänger die entsprechende E-Mail-Adresse von Payolution. Diese erhalten sie von Ihrem Payolution-Integration-Manager.</li> <li>Setzen Sie ein Häkchen bei <strong>Aktiv</strong>.</li> <li>Klicken Sie auf <strong>Speichern</strong>, um die Einstellungen zu sichern.</li></ol
[#100]
== Automatically sending refunds

To send refunds automatically, an <<orders/managing-orders#1200, order status>> for credit notes is required. You can use one of the standard statuses or set up your own order status. This status is then only assigned to completed credit notes. These credit notes must not be changed after creation. Set up an <<automation/event-procedures#, event procedure>> to automatically send refunds to Payolution.

[.collapseBox]
.Setting up an event procedure
--
.  Go to *System » System settings » Orders » Events*.
.  Click on *Add event procedure*. +
→ The *Create new event procedure* window will open.
.  Enter a name.
.  Select the *event* listed in table 3.
. *Save* the settings.
.  Pay attention to the explanations given in table 3 and carry out the settings as desired.
.  Place a check mark next to the option *Active*.
. *Save* the settings.
--
.event procedure for automatically sending refunds to Payolution
[cols="1,3,3"]
|====
| Setting | Option | Selection

|*Event*
|*Order change: Status change*
| Select the status for the *refund to Payolution*.

|*Filter 1*
|*Order &gt; Order type*
|*Credit note*

|*Filter 2*
|*Order &gt; Payment method*
|*Payolution payment method*

|*Procedure*
|*Payment methods &gt; Send refund to Payolution*
|
|====
