= Old online store: Saferpay
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Saferpay, payment method
:description: Payment in plentymarkets: Set up the interface to Saferpay in your plentymarkets system.
:position: 200

[IMPORTANT]
.Integration only for Callisto online stores
====
This page only contains instructions for integrating *Saferpay* in Callisto online stores. The following instructions are not valid for Ceres online stores!
====

link:https://www.six-payment-services.com/en/shared/offering/products/psp/ecommerce.html[Saferpay^] has set the standard for e-payment solutions in German-speaking Europe and represents secure payment on the internet. Thanks to Saferpay, neither online sellers nor card holders have to be concerned about security when shopping in the internet. Worldwide, sellers know about and appreciate paying securely on the internet with Saferpay.

[#10]
== Important notes

This chapter provides you with important information about integrating the payment provider in plentymarkets.

[#20]
=== Payment process

The customer is forwarded to Saferpay for the payment process and an iframe prompts the customer to enter their necessary data. The payment method is selected in the online store. Afterwards, the customer is forwarded directly to Saferpay and the additional content is made available in an iframe. The customer enters their data here. In other words, the data is not entered in the online store, but rather in Saferpay. Once the customer has entered and confirmed the data, they will be forwarded to the order confirmation page.

[#30]
=== SSL certificate

You need to have an <<basics/working-with-plentymarkets/plentymarkets-account#ssl-certificate, SSL certificate>> in order to correctly use the payment method.

[WARNING]
.Ask your bank
====
Ask your bank whether it can process payments with iframe before you integrate this payment method.
====

[#40]
== Registering with Saferpay

Close a link:https://www.six-payment-services.com/dam/downloads/contracts/116004202_CO_Saferpay_Contract_DEU_EN_active.pdf[contract for the use of Saferpay^] with SIX Payment Services. You will receive your access data along with the confirmation of your contract. You will need the access data for the activation in plentymarkets.

[#50]
== Setting up Saferpay for Callisto

Proceed as described below to set up the interface to Saferpay for your Callisto online store in plentymarkets.

. Go to *System » Orders » Payment » Methods*.
. Place a check mark next to the setting *Also show inactive*.
. Open the folder *International*.
.  Click on *Saferpay*. +
→ The *Settings* tab will open.
. Click on the *Interface* tab.
.  Expand the area *Access data: Client*.
.  Carry out the settings as desired. Pay attention to the information given in <<table-setup-saferpay-interface>>.
.  Expand the area *Settings: Client*.
.  Carry out the settings as desired. Pay attention to the information given in <<table-settings-saferpay-interface>>.
. *Save* the settings.

[[table-setup-saferpay-interface]]
.setting up the Saferpay interface
[cols="1,3"]
|====
|Setting |Explanation

|*Account ID*
|Enter the Saferpay account ID that you received from Saferpay.

|*Password*
|Enter the Saferpay password that you received from Saferpay.

2+|Client (store) options

|*Activate access data for all clients (stores)*
|Only visible if clients (stores) were set up. Activate to apply the account settings saved for the main store by clicking on *Add account* for all clients (shops). This setting is dominant over the settings saved for each client. Deactivate to use separate access data for your clients (stores). Online stores that do not have account settings saved for them cannot be used with Saferpay. +
Go to <<omni-channel/online-store/setting-up-clients/online-store#, System » Client » Select client » Online store » Settings>> and make sure that you have selected the option *Enable login for every store* in the line *Login*. This makes it possible to support several clients.
|====

The *Interface* tab contains a *Settings* submenu for each client (store). The available settings are described below.

[[table-settings-saferpay-interface]]
.further settings in *Interface* tab
[cols="1,3"]
|====
|Setting |Explanation

|*Email address for payment notification*
|Enter the email address that payment notifications should be sent to.

|*Close window with a time-delay when payment is received (seconds)*
|Once a payment has been received, a message will be displayed. Enter a time value in seconds that you would like the window to remain open, giving the customer the possibility to print the message during this time. If you do not enter a value, the window will remain open for 100 seconds (default setting). If you do not want the window to be displayed, enter *0*.

|*Query the name of the card or account holder*
|Select whether the query is to be carried out or not.

|*Language selection display during payment*
|Choose whether the language selection should be displayed.

|*Colours*
|Enter hexadecimal values for the colours of the individual elements.

|*Font*
|Enter a font, e.g. the one that you use in your online store.

|*Client (store) options*
|Select *Yes* or *No*. +
*Yes* = The options that were chosen in the *Colours* and *Font* sections will also be applied to clients (stores).
|====

[#60]
== Activating the payment method

Set up and activate the Saferpay <<order-processing/payment/managing-payment-methods#20, payment method>> in the *Settings* tab of the payment method. In addition, check the settings for *Permitted payment methods* in the <<order-processing/payment/managing-payment-methods#30, customer classes>> and for *Blocked payment methods* in the <<fulfilment/preparing-the-shipment#1000, shipping profiles>>.

[#70]
== Viewing the API log

The correct data exchange, as well as the booking confirmation in Saferpay and plentymarkets, are indicated by a green bar below the words *Incoming payment*. In the case that an error occurs during data transmission, you will find details about the error in the API Log.

[.instruction]
Viewing the API log:

.  Go to *Data » API log » Tab: API log*.
.  Select a format from the drop-down list *Process*.
.  Select a *Date* if you only want to see entries for a specific day.
.  Click on *Search* to carry out the search. +
→ The processes will be displayed.

Depending on the type of error, the payment may be booked in Saferpay but may not be verified in plentymarkets. This will cause an erroneous booking in plentymarkets. If an error has occurred, please check your Saferpay system first and see whether the payment has truly been received. If that is the case, then you can manually correct the booking in plentymarkets. In case you are not completely sure, or if you are unable to reconstruct or solve the problem, please contact the Saferpay service or our service team.
