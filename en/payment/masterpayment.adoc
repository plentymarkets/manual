= Masterpayment
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Masterpayment, payment method
:description: Payment in plentymarkets: Set up the interface to Masterpayment in your plentymarkets system.
:position: 42

Masterpayment is a leading payment provider and offers different payment solutions such as purchase on invoice, payment in installments or down-payment and purchase on consumer credit. As such, your customers are able to make their payments easily with common payment methods such as credit card, debit, invoice or with financing. End customers can pay easily and without having to register.

[#10]
== Important notes

This chapter provides you with important information about integrating the payment provider in plentymarkets.

[#20]
=== Payment process

The customer is forwarded to Masterpayment for the payment process and an iframe prompts the customer to enter his or her data. The payment method is selected in the online store. Afterwards, the customer is forwarded directly to Masterpayment. The additional content is made available in an iframe. The customer enters his or her data here. In other words, the data is not entered in the online store, but rather in Masterpayment. Once the customer has entered and confirmed the data, he or she will be forwarded to the order confirmation page.

[#30]
=== SSL certificate

You need to have an <<start/plentymarkets-account/service-center/ssl-certificate#, **SSL certificate**  >> in order to correctly use the payment method.

[WARNING]
.Ask your bank
====
Ask your bank whether it can process payments with iframe before you integrate this payment method.
====

[#40]
=== Availalble Masterpayment payment methods

Below you will find an overview of the Masterpayment payment methods that are available for plentymarkets. They are displayed along with the corresponding System ID in parentheses.

* Debit card (1623)
* Purchase on consumer credit (1622)
* Credit card (1600)
* Recurrent credit card (1624)
* Online debit (1610)
* Recurrent online debit (1625)
* Installment purchase (1621)
* Payment on invoice (1620)
* Down payment (1626)
* Sofortbanking (1627)

[#50]
== Registering with Masterpayment

You have to link:https://www.masterpayment.com/en/auth/register[**register**, window="_blank"] before being able to use Masterpayment. You will receive the access data that you need for setting up Masterpayment in plentymarkets.

[#60]
== Setting up Masterpayment in plentymarkets

Proceed as described below to set up the interface to Masterpayment.

[.instruction]
Setting up the interface to Masterpayment:

. Go to **Settings » Orders » Payment » Payment methods**.
. Place a check mark next to the setting **Also show inactive**.
. Open the folder **International**.
.  Click on **Masterpayment**. +
→ The **Interface** tab will open.
.  Expand the client.
.  Carry out the settings as desired. Pay attention to the information given in table 1.
. **Save** the settings.

.setting up the interface to Masterpayment
[cols="a,a"]
|====
|Setting |Explanation

|**Login (email), Secret key**
|Enter the access data that you received from Masterpayment.

|**Send customer data**
|Select whether or not the customer data should be sent.

|**IFrame width**
|Enter the width in pixels (standard: 450).

|**IFrame height**
|Enter the height in pixels (standard: 450).

2+|Client (store) options

|**Activate access data for all clients (stores)**
|Only visible if clients (stores) were set up. Activate to apply the account settings saved for the main store by clicking on **Add account** for all clients (shops). This setting is dominant over the settings saved for each client. Deactivate to use separate access data for your clients (stores). Online stores that do not have account settings saved for them cannot be used with Masterpayment. +
Go to **<<client-store/standard/online-store/basic-settings#, Settings » Client (store) » Standard » Online store » Basic settings  >>** and make sure that you have selected the option **Enable login for every store** in the line **Login**. This makes it possible to support several clients.
|====

[#70]
== Activating the payment method

Set up and activate the Masterpayment **<<payment/managing-payment-methods#20, payment method >>** in the **Settings** tab of the payment method. In addition, check the settings for **Permitted payment methods** in the **<<payment/managing-payment-methods#30, customer classes >>** and for **Blocked payment methods** in the **<<fulfilment/preparing-the-shipment#1000, shipping profiles >>**.

[#80]
== Automatically sending shipping confirmations

Set up event procedures in order to inform Masterpayment when items are shipped, orders and returns are cancelled and when invoices are created or deleted. Before activating your system, contact your Masterpayment contact person to test the event procedures. Set up an <<orders/settings/event-procedures#, **event procedure**  >> to automatically send shipping confirmations to Masterpayment.

[.collapseBox]
.Setting up an event procedure
--
. Go to **Settings » Orders » Event procedures**.
. Click on **Add event procedure**. +
→ The **Create new event procedure** window will open.
. Enter a name.
. Select the **event** listed in table 2.
. **Save** the settings.
. Pay attention to the explanations given in table 2 and carry out the settings as desired.
. Place a check mark next to the option **Active**.
. **Save** the settings.
--
.event procedure for sending automatic shipping confirmations to Masterpayment
[cols="a,a,a"]
|====
|Setting |Option |Selection

|**Event**
|**Order change: Outgoing items booked**
|

|**Filter 1**
|**Order &gt; Order type**
|**Order**

|**Filter 2**
|**Order &gt; Payment method**
|**Masterpayment**

|**Procedure**
|**Shipping &gt; Send shipping confirmation to Masterpayment**
|
|====

Alternatively, select the setting **Status change** as the event and then select the desired **status**, if you want a status change to trigger when outgoing items are booked.

[TIP]
.Tip
====
This shipping confirmation informs Masterpayment that the order was shipped. It activates the invoice, which is saved in the order as a PDF file. If you need the invoice earlier, then select an earlier event.
====

[#90]
== Automatically sending cancellations

Set up an <<orders/settings/event-procedures#, **event procedure**  >> to automatically send cancellations to Masterpayment.

[.collapseBox]
.Setting up an event procedure
--
. Go to **Settings » Orders » Event procedures**.
. Click on **Add event procedure**. +
→ The **Create new event procedure** window will open.
. Enter a name.
. Select the **event** listed in table 3.
. **Save** the settings.
. Pay attention to the explanations given in table 3 and carry out the settings as desired.
. Place a check mark next to the option **Active**.
. **Save** the settings.
--
.event procedure for sending automatic cancellations to Masterpayment
[cols="a,a,a"]
|====
| Setting | Option | Selection

|**Event**
|**Order change: Status change**
| Select status for **cancelled orders**.

|**Filter**
|**Order &gt; Order type**
|**Order**

|**Filter**
|**Order &gt; Payment method**
|**Masterpayment**

|**Procedure**
|**Payment methods &gt; Send refund to Masterpayment**
|
|====

