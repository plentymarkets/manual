= Best Practices: Procedure manager and event procedures
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Automating processes, Automation, Best Practice, Orders, Event procedures, Procedure manager
:position: 30

Your daily business as a seller mostly consists of simple routine tasks. Plentymarkets offers you different effective tools to automate such tasks. +
This page of the manual contains practical examples for setting up *Event procedures* and the *Procedure manager*.

[IMPORTANT]
.Requirements for automation
====
Some of the sample procedures on this page send email templates or generate particular order documents. Thus, make sure that the respective email *Templates* have been set up correctly in the *System » Client » Select client » Email » Templates* menu. In addition, the respective document templates have to be set up before setting up and using procedures that create documents. Document templates are set up in the menu *System » Client » Select client » Locations » Select location » Documents*.
====

== Practical examples: Event procedures

The basic principle of event procedures is easy to understand: In case of an event procedure, certain *Events* that occur in the online store trigger specific *Procedures*. Precise instructions on setting up event procedures and the available events, filters and procedures can be found on the <<automation/event-procedures#, Event procedures>> page of the manual. +
Below, you can find a lit of examples for automatic procedures that are triggered by event procedures.

=== Sending an order confirmation

If you want to send an order confirmation to your customers as soon as they have placed an order in your online store, we recommend the event procedure described in <<table-event-procedure-automatic-order-confirmation>>.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-automatic-order-confirmation>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-automatic-order-confirmation>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-automatic-order-confirmation]]
.Setting up the event procedure “Sending an order confirmation to customers”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Order generation > New order*
|

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Customer*.
|====

=== Sending a confirmation of payment

If you want to send a confirmation email to your customers as soon as you have received complete incoming payment for their order, we recommend the event procedure described in <<table-event-procedure-automatic-payment-confirmation>>.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-automatic-payment-confirmation>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-automatic-payment-confirmation>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-automatic-payment-confirmation]]
.Setting up the event procedure “Sending a payment confirmation to customers”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Payment > Partial payment*
|

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Customer*.
|====

=== Send email templates to employees

If you want to inform your employees about additional customer wishes for an order via email, we recommend the event procedure described in <<table-event-procedure-customer-wish>>.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-customer-wish>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-customer-wish>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-customer-wish]]
.Setting up the event procedure “Sending email templates to employees”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Order note > Order note from customer*
|

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Employee*. +
The email is sent to the email address of the selected employee. For an email address to be available here, it has to be saved with the user in the <<basics/admin-tasks/manage-users#42, System » Settings » User » Accounts>> menu. +
*_Tip_*: Include the template variable *$CustomerSpecialWishes* in the email template. This template variable displays the text entered by the customer.
|====

If you want to notify your employees via email as soon as an order enters the order status *[5] Cleared for shipping*, we recommend the event procedure described in <<table-event-procedure-status-change>>.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-status-change>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-status-change>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-status-change]]
.Setting up the event procedure “Inform employees about status change”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Order change > Status change*
|Select the status *[5] Cleared for shipping*.

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Employee*. +
The email is sent to the email address of the selected employee. For an email address to be available here, it has to be saved with the user in the <<basics/admin-tasks/manage-users#42, System » Settings » User » Accounts>> menu. +
|====

=== Generating and sending an invoice

If you want your plentymarkets system to automatically generate an invoice as soon as outgoing items have been booked for the corresponding order, we recomment the event procedure described in <<table-event-procedure-generate-invoice>>.

[WARNING]
.Generating a document using an event procedure
====
The following event procedure only triggers the generation of the invoice document. Set up the second event procedure described below to send the invoice document to your customers as a PDF file attached to an email. If you use one and the same event procedure to generate and send documents, it can happen that the email is sent before the invoice document has been created. Thus, we generally recommend to set up two separate event procedures for generating and sending order documents.
====

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-generate-invoice>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-generate-invoice>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-generate-invoice]]
.Setting up the event procedure “Generating an invoice”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Order change > Outgoing items booked*
|

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure 1*
|*Documents > Generate invoice*
|If needed, activate the options *Payment due* or *Early payment discount* or enter a *comment* that will be displayed on the generated invoice. +
|====

If you want to send the invoice to your customers as a PDF attached to an email after generation of the invoice document, we recommend the event procedure described in <<table-event-procedure-send-invoice>>.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-send-invoice>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-send-invoice>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-send-invoice]]
.Setting up the event procedure “Sending invoices to customers”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Documents > Invoice generated*
|

|*Filter 1*
|*Order > Order type*
|*Order*

|*Procedure 1*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Customer*.
|====

=== Adding give-aways to orders

If you wish to add give-aways in the form of free items to orders exceeding a certain value of items, we recommend the event procedure described in <<table-event-procedure-order-giveaway>>. +
For more information on give-aways, refer to the <<item/managing-items#4300, Managing items>> page of the manual.

[.collapseBox]
.Creating an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a name for the event procedure.
. Select the *event* according to <<table-event-procedure-order-giveaway>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-order-giveaway>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-order-giveaway]]
.Setting up the event procedure “Adding give-aways to orders”
[cols="1,2,2"]
|====
|Setting |Option |Selection

|**Event**
|**Order generation > New order**
|

|**Filter 1**
|**Order > Order type**
|**Order**

|**Filter 2**
|**Value of items (gross)**
|Choose an operator and enter an item value. +
*_Example:_* Operator *>=*, Value of items *50.00* = Variation is added when value of items is or 50 GBP or more

|*Procedure*
|*Item > Add variation*
|Enter the variation ID of the give-away item.
|====

=== Sending shipping confirmations to customers

If you want to send a shipping confirmation to your customers as soon as the package number of the consignment has been imported into your plentymarkets system, we recommend the event procedure described in <<table-event-procedure-shipping-confirmation>>. This event procedure will move the order to status 7 and book outgoing items in your warehouse so that physical stock is reduced accordingly.

[.collapseBox]
.Setting up an event procedure
--
. Go to *System » Orders » Events*.
. Click on *Add event procedure*. +
→ The window *Create new event procedure* opens.
. Enter a distinct name for the event procedure.
. Select the *event* according to <<table-event-procedure-shipping-confirmation>>.
. *Save* the settings.
. Carry out the settings according to <<table-event-procedure-shipping-confirmation>>.
. Place a check mark next to the option *Active*.
. *Save* the settings.
--

[[table-event-procedure-shipping-confirmation]]
.Setting up the event procedure “Sending an automatic shipping confirmation”
[cols="1,3,3"]
|====
|Setting |Option |Selection

|*Event*
|*Order change > Package number*
|

|*Filter*
|*Order > Order type*
|*Order*

|*Procedure 1*
|*Customer > Send email*
|Use the plus icon to select the desired template for the *Customer*.

|*Procedure 2*
|*Order > Book outgoing items*
|
|====

[TIP]
.Display tracking URL in shipping confirmation
====
Almost all shipping providers offer your customers the possibility to track their deliveries online. You already saved a tracking URL while setting up your shipping service providers. Once the package number has been entered, your plentymarkets system has all necessary information to send customers a tracking URL for their packages. Use this option and make sure that the shipping confirmation email contains the variable *$TrackingURL*. We recommend that you test the first tracking URLs for yourself to ensure that they have been processed correctly and that all necessary information are displayed for the customer.
====

== Practical examples: Procedure manager

You can use the procedure manager to set up automatic processes that carry out procedures daily at fixed times. In contrast to event procedures, procedures handled by the procedure manager are not triggered by specific events, but take place automatically after a certain span of time has passed. For example, you can use a daily interval to send an automatic payment reminder to customers who have not paid for their orders within the previous 7 days. +
For detailed instructions on setting up the procedure manager and on the available filters and procedures, refer to the <<automation/procedure-manager#, Procedure manager>> page of the manual.

=== Sending a payment reminder

If you want to remind customers who have placed orders with the payment method *Cash in advance* of outstanding payments, use the procedure described in <<table-procedure-manager-reminder>>. When carrying out the settings, pay attention to the fact that orders with the payment method *Cash in advance* are automatically assigned the status *[3] Waiting for payment* in your plentymarkets system.

[[table-procedure-manager-reminder]]
.Setting up the procedure “Sending a payment reminder”
[cols="1,3"]
|====
|Tab |Setting

|*Settings*
|Use the option *Execute every day at* to specify when the procedure should be carried out. Enter a *Name* and place a check mark next to the option *Active*.

|*Filter*
|For the *Status* option, select the status *Waiting for payment*. Select *Enter the days* for the *Last status change* setting and enter the number of days into the text field below. Enter the number *7* in the *Days* field. +
With this setting, all orders that have been in status *[3] Waiting for payment* for exactly seven days are found.

|*Procedure*
|For the option *Send email template*, select the *email template* previously created for this purpose.
|====

[TIP]
.Tip: Several variations of the procedure
====
We recommend to set up this procedure several times with slight variations. For example, an additional email with another reminder can be sent a few days later. After even more days have passed without incoming payment, another procedure can be set up which moves the status to *8* and thus cancels the order. This status change also releases the stock that has previously been reserved for the order.
====

=== Starting a dispute process on eBay

It is also possible to use the procedure manager to automatically start dispute processes on eBay. The customer then receives a request for payment via eBay. We recommend to select the filters similarly to the ones used in the procedure *Sending a payment reminder* in the example described above. In addition to the filter settings, select the procedure *eBay: Start dispute process*.

The dispute process is intended for orders for which payment is outstanding for more than 4 days. In plentymarkets, these orders are referred to as *outstanding orders*. Those orders are listed and can be imported in the *<<omni-channel/multi-channel/ebay/ebay-setup#7300, System » Markets » eBay » Data exchange>>*. Outstanding orders have to be imported before the dispute process can be started with the procedure manager.

Use the procedure described in <<table-procedure-manager-ebay-dispute>> to automatically start dispute processes.

[[table-procedure-manager-ebay-dispute]]
.Setting up the procedure “Starting a dispute process on eBay”
[cols="1,3"]
|====
|Tab |Setting

|*Settings*
|Use the option *Execute every day at* to specify when the procedure should be carried out. Enter a *Name* and place a check mark next to the option *Active*.

|*Filter*
|For the *Status* option, select the status *Incomplete data*. Select *Enter the days* for the *Last status change* option. Enter the number *10* in the *Days* field. +
Thus, all orders that have been in the status *[1] Incomplete data* for exactly 10 days are found.

|*Procedure*
|For the option *eBay*, select *Start dispute process*.
|====

=== Automatically posting feedback on eBay

The procedure manager enables you to automatically post positive feedback for customers who have provided you with positive feedback as well. For this procedure, it is necessary to create a corresponding procedure in the *Procedure manager* and save *feedback texts*. This procedure is the only one in the procedure manager that is triggered by an event and not at a specified point in time. Please refer to the *<<omni-channel/multi-channel/ebay/ebay-setup#1300, eBay>>* page of the manual for further information.
