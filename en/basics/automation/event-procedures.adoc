= Event procedures
:lang: en
include::{includedir}/_header.adoc[]
:position: 60

**plentymarkets » Settings » Orders » Event procedures**

== Event procedures

Routine tasks make up a significant portion of order processing. To a large extent, you can let your plentymarkets system take care of these for you. In particular, sending E-mails to your customers takes up a lot of time, yet is an essential part of a store that is geared towards service and customers.

With the **event procedures**, plentymarkets provides you with a simple and effective tool for setting up such automatic processes.

The basic principle is easy to understand: Similar to a switch function, certain events in the store trigger specific **procedures**.

[TIP]
.Example: Order confirmation
====
For an order confirmation, the event **New order** is always followed by the procedure **E-mailing**.
====

The __**creation of an event procedure**__ is broken down into the following steps:

. Creating a link:http://orders/settings/event-procedures/new-event-procedure[**new event procedure**, window="_self"]
. Specifying the **event**
. Setting one or more **filters**
. Deciding which **procedures** the system should carry out in this event
. **Activating** the event procedure (placing a check mark)

Event procedures can be used to automate day-to-day processes. For further information, refer to the **<<basics/automation/automating-processes#, Automating processes  >>** page of the manual.

== Menu overview

The **event procedures** are found on the left side of the menu. They are sorted into folders according to the type of event. New event procedures are **__automatically sorted__** into the folders. Only those folders that contain at least one event procedure will be displayed. +
For example, all of the event procedures that are triggered by booking the outgoing items will be sorted into the **Outgoing items booked** folder. In image 1, you can see that two event procedures are sorted into this folder. As soon as the outgoing items were booked, the event procedure will automatically send a **shipping confirmation** to the corresponding payment provider.

image::order-processing/orders/assets/ENG-Einstell-Auftraege-Ereignisaktionen-01.png[]

__Image 1: the **event procedures** menu__

The following table explains the settings in the **Settings » Orders » Event procedures** menu:

[cols="a,a,a"]
|====
|No. |Function |Explanation

|**1**
|**Add event procedure**
|Click on the **green plus icon** to create a new event procedure. See **__section 4.5__** on this page.

|**2**
|**Detailed overview**
|Click on the **binoculars** to open an overview of all event procedures. See **section 3** on this page.

|**3**
|**Directory tree**
|The directory is divided up into __**3 levels**__. The __**1st level**__ is the **type of event procedure**. For example, the type "Order generation". The __**2nd level**__ is the **event**. The __**3rd level**__ is the actual **event procedure**. Every event procedure is given an **ID**. The IDs are assigned automatically and numbered consecutively. The __**individual name**__ is displayed next to the ID.

|**4**
|**Editing area**
|The event procedure that was opened is highlighted in __**blue**__ on the left side. The __**area for editing**__ the event procedure is on the right side. You can change the **event**, the **filters** and the **procedures** here if needed. The filters specify which orders should be included. The procedures will then be carried out for these orders.
|====

__Table 1: overview: **area for editing event procedures**__

== Detailed overview

Open the __**detailed overview**__ by clicking on the binoculars in the lower left corner below the directory tree.

image::order-processing/orders/assets/ENG-Einstell-Auftraege-Ereignisaktionen-02.png[]

__Image 2: opening the **overview** of all event procedures__

The overview displays all of the __**settings**__ for the event procedures at once. The markings also indicate which event procedures are __**activated**__ and which ones are not.

image::order-processing/orders/assets/ENG-Einstell-Auftraege-Ereignisaktionen-03.png[]

__Image 3: the **overview** of event procedures is open__

The **detailed overview** is divided up into two areas: the **directory tree on the left**, which is the same as described above, and the **overview of settings on the right**. You can see both __**active**__ and **__inactive event procedures__** in image 3. Active event procedures are displayed with a **gear-wheel icon and green lightning bolt** in the directory tree. They are displayed with a **green power icon** in the overview of settings. These two icons are **gray** for inactive event procedures.

[NOTE]
.Configuration notes
====
__**Displaying inactive event procedures**__

Place a check mark next to the option **Show inactive event procedures**. Inactive event procedures will now be displayed.

__**Jumping directly to an event procedure**__

Click on an **event procedure** in the directory tree. The overview of settings will jump directly to this event procedure.

__**Editing an event procedure**__

Click on the **ID** in the overview of settings. The event procedure will open in the editing area.
====

[#new-event-procedure]
== New event procedure

**plentymarkets » Settings » Orders » Event procedures**

=== Selecting the event for a new event procedure

First select the **event** that should trigger the **new event procedure**. The events that you can choose from are described below. They are grouped together by type.

==== Type of event: Order generation

The following **events** can be used to trigger an event procedure. These events all relate to **__generating the following__<<order-processing/orders/managing-sales-orders/changing-order-40, types of orders >>**:

[cols="a,a"]
|====
|Event |Explanation

|**New order, ... Delivery order, ... Return, ... Return (by customer), ... Credit note, ... Repair, ... Multi-order, ... Multi credit note**
|The event procedure is triggered whenever one of these documents __**are created**__. +
**Return (by customer)**: This event refers to **returns** that have been triggered by customers in the **my account** section of the online store.
|====

__Table 1: overview **type of event: order generation**__

==== Type of event: Order change

The following **events** can be used to trigger an event procedure. These events all relate to <<order-processing/orders/managing-sales-orders#changing-order, **order changes**  >>:

[cols="a,a"]
|====
|Event |Explanation

|**Status change**
|When the order **status** changes to the status selected in the settings section.

|**Package number**
|When a package number is defined for an order.

|**Outgoing items booked**
|When the outgoing items are booked automatically or manually.

|**Order note**
|When you save information for an order.

|**Order note from customer**
|When the customer leaves you new information during the __**checkout process**__.

|**Order extended by customer**
|When the customer extends an order in the __**order process**__.

|**Manual warehouse change for stock units**
|When the warehouse of a stock unit is manually changed in the order.

|**Change of ...**
|The event procedure will be triggered when one of the following parameters changes in an order. The following settings are available: **Change of order type**, ... **Repair status**, ... **Reason for return**.

|**New OpenTrans order**
|When a new OpenTrans order is carried out.
|====

__Table 2: overview **type of event: order change**__

==== Type of event: Documents

The following **events** can be used to trigger an event procedure. These events all relate to <<order-processing/orders/order-documents/generating-invoices#, **generating documents**  >>:

[cols="a,a"]
|====
|Event |Explanation

|**Invoice generated**, **Delivery note** ..., **List of delivery addresses** ..., **Pick list** ..., **Packing list** ..., **Offer** ..., **Dunning letter** ..., **Reversal document generated**, **Order confirmation generated**
|When one of the **documents are generated**. For example, when a **PDF invoice is generated** or when an existing invoice is __**newly generated**__. +
__**Important:**__ This event can also be triggered by a different event procedure when you use the procedure **generate invoice**.
|====

__Table 3: overview **type of event: documents**__

==== Type of event: Payment

The following **events** can be used to trigger an event procedure. These events all relate to <<order-processing/orders/managing-sales-orders/changing-order-60, **payment processes** >>:

[cols="a,a"]
|====
|Event |Explanation

|**Complete**
|When a __**complete payment has been booked**__ and an order has been assigned, i.e. when the order has been completely paid for.

|**Partial payment**
|When the customer makes a __**partial payment**__. +
If necessary, this event can also be triggered __**multiple times**__, e.g. if the customer makes several partial payments.

|**Overpay**
|When a customer has __**paid too much for an order**__.

|**Rejected**
|When a __**payment is rejected by a payment provider**__.

|**Initial payment is complete**
|When a deposit payment on __**production items**__ has been completely paid for. +
Go to <<order-processing/orders/_basic-settings#, **Settings » Orders » Basic settings**  >> to save the percent value for __**deposit payments on production items**__.

|**Payment canceled by the customer**
|When an already completed payment is canceled by the customer.
|====

__Table 4: overview **type of event: payment**__

=== Creating a new event procedure

The following description for creating a **new event procedure** uses the example found in image 1 on the **<<basics/automation/event-procedures#, Event procedures  >>** page of the manual. Select a **name** that allows you to recognize the event procedure immediately.

image::basics/automation/assets/ENG-Einstell-Auftraege-Ereignisaktionen-Neue-1.png[]

__Image 1: creating a **new event procedure**__

[.instruction]
Creating a new event procedure:

. Go to **Settings » Orders » Event procedures**.
. Click on the **green plus icon** in the lower left corner to create a new event procedure.
. Enter a **name** e.g. __**Klarna confirmation**__ and select **Outgoing items booked** as the **event**.
. **Save** the settings. +
→ The event procedure will be created.

[#configuration]
== Configuration

=== Explanation of the settings

You can edit or deactivate event procedures at any time. In other words, it is not necessary to delete complicated event procedures if you do not need them temporarily. You can deactivate them and reactivate them again later on.

Learn more about event procedures by looking at the examples in the following video tutorials:

[.linkBox]
link:https://www.plentymarkets.co.uk/a-3426/[Automatically sending an email with a tracking URL, window="_blank"]

[.linkBox]
link:https://www.plentymarkets.co.uk/a-3425/[Adding a free gift to an order, window="_blank"]

==== Section: Settings

Once you have **<<basics/automation/event-procedures#new-event-procedure, created  >>** an event procedure, the name and event will be displayed in the **settings** area and can be changed there.

[IMPORTANT]
.Check the settings before activation!
====
**Active**: Place a check mark to activate the event procedure or remove the check mark to deactivate it. Only activate a new event procedure if you have carried out and checked all of the settings. Activating a partially configured event procedure can cause errors to occur!
====

==== Section: Filter

Use filters to determine which orders should be included in the event procedure. In this section, you can create one or more filters for the event procedure.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-01.png[]

__Image 1: **filter** section__

===== Filter type: Order

The following filters can be used to select specific **<<order-processing/orders/managing-sales-orders#changing-order, order  >>** characteristics:

[cols="a,a"]
|====
|Filter |Explanation

|**Order type**
|Select one, several or all order types.

|**Order warehouse**
|Orders are filtered by one or more warehouses. +
**A warehouse in all positions** = Only those orders will be filtered that include stock units in the same warehouse. +
**Multiple warehouses per order** = Only those orders will be filtered that include stock units from different warehouses. +
Alternatively, select one or more warehouses to only include orders from the selected warehouse(s). +
For further information, refer to the <<basics/automation/event-procedures#configuration, **example configuration** >> in section 1.3.1.

|**Number of positions**
|Orders will be filtered according to the number of order items included in each order. You can choose between the options **1** and **&gt; 1**. In other words, you can either filter the orders that have one stock unit only or the orders that have multiple stock units.

|**Active user**
|Orders are filtered by the active user, i.e. the user who triggers the event procedure. You can also select **all** users at once.

|**Referrer**
|Orders are filtered by one or more referrers. You can also select **all** of the referrers at once.

|**Dunning level**
|Orders are filtered by one or more dunning levels. You can select **all** of the dunning levels at once. Alternatively, you can select the option **None** if you only want to include orders that do not have a dunning level.

|**Client (store)**
|Orders are filtered by one or more online stores/clients (stores). You can select **all** of the stores at once.

|**Flag**
|Orders are filtered by one or more flags. You can select **all** of the flags at once. Alternatively, you can select the option **None** if you only want to include orders that do not have a flag.

|**Value of items (gross)**
|Orders are filtered according to the gross value of items. You can enter two values and assign an operator to each one. +
For further information, refer to the <<basics/automation/event-procedures#configuration, **example configuration** >> in section 1.3.3.

|**Payment method**
|Orders are filtered by one or more payment methods. You can select **all** of the payment methods at once.

|**Payment status**
|Orders are filtered according to the payment status. For example, the status could be that the payment was rejected or is waiting. +
**Example:** If a payment provider rejects a customer's payment during the order process in the store, then you could use this event to set up a procedure here, e.g. automatically sending an email.

|**Loyalty program**
|Orders are filtered based on the loyalty program. +
**ALL** = Filters all orders. +
**None** = Filters orders that do not belong to any loyalty program. +
**Amazon Prime** = Filters <<omni-channel/multi-channel/amazon#420, **Amazon Prime** >> orders. +
**Amazon NextDay** = Filters Amazon orders that are shipped the next day. +
**Amazon SecondDay** = Filters Amazon orders that are shipped the day after tomorrow. +
**eBay Plus** = Filters eBay Plus orders.

|**Order weight**
|Orders are filtered based on the total weight of all items included in the order. Use operators like greater than, less than and equals (&gt;, &lt;, =) and the units g and kg to filter orders with a specific weight.
|====

__Table 1: overview filter type: **Order**__

===== Filter type: Item

The following filters can be used to select specific **<<item/managing-items#, items>>** included in the orders:

[cols="a,a"]
|====
|Filter |Explanation

|**Stocked item, Production item, Special order item, Contains colli**
|Orders are filtered by the type of item that is included. Various types of items can be included in one order.

|**Contains only** ...
|Same as above. However, filters orders that only contain this one type of item.

|**Item is included**
|Enter the item IDs that should be filtered by. Searches for all of the orders that contain the item(s).
|====

__Table 2: overview filter type: **Item**__

===== Filter type: Customer

The following filters can be used to select specific **<<crm/managing-customer-data#, customer data>>** included in the orders:

[cols="a,a"]
|====
|Filter |Explanation

|**Customer rating**
|Orders are filtered by the customer rating and operator that were selected. +
If you only want to filter orders that do not have a customer rating, then select the operator **==** and the **gray stars**.

|**Customer class**
|Orders are filtered according to one or more customer classes. You can select **all** of the customer classes at once.

|**Customer type**
|Orders are filtered according to the customer type.

|**Age rating: Customer**
|Orders are filtered by one or more age ratings. You can select **all** of the age ratings at once. Alternatively, you can select the option **None** if you only want to include orders that do not have an age rating.

|**VAT number**
|Orders are filtered according to the VAT number. Options: The VAT number is **available** or **not available**.

|**Number of orders**
|Use operators like **greater than**, **less than** and **equals** (&gt;, &lt;, =) to specify the quantity of orders. +
For further information, refer to the <<basics/automation/event-procedures#configuration, **example configuration** >> in section 1.3.2.

|**Revenue**
|Filters the customers who generated a specific amount of revenue during a specific time period. If desired, returns can also be included as revenue.
|====

__Table 3: overview filter type: **Customer**__

==== Filter type: Shipping

The following filters are available:

[cols="a,a"]
|====
|Filter |Explanation

|**Valid DHL Packstation**
|Orders are filtered that contain a valid DHL Packstation as the delivery address.

|**Faulty DHL Packstation**
|Orders are filtered that contain a faulty DHL Packstation as the delivery address.

|**Country of delivery**
|Orders are filtered according to one or more countries of delivery. You can select **all** of the countries of delivery at once.

|**Shipping method**
|Orders are filtered according to one or more shipping methods. You can select **all** of the shipping methods at once.

|**Shipped on**
|Orders are filtered according to the shipping date. Options: **Available**, **not available** or **in the future**.

|**Shipping costs (gross)**
|Orders are filtered according to the gross shipping costs. You can enter a value and assign an operator to it. +
For further information, refer to the <<basics/automation/event-procedures#configuration, **example configuration** >> in section 1.3.3.

|**Shipping by FBA only**
|This filter searches for orders that are completely shipped by Amazon with Amazon Multi-Channel. +
The filter is used to search for orders that are made up of several shipments. You can then inform the recipient that he or she will receive more than one shipment.

|**Shipping partially by FBA**
|This filter searches for orders that contain items that are partially shipped by Amazon with Amazon Multi-Channel. +
The filter is used to mark the corresponding orders.
|====

__Table 4: overview filter type: **Shipping**__

===== Filter type: Market

The following filters are available:

[cols="a,a"]
|====
|Filter |Explanation

|**eBay**
|Filters the orders that were generated by the market eBay.
|====

__Table 5: overview filter type: **Market**__

==== Filter: Example configurations

In this section, you will see examples of the filters and explanations of their settings. Most filters can be configured very quickly by selecting one or more options (example in image 4). These filters do not need detailed explanations. Some filters are configured by selecting a certain range. These filters use operators like **greater than**, **less than** or **equals** (&gt;, &lt;, =). We will now show you different options.

[#13.1]
===== Filter: Order warehouse

Orders are filtered by one or more warehouses. Multiple warehouses can be used in combination with the operators **AND** and **OR**.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-02.png[]

__Image 2: **order warehouse** filter__

In the example configuration in image 2, only those orders with both warehouses will be affected. This is because the operator **AND** was chosen. If the operator **OR** is selected instead, then orders are included if one of the selected warehouses are saved for them.

[.instruction]
Configuring the order warehouse filter:

. Go to **Settings » Orders » Event procedures**.
. Click on the event procedure that you want to add this filter to or create a new event procedure.
. Click on the **green plus icon** in the filter section.
. Select the filter type **Order warehouse**. +
→ The filter will be created.
. Carry out the desired settings within the filter (example in image 2).
. Click on the **save icon** to save the settings.

[#13.2]
===== Filter: Number of orders

You can use this filter to trigger a procedure once a customer has placed a certain number of orders. The procedure could be e.g. sending an email that includes a gift card.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-03.png[]

__Image 3: **number of orders** filter__

In the example, the procedure is triggered once a customer has placed at least 10 orders. You also have to set up the customer filter for this procedure. The customer filter specifies which **customer type** the event procedure should be applied to, e.g. **customer**.

[#13.3]
===== Filter: Value of items (gross)

You can use the **value of items** filter to specify a range for the gross value of items. You can use two different fields to specify the range. As such, it is possible to create customized settings.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-04.png[]

__Image 4: **value of items (gross)** filter__

In the example, all of the orders will be filtered that have a gross value of items under 10 Euro as well as all the orders that have a gross value of items greater than or equal to 100 Euro.

==== Add filter

Click on the **green plus icon** to add a new filter to an event procedure (image 5, red arrow). Afterwards select the **filter type** for the filter.

[TIP]
.Folder structure
====
Filters are sorted into sections and folders. Search for the folder and click on the small **plus icon** to open the content.
====

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-05.png[]

__Image 5: selecting the filter options__

[.instruction]
Adding a filter:

. Go to **Settings » Orders » Event procedures**.
. Click on the event procedure that you want to add a filter to.
. Click on the **green plus icon** in the filter section (image 5, red arrow).
. Select the desired **filter type**. +
→ The filter will be created.
. Carry out the desired settings within the filter.
. Click on **Add**.

In this example, only **orders** and **credit notes** will be included in the event procedure.

==== Section: Procedures

In the **Procedures** section, you create the procedures that are to be carried out by the system automatically.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-06.png[]

__Image 6: **procedures** section__

This example shows three procedures and the settings that can be selected for them. All of the procedures are described below. They are grouped according to the type of procedure.

===== Procedure type: Item

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Add item**
|Enter the item ID. Procedure adds a specified item to an order.

|**Send a coupon item to the manufacturer**
|Select a template. Procedure sends the manufacturer a coupon item in the selected template.

|**Assign serial numbers**
|Procedure assigns a serial number to the order.
|====

__Table 6: overview procedure type: **Item**__

===== Procedure type: Orders

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Create credit note**
|Automatic generation of a credit note when the specified event occurs. +
Select one of the following settings for the option **Date**: +
**Standard** = Will be created with the current date and time. +
**Return date** = Will be created with the date the return was created on. +
**Order date** = Will be created with the date the order was created on.

|**Use order template**
|Go to <<order-processing/orders/order-template#, **Settings » Orders » Order template**  >> to create order templates.

|**Generate delivery orders**
|Automatic generation of delivery orders when the specified event occurs. +
**Important**: This option will only be displayed if the <<order-processing/orders/managing-sales-orders#delivery-order, **warehouse configuration**  >> that is necessary for delivery orders has been set up correctly.

|**Split into delivery orders by gross value of items**
|Splits the order items of an order into various delivery orders. They are split by an amount, which the stock units in a delivery order are not allowed to exceed. You can set up an error status that the delivery order receives if one of its stock unit exceeds the selected amount.

|**Split into delivery orders by item availability**
|Orders are split into delivery orders by item availability. **Group** the availabilities to do so. Configure the groups by moving the desired availabilities into the column on the right. An additional order is created for each group. This order contains only those items with availabilities that were saved for this group.

|**Split into orders by item availability**
|Same as the procedure above. Orders are split into orders by item availability.

|**Split by available line of items**
|Orders are split by an attribute that you select. This is done with the help of the available stock. If different variations of an item were ordered and not all of them are fully available, the order will be split. Items that are available immediately will remain in the original order. Delivery orders will be created for those items that are missing variations.

|**Split by delivery date**
|Orders are automatically split into orders by the delivery date that was saved. The customer can save the delivery date during the checkout process. The stock units' delivery date can also be saved or changed in the order itself. You can also use a **group function** to assign a delivery date to the orders.

|**Change order type**
|Select the type of order that you want an order to be changed to.

|**Change status**
|Select the status that you would like to set with the event procedure. +
**Ignore <<order-processing/orders/managing-sales-orders#delivery-order, delivery orders  >>**: If you use the **Change status** procedure for an order that includes delivery orders, then the status of the delivery orders will also be changed by default. Place a check mark next to this option if you only want the status of the main order to be changed.

|**Change flag**
|Select the flag that you would like to set with the event procedure.

|**Change dunning level**
|Select the dunning level that you would like to set with the event procedure.

|**Change status of the main order**
|Select the status that a main order should be set to when an order is split (function: **split up order**) or when the function **generate delivery orders** is used.

|**Calculate sales data for data export**
|When invoices or credit notes are created, the revenue data is generally saved in a separate data base. This helps the system perform and react quickly. Internal invoices may not be created for some payment methods e.g. **Klarna**, **Neckermann** or **Quelle**. Therefore, the data base does not contain data for these payment methods. However, you can generate the export data for such orders (COLLMEX, DATEV etc.) with the help of an event procedure. +
**Important**: This procedure only goes into effect if the payment method is **Quelle**, **Klarna** or **Neckermann**. This is why they should also be selected in the filter. You should select **order**, **warranty** and / or **repair** as the **order type** because invoices can only be generated for these types.

|**Book outgoing items**
|Check the box if the event should book outgoing items.

|**Notify Otto of changes to the order**
|This procedure is used to notify the market Otto of any order **status changes**. There are the order statuses **Order received**, **Outgoing items booked**, **Return** and **Cancellation**.

|**Open URL**
|This procedure opens a URL that is saved here. You can specify information about orders, e.g. the order ID, by adding the template variable **OrderID** to the end of the URL. Enter the complete URL based on the following pattern: **http://www.example.com**. +
If you want to use the order ID, then use the pattern: **http://www.example.com/[OrderID]/**. +
The available template variables are displayed in the procedure. +
**HTTP method** = You can select **GET**, **PUT** or **POST**. +
**Content type** = Save the content type for the URL. +
**Example**: If XML content should be transferred, enter **text/xml**. +
**Request Content** = You can transfer texts here, e.g. XML or JSON content.

|**Assign sales representative to order**
|This procedure saves a sales representative in an order. The sales representative is assigned based on the order recipient's zip code. In order for a sales representative to be assigned, you have to save a range of zip codes in the sales representative's customer data. The sales representative's ID is saved, not the name. +
For further information, refer to the **<<crm/managing-customer-data#, New customer>>** page of the manual.

|**Delete Klarna invoice**
|Deletes an invoice that has the payment method **Klarna** when a cancellation occurs. For further information regarding this and other event procedures, refer to the <<basics/automation/event-procedures#configuration, **Klarna** >> page of the manual.

|**Notify Cdiscount of order changes**
|This procedure is used to notify the market <<basics/automation/event-procedures#configuration, **Cdiscount** >> of any order status changes.

|**Send "Order complete" to DaWanda**
|A procedure to inform the market DaWanda about completed orders. For further information regarding this and other event procedures, refer to the <<basics/automation/event-procedures#configuration, **DaWanda** >> page of the manual.
|====

__Table 7: overview procedure type: **Orders**__

Note the information regarding **<<order-processing/orders/managing-sales-orders#delivery-order, delivery orders  >>** if you want to change the status of main orders using event procedures for delivery orders.

===== Procedure type: Documents

In order for a document to be generated, i.e. to receive the desired configuration and the correct layout, it has to be configured in the corresponding menu and a template has to be saved. For further information, refer to the **<<order-processing/orders/order-documents#, Documents  >>** page of the manual.

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Generate invoice**
|Automatic generation of an invoice when the specified event occurs. +
When choosing this option, further options will appear. You can enter a **payment due date**, an **early payment discount** as well as a **comment**.

|**Generate multi-invoice**
|Only for plentymarkets Enterprise.

|**Generate order confirmation**
|Automatic generation of an order confirmation when the specified event occurs.

|**Generate credit note**
|Automatic generation of a credit note when the specified event occurs. +
Select one of the following settings for the option **Date**: +
**Standard** = Will be created with the current date and time. +
**Credit note date** = Will be created with the date the credit note was received on.

|**Generate adjustment form**
|Automatic generation of an <<omni-channel/online-store/standard/documents/adjustment-form#, **adjustment form**  >> when the specified event occurs. +
An adjustment form is used as a written record for accounting purposes. It is used, e.g. for credit notes that are not paid off or to keep track of a reimbursement, e.g. from a canceled invoice.

|**Generate multi credit note**
|Only for plentymarkets Enterprise.

|**Generate delivery note**
|Automatic generation of a delivery note when the specified event occurs. +
When choosing this option, a text field will appear in which you can enter a comment.

|**Generate dunning letter**
|Automatic generation of a dunning letter when the specified event occurs.

|**Generate return label**
|Automatic generation of a return label when the specified event occurs.

|**Generate gift card**
|Automatic generation of a gift card when the specified event occurs.

|**Generate reversal document**
|Automatic generation of a reversal document when the specified event occurs. The reversal documents cancels an invoice not an order. Therefore the procedure will only be carried out for orders that have an invoice.
|====

__Table 8: overview procedure type: **Documents**__

===== Procedure type: Customer

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Change customer rating**
|Select the new customer rating that should be applied.

|**Change customer type**
|Select the new customer type that should be applied.

|**Send email**
|Determine which type of emails should be sent to which recipients or customers. Select the desired combination of **template** and **recipient** and then click on the **plus icon** to create the procedure. You can create combinations as desired for this function. By clicking on the **delete icon**, the recipients will be deleted. If no email recipients have (yet) been defined for an event procedure, then the note **no recipients** will be displayed.

|**Send eBay message**
|Select the desired email template for the message.

|**Assign sales representative to customer**
|This procedure automatically saves sales representatives in the customer data. In order for a sales representative to be assigned, you have to save a range of zip codes in the sales representative's customer data. The sales representative's **ID** is saved, not the name. For further information, refer to the **<<crm/managing-customer-data#, New customer>>** page of the manual.

|**Change customer class**
|Select the new customer class that should be applied.
|====

__Table 9: overview procedure type: **Customer**__

===== Procedure type: Shipping

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Assign storage location**
|Check the box if the event should assign a storage location.

|**Create shipping packages**
|Creates shipping packages for an order before the order is opened in the shipping center.

|**Transfer shipping permission to FBA**
|Permission will be sent to **<<omni-channel/multi-channel/amazon#, FBA>>** so that items are actually shipped by FBA.

|**Send shipping confirmation**
|A shipping confirmation is sent to a payment provider as soon as the items which were purchased via this payment provider have been shipped. +
Available for: **Amazon Payments**, **Amazon Payments Advanced,** **BillSAFE**, **DaWanda**, **eBay**, **Gimahhot**, **Hood**, **Klarna**, **LaRedoute**, **Masterpayment**, **Payolution**, **PAYONE**, **Plus.de**, **POSTPAY**, **Rakuten**, **Zentralverkauf**, **Worldpay**
|====

__Table 10: overview procedure type: **Shipping**__

===== Procedure type: Payment methods

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Send credit note**
|A credit note will be sent to a payment provider. +
Available for: **ClickandBuy**, **MeinPaket**, **PAYONE**, **POSTPAY**, **Sage Pay**, **Worldpay**

|**Send order to Klarna**
|An order will be sent to Klarna.

|**Notify Klarna of changes to the order**
|Klarna will be notified of a change to the order.

|**Send reversal to ClickandBuy**
|A reversal will be sent to ClickandBuy.

|**Send refund**
|A refund will be sent to a payment provider. +
Available for: **Amazon Payments**, **Amazon Payments Advanced**, **Payolution**.

|**Send refund to Masterpayment**
|A refund will be sent to Masterpayment.

|**Send cancellation**
|A cancellation will be sent to a payment provider. +
Available for: **Amazon Payments**, **Amazon Payments Advanced**, **ClickandBuy**, **Plus.de**, **POSTPAY**, **Sage Pay**, **Worldpay**.

|**Send cancellation or credit note**
|Depending on the payment and shipping status, either a cancellation or a credit note will be sent to a payment provider. +
Available for: **Worldpay**.

|**Permit payment via direct debit**
|You can activate or deactivate the payment method **direct debit** with the event procedure.

|**Permit payment per invoice**
|You can activate or deactivate the payment method **invoice** with the event procedure.

|**Send payment notification to DaWanda**
|A credit note will be sent to the market DaWanda.
|====

__Table 11: overview procedure type: **Payment methods**__

===== Procedure type: Return

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Generate DHL return label**
|Generates a DHL return label that is available in the **shipping center** or in the **My account** area of the online store.

|**Send return**
|Sends a return to the payment provider. +
Available for: **Amazon**, **BillSAFE**, **Cdiscount**, **Klarna**, **LaRedoute**, **MeinPaket**, **Plus.de**, **POSTPAY**, **Rakuten**, **Shopgate** +
For further information, refer to the <<order-processing/payment#, **payment method** >> page of the manual.
|====

__Table 12: overview procedure type: **Return**__

===== Procedure type: Listings

The following procedures are available:

[cols="a,a"]
|====
|Procedure |Explanation

|**Post feedback**
|Automatically creates **feedback** for a listing. +
Available for: Hood, ricardo, eBay.

|**Send payment notification to Hood**
|Automatically sends a payment notification. +
Available for: Hood, eBay.

|**Start dunning/dispute process on eBay**
|Automatically sends a dunning letter or starts a dispute process.
|====

__Table 13: overview procedure type: **Listings**__

==== Procedures: Example configurations

Most procedures are easily understood simply by looking at their names. In this section, you will see explanations and examples of those procedures that require additional information.

==== Procedure: Split by item availability

Orders are split into delivery orders or orders by item availability. To do so, you create one or more **availability groups**.

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-07.png[]

__Image 7: creating item availability groups__

[.instruction]
Creating availability groups:

. Click on the **availability** that you want to add to a group and drag it to the **green plus** button (image 7, blue arrow). +
→ The group will be created.
. Add as many other availabilities as needed by dragging them to the desired group (image 7, green arrow).
. Create other groups in the same way. The number of groups that you create determines how many orders the order will be split into.

[TIP]
.Example for automatically splitting an order into groups
====
If items that are available quickly, e.g. **ships immediately** and **ships in 24 hours** are shipped around the same time, then it would make sense to create a group for these availabilities (image 7). Create another group for items with longer availabilities. The order will now be split into two orders according to these groups.
====

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-08.png[]

__Image 8: availability groups__

==== Adding a new procedure

You can create as many procedures for an event as you want.

[TIP]
.Folder structure
====
Procedures are sorted into sections and folders. Search for the folder and click on the small **plus icon** to open the content.
====

image::basics/automation/assets/EN-Settings-Orders-Event-Procedures-Configuration-09.png[]

__Image 9: Adding a new procedure__

[.instruction]
Adding a procedure:

. Go to **Settings » Orders » Event procedures**.
. Click on the event procedure that you want to add a procedure to.
. Click on the **green plus icon** in the **Procedures** section.
. Select the desired **procedure type**.
. **Save** the settings. +
→ The procedure will be created.
. Carry out the desired settings within the procedure.
. Click on **Add**.

=== Several procedures per event

As many procedures can be added to an event as desired. Procedures are carried out in the order they are in if several procedures have been created for an event. The order can be changed using the arrows.

[TIP]
.Example for several procedures per event
====
You set up 3 procedures for the event **Order note from customer**. These procedures are **Change flag**, **Send email** and **Change flag** and they are in this order. With the help of the first change of the flag you will be able to recognize orders that the customer has sent additional information. Next, an email will be sent to the customer and then the flag will change again, so that you will see by the flag that the customer has already received an email.
====
