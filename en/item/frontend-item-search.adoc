= Managing the front end item search
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Facets, online store search, Faceted search, front end search, frontend search, store search
:position: 60
:url: item/frontend-item-search
:id: 5

The front end item search allows your customers to search your product portfolio in the online store. In the template plugin Ceres the faceted search is activated by default for the online store item search. In the old design Callisto, the faceted search is activated in the *System » System settings » Client » Select client » Online store » Item search* menu.

Find out how to create facets and facet values and how to use these facets in Callisto and Ceres.

[NOTE]
.Callisto with default search
====
If your online store is still based on the old design Callisto and the option *Default search* is activated in the *System » System settings » Client » Select client » Online store » Item search* menu, the index of the back end item search is also used for searching items in the front end.
====

[#90]
== Setting up the facetted search

Facets are filter options that are used to make search results in the online store more precise based on specific criteria, i.e. facets. The faceted search has the advantage that search results are not necessarily limited by the selected criteria. Rather, the criteria are always searched for in the entire database. In other words, users are led through the search process intuitively and search results do not have to be faked if customers select criteria that are not helpful.

The filter navigation is very flexible. Facets are not only used to find which items in a category have a specific property. Rather, they are also used to narrow down the item search by the following criteria:

* By attributes, characteristics and properties
* By the manufacturer
* By the item availability
* By price segments

In plentymarkets, these four facet types are combined with other values to determine the filter results. The more facets and values that you use, the more comprehensive the filters shown in the online store will be.

This function is configured in several different steps. First, facets are created. Then the settings of these facets are customized. Finally, the facets are linked to the desired values. Furthermore, you need to go to *System » System settings » Client » Open client » Online store » Item search* and select the option *Faceted search*.

[TIP]
.Linking items to facets
====
You do not have to directly link items to the individual facets. Rather, items are automatically assigned to facets. This is done by <<linking facets with facets values>> that are then saved in the item data record.
====

[#100]
=== Creating a facet

First, you need to create facets for the search, e.g. the facet "Colour" with the type *Attribute/property*.

[.instruction]
Creating a facet:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Click on *New*.
. Enter a *name* for the facet in the system's language. This name is shown in the online store.
. Select a *type* from the drop-down list. Pay attention to the information given in <<table-available-facet-types>>.
. Enter the *position* where the facet should be shown in the online store.
. *Save* the settings. +
→ The facet is created.


[[table-available-facet-types]]
.Available facet types
[cols="1,3"]
|====
|Facet type |Description

|*Price*
|Facets of the type *Price* do not have to be linked to values. Rather, customers can filter from the smallest to the largest price within a category.

|*Attribute/property*
|Facets of the type *Attribute/property* are linked to the attributes, characteristics and properties in your system. They are used to create diverse filters, e.g. colours, sizes etc.

|*Availability*
|Facets of the type *Availability*, e.g. "ships within 24 hours", need to be linked to the availabilities found under <<Settings » Item » Item availability>>.

|*Manufacturer*
|Facets of the type *Manufacturer*, e.g. "Adidas", are linked to the manufacturers found under <<item/managing-items#560, Settings » Item » Manufacturers>>.
|====

[#110]
=== Editing the facet

After you created the facet, the facet opens for editing. There are four tabs for carrying out additional settings and linking values.

[#120]
==== Carrying out the facet settings

Carry out the settings in the *Settings* tab as described below.

[.instruction]
Editing the facet

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet. +
→ The *Settings* tab opens.
. Carry out the settings. Pay attention to the information given in <<table-edit-facets>>.
. *Save* the settings.

[[table-edit-facets]]
.Editing facets; tab *Settings*
[cols="1,3"]
|====
|Setting |Description

|*Type*
|Shows the type that was selected when the facet was created. The type cannot be changed.

|*Sorting*
|Determines how the search results should be sorted. Depending on which option is selected, items will either be sorted by *relevance*, *position number* or alphabetically from *A-Z*.

|*Position*
|Indicates which position was selected when the facet was created. The position can be changed.

|*CSS class*
|Enter a CSS name. This name will be made available as a template variable in the CMS menu so that every facet can be saved as an individual class.

|*Selection type*
|Choose the selection type. +
*Restricting* = Further limits the filter with the selected value. All items will be displayed that have this value and that fulfil the criteria of any previously selected filters. +
*Multiple* = Makes it possible for multiple search results to be displayed together. For example, this option makes it possible for customers to select multiple manufacturers. The manufacturers' items will all be displayed together. +

|*Minimum number of hits*
|Specifies the minimum number of results that a facet value needs to have in order to be displayed in the online store.

|*Maximum number of facet values shown*
|Specifies the maximum number of facet values that will be displayed for each facet. Up to 250 facet values can be shown.
|====

[#130]
==== Saving the facet name in an additional language

When you create a facet, enter a name in the default language of the system. This name is shown in the online store. If you offer additional languages, enter the names of the facet in these languages in the *Name* tab. To do so, proceed as described below.


[.instruction]
Saving the facet name in an additional language:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet. +
→ The *Settings* tab opens.
. Click on the *Name* tab.
. Enter a name in the language.
. *Save* the settings.

[#140]
=== Linking a facet to a value

Use the *Values* tab to link facets to different values. For example, if you have a colour facet of the type *Attribute/property*, then create the values e.g. white, black, red, blue, etc. and link these values with the existing item attributes, characteristics and properties in your system. To do so, proceed as described below.

[#150]
==== Creating a value

[.instruction]
Creating a value:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet.
. Open the *Values* tab.
. At the bottom left, click on the *green plus sign*. +
→ The *Creating a value* window opens.
. Enter a *name* for the value in the system's language.
. Enter a *position*.
. *Save* the settings. +
→ The value is created.
. *_Optional:_* In the *Name* tab, enter translations for the name of the value.
. *_Optional:_* In the *Settings* tab, enter a CSS class.

[#160]
==== Linking a value

Now, link the value with the data in the system. You can link more than one back end value to each facet value. For example, if you create facets of the type *Attribute/property*, you can group together attributes, characteristics and properties in one filter and thus display them together in the search result.

[.instruction]
Linking the facet value to the back end value:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet.
. Open the *Values* tab.
. Click on the value.
. Click on the *Link* tab.
. Click on the back end value.
. In the lower left-hand corner, click on *Link*. +
→ The back end value is linked to the facet's value.
. *_Optional:_* Link additional values.
. *Save* the settings.

[#170]
=== Linking facets to images

In the *Images* tab, you link facets and facet values with images. For example, link the manufacturers with images if you want to show manufacturer logos rather than names to list manufacturers in the online store.

[#180]
==== Uploading an image

[.instruction]
Uploading an image:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet.
. Click on the *Images* tab.
. Click on *Upload files*.
. Navigate to the storage location of the images.
. Select the image file. +
→ The image file is uploaded.
. *Save* the settings.

[#190]
==== Linking an image

Now, link the image with the data saved in the system. Each image can be linked to one value.

[.instruction]
Linking an image:

. Go to *Systems » Client » Global » Services » Faceted search*.
. Open the facet.
. Click on the *Images* tab.
. Move your cursor over the image. +
→ At the bottom of the image, a drop-down list with values is shown.
. In the drop-down list, click on the value.
. *Save* the settings. +
→ The image is linked with this value. +
→ The image is shown with a red border. +
→ The name of the value is shown on the image.

[#200]
=== Linking facets to a client

After you have created facets, go to *System » System settings » Client » Open client » Services » Facet links* to link these facets to a client. Decide which facets are relevant for each client and which ones are not. Changes that you make will go into effect in real time. Proceed as described below to link facets to a client.

[NOTE]
.Facets of the type Price
====
Only one facet of the type Price can be linked for each client.
====

[.instruction]
Linking facets in the online store:

. Go to *System » System settings » Client » Select client » Services » Facet links*.
. In the list to the left, click on the facet you want to link to this store.
. Click on *Link facet* in the lower left-hand corner.
. *_Optional:_* Activate the option *Make images available*, to show the images linked to the facet available in the online store.
. Repeat this process for all remaining facets that should be linked.
. *Save* the settings. +
→ The facet is linked in the online store.

[#210]
== Using the faceted search in Callisto

In the old design Callisto, different search methods can be used for the front end search. Which search is used depends on the setting in the *System » System settings » Client » Select client » Online store » Item search* menu. The following options are available:

* *Default search* +
If the option *Default search* is activated, the <<item/managing-items#385, index of the back end item search>> is used for searching items in the front end.
* *Findologic* +
For further information about setting up the item search using Findologic, refer to the <<online-store/online-store/extras/findologic#, Findologic>> page of the manual.
* *Faceted search (Elastic Search - BETA)* +
→ Find out how to use the new faceted search (Elastic Search - BETA) in the <<item/frontend-item-search#270, Using Callisto with the faceted search (Elastic Search - BETA)>> chapter.


[#270]
=== Using Callisto with the faceted search (Elastic Search - BETA)

Activate the new faceted search by going to *System » System settings » Client » Open client » Online store » Item search* and activating the option *Faceted search (Elastic Search - BETA)*. Set up the faceted search as described in the <<item/frontend-item-search#90, Setting up the faceted search>> chapter. Then proceed as described below to use the new faceted search in Callisto.

[#280]
==== Callisto + Faceted search (Elastic Search- BETA): Activating fields for the search

Activate those fields to be searched during a search.

[.instruction]
Activating fields for the search:

. Go to *System » System settings » Item » Search » Front end » Search settings*.
. In the column *Active*, activate those fields to be considered during a search.
. For the activated fields, enter the weight you want to give the information stored in this field into the column *Boost*. The higher the number, the more this area will be prioritized in the search results. Results will be displayed first for the field with the highest number. +
*_Tip:_* You can enter any number.
. *Save* the settings.

==== Callisto + Faceted search (Elastic Search- BETA): Changing languages

You can activate the faceted search for up to three languages. The languages *German*, *English* and *French* are activated by default. If you operate online stores in other languages, you can select different languages. To do so, proceed as described below.

[IMPORTANT]
.Search index is completely rebuilt after any changes
====
If you change the language settings, the search index is completely rebuilt. That means that all items are added to the index again from scratch. Depending on how many items you have, this process can take several days.
====

[.instruction]
Changing the languages:

. Go to *System » System settings » Item » Search » Front end » Languages*.
. Deactivate a language you do not need.
. Activate a language. +
*_Note:_* Only three languages can be activated per system.
. *Save* the settings. +
→ The items are added to the search index for the activated languages.

[#290]
=== Adding the faceted search to Callisto

In the old design Callisto, the faceted search is activated in the *NavigationFacetsList* template. The template *NavigationFacetsList* is part of the design Callisto Light. This template includes code that you can use to create a faceted search. Of course, this code can be modified as needed. Use the template function <<online-store/online-store/cms-syntax#web-design-navigation-container-navigationfacetslist#, Container_NavigationFacetsList>> to insert the template *NavigationFacetsList* into the desired area of the online store. To do so, proceed as described below.

[TIP]
.Recommended templates
====
We recommend using the template function *Container_NavigationFacetsList* in *ItemViewCategoriesList* and *ItemViewSearchResultsList*. These templates are found in the menu *CMS » Web design » Folder: Layout » Folder: ItemView*.
====

[.instruction]
Adding the faceted search to Callisto:

. Go to <<CMS » Web design>>.
. Open the desired template.
. Insert the template function *Container_NavigationFacetsList* into the template to display the faceted search.
. *Save* the settings.
. Repeat the steps above if you want to insert the template function into additional templates.

[#300]
== Using the faceted search in Ceres

In Ceres, the faceted search is used by default. Set up the faceted search as described in the <<item/frontend-item-search#90, Setting up the faceted search>> chapter. Then proceed as described below to use the faceted search in Ceres.

[#310]
=== Ceres: Activating fields for the search

Activate those fields to be searched during a search.

[.instruction]
Activating fields for the search:

. Go to *System » System settings » Item » Search » Front end » Search settings*.
. In the column *Active*, activate those fields to be considered during a search.
. For the activated fields, enter the weight you want to give the information stored in this field into the column *Boost*. The higher the number, the more this area will be prioritized in the search results. Results will be displayed first for the field with the highest number. +
*_Tip:_* You can enter any number.
. *Save* the settings.

[#320]
=== Ceres: Changing languages

You can activate the faceted search for up to three languages. The languages *German*, *English* and *French* are activated by default. If you operate online stores in other languages, you can select different languages. To do so, proceed as described below.

[IMPORTANT]
.Search index is completely rebuilt after any changes
====
If you change the language settings, the search index is completely rebuilt. That means that all items are added to the index again from scratch. Depending on how many items you have, this process can take several days.
====

[.instruction]
Design language

. Go to *System » System settings » Item » Search » Front end » Languages*.
. Deactivate a language you do not need.
. Activate a language. +
*_Note:_* Only three languages can be activated per system.
. *Save* the settings. +
→ The items are added to the search index for the activated languages.

[#330]
=== Ceres: Adding the facetted search

For further information about setting up the faceted search in Ceres, refer to the <<online-store/setting-up-ceres#330, Setting up Ceres>> page of the manual.
