= Search function in the online store
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Facet, Facets, Webshop search function, Webshop search, Store search, Online store search, Search function, Faceted search, Search bar, Search field, Search, Frontend, Front end, Webshop, Item search, Search suggestion, Search suggestions, Ceres, Callisto, Shop, Online shop, Online store, Front end search, Frontend search, Front end item search, Search term, Search terms, Widget, Widgets, Weighting, Weight, Boost, Boost value
:position: 30
:url: item/frontend-item-search
:id: NKJXE3I
:author: team-item

Do customers have trouble finding items in your online store?
Customise the front end item search and help your customers find the products they’re looking for.

This page provides information about two different types of searches: the <<#50, search bar>> and the <<#80, faceted search>>.

[#50]
== Search bar

Customise the front end search bar to meet your needs!
You can decide what the search bar should look like in your online store and which results it should deliver.
For example, you can decide:

* which <<#60, type of search results>> your customers should see.
** Items that match the search term.
** Categories that match the search term.
* whether customers should see a list of <<#60, suggested search terms>> when they enter vague or misspelled text. "Did you mean…​"?
* <<#70, which item data>> the search term should correspond to, in order for the item to be included in the list of results.
** Item name, description, keywords, etc.

image::item/online-store/assets/search-results.png[]

[IMPORTANT]
.Customisable item search for Ceres 5
====
It’s possible to customise the front end item search for your link:https://marketplace.plentymarkets.com/en/plugins/sales/online-shops/ceres_4697[Ceres 5]{nbsp}icon:external-link[] store.
Lower versions of Ceres do not support this function.
====

[TIP]
.Partial words can also be used!
====
It’s no big deal if your customer only enters part of a word.
The search suggestions give results for prefixes, suffixes and partial words.
For example, the word "Couch" is suggested even if the customer enters "Couc" or "uch".
====

[#60]
=== Assembling the search field with widgets

//once Franz has given you the URL replace the link for drei Widgets

You can assemble your own custom search field with the help of <<online-store#, three ShopBuilder widgets>>.
The widgets contain additional settings, which you can configure, e.g. to highlight search terms or display the entire category path.

image::item/online-store/assets/three-widgets.png[]

[#70]
=== Which item data should be considered?

//use includes to have this info displayed in all three chapters, or even better, decide if it's necessary to have the info in three places or if you should restructure the page instead

//once it's been developed, add info that the seller can choose a text property to have a specific variation found under a different term like Blume and Tulpe

You can decide _which item data_ is relevant to the search function.
During a search, only the item data that you selected will be queried.

You can also decide _how heavily weighted_ each piece of item data should be.
The higher the number entered, the higher the item data field will be prioritised in the search result.

[.instruction]
Choosing and prioritising item data:

. Go to *Setup » Item » Search » Frontend » Search settings*.
. Activate the item data fields (icon:toggle-on[role="green"]) that should be included in the search results and search suggestions.
. If needed, enter a value into the *Boost* column.
. *Save* (icon:save[role="green"]) the settings.

[TIP]
.Which boost value should I enter?
====
You can enter any number as a boost value.
The default settings are appropriate in most cases.
These default settings prioritise the variation ID and the item ID.
So if someone searches for a number in your store, then the search results will give priority to these ID fields.
====

[TIP]
.What’s the difference between search results and search suggestions?
====
* Search results are the items or categories that match the search term.
* Search suggestions are similar words to whatever terms the customer entered.
Search suggestions help customers find what they’re looking for, even if they enter vague or misspelled text.
"Did you mean..."?

*_Note_*: If you activate an item data field for the search suggestions on the right, then the field will automatically be activated for the search results on the left too. Why? Otherwise you would be suggesting customers to use a search term that doesn’t deliver any results.
====

[#80]
== Faceted search

Facets are filter options that are used to make search results in the online store more precise based on specific criteria, i.e. facets. The faceted search has the advantage that search results are not necessarily limited by the selected criteria. Rather, the criteria are always searched for in the entire database. In other words, the search process is intuitive and search results do not have to be faked if customers select criteria that are not helpful.

The filter navigation is very flexible. Facets are not only used to find which items in a category have a specific characteristic. Rather, they are also used to narrow down the item search by the following criteria:

* By attributes, characteristics and properties
* By the manufacturer
* By the item availability
* By price segments

In plentymarkets, these four facet types are combined with other values to determine the filter results. The more facets and values that you use, the more comprehensive the filters shown in the online store will be.

This function is configured in several different steps.
First, you’ll <<#100, create facets>> and then you’ll <<#110, customise their settings>>. Finally, you’ll <<#140, link the facets to values>>.
You’ll also need to configure a few settings specifically for your <<#300, Ceres>> or <<#210, Callisto>> store.

[IMPORTANT]
.Do you have a "Ceres" or a "Callisto" store?
====
The faceted search is automatically activated for newer Ceres stores.
It needs to be manually activated for older Callisto stores.
====

[TIP]
.Linking items to facets
====
You do not have to directly link items to the individual facets. Rather, items are automatically assigned to facets. This is done by <<item/frontend-item-search#140, linking facets with values>> that are then saved in the item data record.
====

[#100]
=== Creating a facet

First, you need to create facets, e.g. the facet "Colour" with the type *Attribute/characteristic*.

[.instruction]
Creating a facet:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Click on *New*.
. Enter a *name* for the facet in the system’s language. This name is shown in the online store.
. Select a *type* from the drop-down list. Note <<table-available-facet-types>>.
. Enter the *position* where the facet should be shown in the online store.
. *Save* the settings. +
→ The facet is created.


[[table-available-facet-types]]
.Available facet types
[cols="1,3"]
|====
|Facet type |Explanation

| *Price*
|Facets of the type *Price* do not have to be linked to values. Rather, customers can filter from the smallest to the largest price within a category.

| *Attribute/characteristic*
|Facets of the type *Attribute/characteristic* are linked to the attributes, characteristics and properties in your system. They are used to create diverse filters, e.g. colours, sizes etc.

| *Availability*
|Facets of the type *Availability*, e.g. “ships within 24 hours”, are linked to the <<item/settings/availabilities#, availabilities>> found under *Setup » Item » Availability*.

| *Manufacturer*
|Facets of the type *Manufacturer*, e.g. “Adidas”, are linked to the <<item/settings/manufacturers#, manufacturers>> found under *Setup » Item » Manufacturers*.
|====

[#110]
=== Editing a facet

Once you’ve created a facet, it will open and can be edited further. There are four tabs for carrying out additional settings and linking values.

[#120]
==== Carrying out the facet settings

Carry out the settings in the *Settings* tab as described below.

[.instruction]
Editing a facet:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet. +
→ The *Settings* tab opens.
. Carry out the settings. Note <<table-edit-facets>>.
. *Save* the settings.

[[table-edit-facets]]
.Editing facets; tab *Settings*
[cols="1,3"]
|====
|Setting |Explanation

| *Type*
|Shows the type that was selected when the facet was created. The type cannot be changed.

| *Sorting*
|Determines how the search results should be sorted. Depending on which option is selected, items will either be sorted by *relevance*, *position number* or alphabetically from *A-Z*.

| *Position*
|Indicates which position was selected when the facet was created. The position can be changed.

| *CSS class*
|Enter a CSS name. This name will be made available as a template variable in the CMS menu so that every facet can be saved as an individual class.

| *Selection type*
|Choose the selection type. +
*Restricting* = Further limits the filter with the selected value. All items will be displayed that have this value and that fulfil the criteria of any previously selected filters. +
*Multiple* = Makes it possible for multiple search results to be displayed together. For example, this option makes it possible for customers to select multiple manufacturers. The manufacturers’ items will all be displayed together. +

| *Minimum number of hits*
|Specifies the minimum number of results that a facet value needs to have in order to be displayed in the online store.

| *Maximum number of facet values shown*
|Specifies the maximum number of facet values that will be displayed for each facet. Up to 250 facet values can be shown.
|====

[#130]
==== Saving the facet name in an additional language

While creating a facet, you saved a name for it in the system’s default language. This name is shown in the online store. If you offer additional languages, enter the names of the facet in these languages in the *Name* tab. To do so, proceed as described below.


[.instruction]
Saving the facet name in an additional language:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet. +
→ The *Settings* tab opens.
. Click on the *Name* tab.
. Enter a name in the language.
. *Save* the settings.

[#140]
=== Linking facets to values

Use the *Values* tab to link facets to different values. For example, if you have a colour facet of the type *Attribute/characteristic*, then create the values e.g. white, black, red, blue, etc. and link these values with the existing item attributes, characteristics and properties in your system. To do so, proceed as described below.

[#150]
==== Creating a value

[.instruction]
Creating a value:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet.
. Click on the *Values* tab.
. Click on *Add new value* (icon:plus[role="green"]) in the lower left corner. +
→ The *Create new value* window opens.
. Enter a *name* for the value in the system’s language.
. Enter a *position*.
. *Save* the settings. +
→ The value is created.
. *_Optional_*: In the *Name* tab, enter translations for the name of the value.
. *_Optional_*: In the *Settings* tab, enter a CSS class.

[#160]
==== Linking a value

Now, link the value with the data in the system. You can link more than one back end value to each facet value. For example, if you create facets of the type *Attribute/characteristic*, you can group together attributes, characteristics and properties in one filter and thus display them together in the search result.

[.instruction]
Linking the facet value to the back end value:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet.
. Click on the *Values* tab.
. Click on the value.
. Click on the *Link* tab.
. Click on the back end value.
. In the lower left-hand corner, click on *Link*. +
→ The back end value is linked to the facet’s value.
. *_Optional_*: Link additional values.
. *Save* the settings.

[#170]
=== Linking facets to images

In the *Images* tab, you link facets and facet values with images. For example, link the manufacturers with images if you want to show manufacturer logos rather than names in your online store.

[#180]
==== Uploading an image

[.instruction]
Uploading an image:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet.
. Click on the *Images* tab.
. Click on *Upload files*.
. Navigate to wherever you’ve saved the image files.
. Select the image file. +
→ The image file is uploaded.
. *Save* the settings.

[#190]
==== Linking an image

Now, link the image with the data saved in the system. Each image can be linked to one value.

[.instruction]
Linking an image:

. Go to *Setup » Client » Settings » Services » Faceted search*.
. Open the facet.
. Click on the *Images* tab.
. Move your cursor over the image. +
→ At the bottom of the image, a drop-down list with values is shown.
. In the drop-down list, click on the value.
. *Save* the settings. +
→ The image is linked with this value. +
→ The image is shown with a red border. +
→ The name of the value is shown on the image.

[#200]
=== Linking facets to clients

Once you’ve created facets, go to *Setup » Client » Select client » Services » Facet links* and link these facets to the client. Decide which facets are relevant for each client and which ones are not. Changes that you make will go into effect in real time. Proceed as described below to link facets to a client.

[NOTE]
.Facets of the type Price
====
Only one facet of the type Price can be linked for each client.
====

[.instruction]
Linking facets in the online store:

. Go to *Setup » Client » Select client » Services » Facet links*.
. In the list on the left, click on the facet you want to link to this store.
. Click on *Link facet* in the lower left-hand corner.
. *_Optional_*: Activate the option *Make images available* if you want the images that are linked to this facet to be visible in the online store.
. Repeat this process for all remaining facets that should be linked.
. *Save* the settings. +
→ The facet is linked in the online store.

[#300]
=== Using the faceted search in Ceres

By default, Ceres uses the faceted search together with ElasticSearch. <<#80, Set up the faceted search>> and then proceed as described below to use the faceted search in Ceres.

[#310]
==== Ceres: Activating fields for the search
////
In den Sucheinstellungen legst du fest, welche Felder bei der ElasticSearch-Suche berücksichtigt werden. Bei einer Suche im Webshop werden also nur die Daten der aktivierten Felder durchsucht. In der Spalte *Boost* gibst du ein, mit welcher Gewichtung das Feld zur Bewertung von Suchergebnissen beitragen soll. Je höher die eingegebene Zahl, desto höher wird der Inhalt des Felds für das Suchergebnis priorisiert. You can enter any number as a boost value. The default settings are appropriate in most cases. These default settings prioritise the variation ID and the item ID. Wenn in deinem Webshop also nach einer Zahl gesucht wird, werden Suchergebnisse für diese Zahl in den ID-Feldern priorisiert. Gehe wie unten beschrieben vor, um die Standardeinstellungen zu ändern.

[.instruction]
Activating fields for the search:

. Go to *Setup » Item » Search » Frontend » Search settings*.
. Aktiviere in der Spalte *Aktiv* die Felder, die bei der Suche berücksichtigt werden sollen.
. Gib für die aktivierten Felder in der Spalte *Boost* eine Gewichtung ein. The higher the number, the more this area will be prioritized in the search results. Results will be displayed first for the field with the highest number. +
*_Tip_*: Du kannst eine beliebige Zahl eingeben.
. *Save* the settings.
////

//use includes to have this info displayed in all three chapters, or even better, decide if it's necessary to have the info in three places or if you should restructure the page instead

You can decide _which item data_ is relevant to the search function.
During a search, only the item data that you selected will be queried.

You can also decide _how heavily weighted_ each piece of item data should be.
The higher the number entered, the higher the item data field will be prioritised in the search result.

[.instruction]
Choosing and prioritising item data:

. Go to *Setup » Item » Search » Frontend » Search settings*.
. Activate the item data fields (icon:toggle-on[role="green"]) that should be included in the search results and search suggestions.
. If needed, enter a value into the *Boost* column.
. *Save* (icon:save[role="green"]) the settings.

[TIP]
.Which boost value should I enter?
====
You can enter any number as a boost value.
The default settings are appropriate in most cases.
These default settings prioritise the variation ID and the item ID.
So if someone searches for a number in your store, then the search results will give priority to these ID fields.
====

[TIP]
.What’s the difference between search results and search suggestions?
====
* Search results are the items or categories that match the search term.
* Search suggestions are similar words to whatever terms the customer entered.
Search suggestions help customers find what they’re looking for, even if they enter vague or misspelled text.
"Did you mean..."?
====

[#320]
==== Ceres: Changing languages

You can activate the faceted search for up to three languages. The languages *German*, *English* and *French* are activated by default. If you run online stores in other languages, you can select different languages. To do so, proceed as described below.

[IMPORTANT]
.Search index is completely rebuilt after any changes
====
If you change the language settings, the search index is completely rebuilt. That means that all items are added to the index again from scratch. Depending on how many items you have, this process can take several days.
====

[.instruction]
Changing a language:

. Go to *Setup » Item » Search » Frontend » Languages*.
. Deactivate a language you do not need.
. Activate a language. +
*_Note_*: Only three languages can be activated per system.
. *Save* the settings. +
→ The items are added to the search index for the activated languages.

[#330]
==== Ceres: Adding the facetted search

For further information about setting up the faceted search in Ceres, refer to the <<online-store/setting-up-ceres#330, Setting up Ceres>> page of the manual.

[#210]
=== Using the faceted search in Callisto

In the old design Callisto, different search methods can be used for the front end search. Which type of search is used depends on which settings you selected in the menu *Setup » Client » Select client » Online store » Item search*. The following options are available:

* *Default search* +
If you choose the option *Default search*, then the <<item/use-cases/search-behaviour#200, back end item search index>> will be used when customers search for items in the front end.
* *Findologic* +
→ For further information about setting up the item search using Findologic, refer to the <<online-store/online-store/extras/findologic#, Findologic>> page of the manual.
* *Faceted search* +
→ For further information about setting up the faceted search, refer to the chapter <<item/frontend-item-search#270, Using the faceted search in Callisto>>.

[#270]
==== Using the faceted search in Callisto

The new faceted search is based on ElasticSearch. You can use the faceted search by opening the menu *Setup » Client » Select client » Online store » Item search* and activating the option *Faceted search*. <<#80, Set up the faceted search>>. Then proceed as described below to use the faceted search in Callisto.

[#280]
===== Callisto + Faceted search: Activating fields for the search
////
In den Sucheinstellungen legst du fest, welche Felder bei der ElasticSearch-Suche berücksichtigt werden. Bei einer Suche im Webshop werden also nur die Daten der aktivierten Felder durchsucht. In der Spalte *Boost* gibst du ein, mit welcher Gewichtung das Feld zur Bewertung von Suchergebnissen beitragen soll. Je höher die eingegebene Zahl, desto höher wird der Inhalt des Felds für das Suchergebnis priorisiert. You can enter any number as a boost value. The default settings are appropriate in most cases. These default settings prioritise the variation ID and the item ID. So if someone searches for a number in your store, then the search results will give priority to these ID fields. Gehe wie unten beschrieben vor, um die Standardeinstellungen zu ändern.

[.instruction]
Activating fields for the search:

. Go to *Setup » Item » Search » Frontend » Search settings*.
. Aktiviere in der Spalte *Aktiv* die Felder, die bei der Suche berücksichtigt werden sollen.
. Gib für die aktivierten Felder in der Spalte *Boost* eine Gewichtung ein. The higher the number, the more this area will be prioritized in the search results. +
*_Tip_*: Du kannst eine beliebig hohe Zahl eingeben.
. *Save* the settings.
////

//use includes to have this info displayed in all three chapters, or even better, decide if it's necessary to have the info in three places or if you should restructure the page instead

You can decide _which item data_ is relevant to the search function.
During a search, only the item data that you selected will be queried.

You can also decide _how heavily weighted_ each piece of item data should be.
The higher the number entered, the higher the item data field will be prioritised in the search result.

[.instruction]
Choosing and prioritising item data:

. Go to *Setup » Item » Search » Frontend » Search settings*.
. Activate the item data fields (icon:toggle-on[role="green"]) that should be included in the search results and search suggestions.
. If needed, enter a value into the *Boost* column.
. *Save* (icon:save[role="green"]) the settings.

[TIP]
.Which boost value should I enter?
====
You can enter any number as a boost value.
The default settings are appropriate in most cases.
These default settings prioritise the variation ID and the item ID.
So if someone searches for a number in your store, then the search results will give priority to these ID fields.
====

[TIP]
.What’s the difference between search results and search suggestions?
====
* Search results are the items or categories that match the search term.
* Search suggestions are similar words to whatever terms the customer entered.
Search suggestions help customers find what they’re looking for, even if they enter vague or misspelled text.
"Did you mean..."?
====

===== Callisto + Faceted search: Changing languages

You can activate the faceted search for up to three languages. The languages *German*, *English* and *French* are activated by default. If you run online stores in other languages, you can select different languages. To do so, proceed as described below.

[IMPORTANT]
.Search index is completely rebuilt after any changes
====
If you change the language settings, the search index is completely rebuilt. That means that all items are added to the index again from scratch. Depending on how many items you have, this process can take several days.
====

[.instruction]
Changing the languages:

. Go to *Setup » Item » Search » Frontend » Languages*.
. Deactivate a language you do not need.
. Activate a language. +
*_Note_*: Only three languages can be activated per system.
. *Save* the settings. +
→ The items are added to the search index for the activated languages.

[#290]
==== Adding the faceted search to Callisto

In the old design Callisto, the faceted search is activated in the *NavigationFacetsList* template. The template *NavigationFacetsList* is part of the design Callisto Light. This template includes code that you can use to create a faceted search. Of course, this code can be modified as needed. Use the template function <<online-store/online-store/cms-syntax#web-design-navigation-container-navigationfacetslist, Container_NavigationFacetsList>> to insert the template *NavigationFacetsList* into the desired area of the online store. To do so, proceed as described below.

[TIP]
.Recommended templates
====
We recommend using the template function *Container_NavigationFacetsList* in *ItemViewCategoriesList* and *ItemViewSearchResultsList*. These templates are found in the menu *CMS » Web design » Folder: Layout » Folder: ItemView*.
====

[.instruction]
Adding the faceted search to Callisto:

. Go to *CMS » Web design*.
. Open the desired template.
. Insert the template function *Container_NavigationFacetsList* into the template to display the faceted search.
. *Save* the settings.
. Repeat the steps above if you want to insert the template function into additional templates.
