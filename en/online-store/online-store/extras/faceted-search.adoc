= Faceted search
:lang: en
include::{includedir}/_header.adoc[]
:keywords: Faceted search, Store search
:position: 120

*System » System settings » Client » Settings » Services » Faceted search*

[NOTE]
.Old: CMS & online store
====
This manual page describes functions that pertain to the old plentymarkets online shop *Callisto*. For information regarding the online store template *Ceres*, please refer to the <<omni-channel/online-store/setting-up-ceres#, Setting up Ceres page>>.
====

Facets are the various filter possibilities that are used to narrow down search results in the online store by specific criteria (facets). The faceted search has the advantage that search results are not necessarily limited by the selected criteria. Rather, the criteria are always searched for in the entire database. In other words, users are led through the search process intuitively and search results do not have to be faked if customers select criteria that are not helpful. Offer customers the faceted search to improve usability in your online store. The search only has a one hour delay in data synchronisation, so it is always up-to-date.

== Faceted search with plentymarkets

[IMPORTANT]
.Availability
====
Customers who have a plentymarkets Cloud contract can use the configurator to book the faceted search. This module is not available for own server systems.
====

You can customise the filter navigation and design it individually in your CMS. The faceted search gives customers many more options than are included in other searches, e.g. the property search. Facets are not only used to find which items in a category have a specific property. Rather, they are also used to narrow down the item search by the following criteria:

* by a desired price range
* by attributes and characteristics
* by the item availability
* by the producer

In plentymarkets, these four facet types are combined with other values to determine the filter results. The more facets and values that you use, the more comprehensive the filters will be. The next chapters teach you how that works exactly.

[[image-faceted-search-online-store]]
.example of the faceted search in the online store
image::omni-channel/online-store/setting-up-clients/extras/assets/EN-Client-Global-Services-Facets-01.png[]

[TIP]
.Linking items to facets
====
You do not have to directly link items to the individual facets. Rather, items are automatically assigned to facets. This is done by <<omni-channel/online-store/setting-up-clients/extras/faceted-search#2-3, giving facets values>> that are then saved in the item data record.
====

== Configuration

This function is configured in several different steps. First, facets are created. Then their settings are customised further. Finally, they are linked to the desired values. Furthermore, you need to go to *System » System settings » Client » Select client » Online store » Item search* and select the option *Faceted search*.

=== Creating facets

First, you need to create different facets for the search, e.g. the facet "Color" with the type *Attribute/property*.

[.instruction]
Creating a new facet:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Click on *New* to add a new facet.
. Enter a *name* for the facet in the system's language.
. Select a *type* from the drop-down list. Pay attention to the explanations given in <<table-facet-types>>.
. Enter the *position*a where the faacet should appear in the online store.
. *Save* the settings.

[[table-facet-types]]
.available facet types
[cols="1,3"]
|====
|Facet type |Explanation

|*Price*
|Facets of the type *Price* do not have to be linked to values. Rather, customers can filter from the smallest to the largest price within a category.

|*Attribute/property*
|Facets of the type *Attribute/property* are linked to the attributes and characteristics in your system. They are used to create diverse filters, e.g. colors, sizes etc.

|*Availability*
|Facets of the type *Availability*, e.g. "ships within 24 hours", are linked to the availabilities found under <<omni-channel/online-store/setting-up-clients/extras/faceted-search#180, System » System settings » Item » Availability>>.

|*Manufacturer*
|Facets of the type *Manufacturer*, e.g. "Adidas", are linked to the manufacturers found under <<omni-channel/online-store/setting-up-clients/extras/faceted-search#560, System » System settings » Item » Manufacturers>>.
|====

=== Configuring facets

The facet opens when it is created. There are four tabs for carrying out additional settings and linking values. This chapter explains the settings in the tabs *Settings* and *Name*. Explanations of the tabs *Values* and *Images* are found in <<omni-channel/online-store/setting-up-clients/extras/faceted-search#2-3, chapter 2.3>>.

==== Tab: Settings

Carry out the settings as described below.

[.instruction]
Editing facets:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Open the facet.
. Pay attention to the explanations given in <<table-editing-facets>> and configure the *Settings* tab as desired.
. *Save* the settings.

[[table-editing-facets]]
.editing facets; tab *Settings*
[cols="1,3"]
|====
|Setting |Explanation

|*Type*
|Indicates which type was selected when the facet was created. The type cannot be changed.

|*Sorting*
|Determines how the search results should be sorted. Depending on which option is selected, items will either be sorted by *relevance*, *position number* or alphabetically from *A-Z*.

|*Position*
|Indicates which position was selected when the facet was created. The position can be changed here.

|*CSS class*
|Enter a CSS name. This name will be made available as a template variable in the CMS menu so that every facet can be saved as an individual class.

|*Selection type*
|Choose the selection type. +
*Restricting* = Further limits the filter with the selected value. All items will be displayed that have this value and that fulfill the criteria of any previously selected filters. +
*Multiple* = Makes it possible for multiple search results to be displayed together. For example, this option makes it possible for customers to select multiple manufacturers. The manufacturers' items will all be displayed together. +

|*Minimum number of hits*
|Specifies the minimum number of results that a facet value needs to have in order to be displayed in the online store.

|*Maximum number of facet values shown*
|Specifies the maximum number of facet values that will be displayed per facet. A maximum of 250 facet values can be displayed.
|====


==== Tab: Name

Use the *Name* tab to enter facet names in all of the languages that are offered in your online store. The translations that are entered here will be used for the specified languages.

=== Linking facets to values and images

Carry out the settings in the tabs *Values* and *Images* as described below.

==== Tab: Values

Use the *Values* tab to link facets to different values. For example, if you have a color facet of the type *Attribute/property*, then create the values e.g. white, black, red, blue, etc and link these values with the existing item attributes and characteristics in your system. To do so, proceed as follows.

[.instruction]
Creating a new value:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Open the facet that you want to add values to.
. Click on the *Values* tab.
. Click on the *green plus icon* in the bottom left corner to add a new value.
. Enter a *name* for the value in the system's language.
. Enter a *position*.
. *Save* the settings. +
→ The new value will be created.

The values that were created are displayed on the left. Further define the values in the next steps and link these values with information from your system. In the example of the type *Attribute/property*, it is especially useful that attributes and characteristics are grouped together in one filter in your system and can thus be displayed together in the search result.

[NOTE]
.Name and Settings tabs within a value
====
Use the value's *Name* tab to save names for the value in different languages.  +
Use the value's *Settings* tab to save a *Position* and *CSS class* for the value, just as was also done for the facet (<<table-editing-facets>>). +
The following section explains how to link the values.
====

[.instruction]
Linking facets to values:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Open the facet that you want to add values to.
. Click on the *Values* tab.
. Click on the value that you want to link.
. Click on the *Link* tab.
. Select the attribute or property that you want to link from the list.
. Click on *Link* in the bottom left corner. +
→ The attribute or property will be linked to the facet's value.
. *Save* the settings.

Values that were linked are displayed with a *green check mark*. Values that were not linked are displayed with a *red x*.

==== Tab: Images

Use the *Images* tab to link the facets and their values to images. For example, this is useful if you want to use logos rather than names to list producers in your online store.

== Full text search - Tab: Search index

Use the *Search index* tab to specify various criteria that improve the full text search in your online store. This full text search is much more tolerant of errors than the standard item search in plentymarkets. For example, the faceted search can recognise search terms that include typos. Customers do not have to enter the exact item or manufacturer name in order to see results. For example, customers would still find the manufacturer "adidas" even if they incorrectly entered "addidas" or "adids". Items that are manufactured by this manufacturer would still be displayed in the search results. Configure the following 3 tabs for this:

* Use the *Boost* tab to specify how the four areas *Keywords 1*, *Keywords 2*, *Name* or *Full text* should be prioritised when displaying search results.
* The *Keyword* tab is used to specify which texts belong to the areas *Keywords 1 and 2*. The *Name* section refers to the item names in this online store.
* Use the *Description* tab to specify which texts should be taken into consideration in the *Full text* area.

=== Tab: Boost

Enter a number into each field of the *Boost* tab. This specifies how each area should be prioritised when displaying search results. To do so, proceed as follows.

.search index; *Boost* tab
image::omni-channel/online-store/setting-up-clients/extras/assets/EN-Client-Global-Services-Facets-02.png[]

[.instruction]
Specifying the boost:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Click on the *Search index* tab. +
→ The *Boost* tab opens automatically.
. Enter a number between 1 and 100 into each field. The higher the number, the more this area will be prioritised in the search results. Results will be displayed first for the area with the highest number.
. *Save* the settings.

=== Tab: Keyword

Use the *Keyword* tab to assign the various texts to the areas *Keyword 1* or *Keyword 2*. These texts will be prioritised according to the number that was entered in the Boost tab.

[NOTE]
.Settings in the Keyword tab
====
Select which area (priority) each of the texts listed here should be assigned to. The numbers next to *Category 1 - 6* specify the category level. We recommend prioritising the higher levels over the lower ones.
====

=== Tab: Description

Use the *Description* tab to specify which of the item's texts should be analyzed for the *Full text* area.

[.instruction]
Choosing the descriptions:

. Go to *System » System settings » Client » Settings » Services » Faceted search*.
. Click on the *Search index* tab.
. Click on the *Description* tab.
. Place a *check mark* next to the texts that should be taken into consideration for the search in the *Full text* area.
. *Save* the settings.

== Linking facets in the online store

Once you have created your facets, link them in the default online store or in a client (store). This is done by making them available as filters. Decide which facets are relevant for each client (store) and which ones are not. Changes that you make here will go into effect in real time. Proceed as follows to link facets to a store.

Go to *System » System settings » Client » Select client » Services » Facet links* to configure the settings. Select which store you want to link to the facets.

[IMPORTANT]
.Price facet
====
Only one price facet can be linked per store.
====

[.instruction]
Linking facets in the online store:

. Go to *System » System settings » Client » Select client » Services » Facet links*.
. Select which facets you want to link to this store from the list on the left.
. Click on *Link facet* in the bottom left corner. +
→ The facet will be linked in the online store.
. Repeat this process for all remaining facets that should be linked here.
. *Save* the settings.

Facets that were linked are displayed with a *green check mark*. Facets that were not linked are displayed with a *red x*.

[NOTE]
.Option: Make images available
====
Check mark = Images that are linked to the facets will be displayed in the online store.
====

== Adding the faceted search to the CMS

The faceted search is defined in the template *NavigationFacetsList*. The template *NavigationFacetsList* is part of our standard design, Callisto Light. This template includes code that you can use to create a faceted search as displayed in <<image-faceted-search-online-store>>. Of course, this code can be modified as needed. +
Use the template function <<omni-channel/online-store/cms-syntax#web-design-navigation-container-navigationfacetslist, Container_NavigationFacetsList>> to insert the template *NavigationFacetsList* into the desired area of your online store. To do so, proceed as follows.

[TIP]
.Recommended templates
====
We recommend using the template function *Container_NavigationFacetsList* in *ItemViewCategoriesList* and *ItemViewSearchResultsList*. These templates are found in the menu *CMS » Web design » Folder: Layout » Folder: ItemView*.
====

[.instruction]
Adding the faceted search to the CMS:

. Go to <<omni-channel/online-store/setting-up-clients/cms#web-design, CMS » Web design>>.
. Open the desired template.
. Insert the template function *Container_NavigationFacetsList* into the template to display the faceted search.
. *Save* the settings.
. Repeat the steps above if you want to insert the template function into additional templates.
