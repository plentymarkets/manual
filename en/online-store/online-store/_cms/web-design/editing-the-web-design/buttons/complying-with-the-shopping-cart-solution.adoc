= Complying with the shopping cart solution
:lang: en
// include::{includedir}/_header.adoc[]
:position: 1

*CMS » Web design » Order process » Checkout » Submenu: Order overview*

== Shopping cart solution

New laws in Germany require online stores to have a certain order and structure. Compliance with these requirements is referred to as the so called shopping cart solution (or in Germany often referred to as the button solution). The main aim of these regulations is to protect consumers from unclear contracts (relating to subscriptions and costs). This results in new requirements for the online store layout. This is especially true for the layout of the order overview at the end of the entire checkout process. Businesses now have to show customers all essential elements of a contract directly before the order is placed. This information has to be presented in a clear and understandable fashion. The essential elements are the product or the service itself, the total price including all taxes and further price elements, the delivery or shipping costs and if necessary the duration of the contract. In Germany, link:http://www.gesetze-im-internet.de/bgb/__312g.html[§ 312 g BGB^] and link:http://www.gesetze-im-internet.de/bgbeg/BJNR006049896.html#BJNR006049896BJNG053200140[Article 246 EGBGB^] form the legal basis of the shopping cart solution. (BGB = German Civil Code and EGBGB = Introductory Act to the Civil Code (IACC))

=== Which information has to be additionally displayed now?

You have to give the following information to your customers:

* The essential characteristics of the product or service
* The minimum duration of the contract, assuming that it includes permanent or recurring goods and services
* The total price of the goods and or services including all additional price elements as well as all taxes that are paid by the enterprise. If no specific price is displayed, then the basis for calculating the price has to be shown. This way the consumer can check the price.
* If applicable, delivery and shipping costs as well as a note indicating possible additional taxes or costs that are not paid by the enterprise or are not indicated on the invoice. (requirements translated by plentymarkets)

=== How and when does this information have to be displayed?

You have to present your customers with the information mentioned above directly before they place the actual order. In this case, "directly before" refers both to the temporal aspect of shopping as well as to the spatial aspect. The information has to be given in a clear and understandable way and it has to be emphasized.

In other words, a distinction has to be made between this information and the other text and layout elements of the online store.

Further information in German can be found here: link:http://www.haendlerbund.de/hinweisblaetter/finish/1-hinweisblaetter/99-button-loesung[Händlerbund^].

== Adapting existing systems

This section describes how the plentymarkets standard template can be adapted so that it complies with the new legal requirements. The first image gives a visual overview of the old and new order overview.

.comparison of the old (left) and the new (right) *order overview*
image::cms/web-design/editing-the-web-design/buttons/assets/EN-alt+neu-SI.png[]

The letters refer to the same elements in both the old and new order overview. The information that was previously entered by the customer is now found above the item overview. The item overview itself is highlighted in gray. Furthermore, the item overview is directly connected to the purchase button. The button itself is highlighted in a different color (here red).

[WARNING]
.Field: Text after totals
====
In the *Text after totals* field, you can enter information that is important for the contract (any additional costs that are not part of the invoice). The text will be displayed below the total. If you use the payment method *cash on delivery*, then you should save the following note within this field. Such a note is necessary since customers will have to pay an additional fee if they choose this payment method. Here is the *IF/ELSE query*, which you may still need to customize further:
====

[source,xml]

----
{% if $PaymentMethodID==1 %}
<div><b>The shipping service provider will collect an additional fee of 2.00 EUR when the package is delivered.</b></div>
{% endif %}

----


[IMPORTANT]
.Additional fields
====
The fields *Note for EU deliveries* and *Note for export shipments* allow you to notify the consumer about possible additional costs. The texts saved in these fields are only displayed if the condition (EU or not) applies to the delivery country. They are displayed below the order total.
====

[.instruction]
Adapting the order overview:

. Go to *CMS » Web design » Editing the web design » Order process » Checkout » Submenu: Order overview*.
. Use the *position* field to structure the elements of the order overview, such as the terms and conditions, the invoice address, items etc., in the order you wish. Make sure that the *item* container is displayed *last* (position 9). You can also simply number the containers in ascending order from 1 to 9. (This is the order that has been used in the image above and for the *CSS* that is displayed below.)
. Next click into the *CSS field of the order overview* and add the following *CSS code* at the end of the already existing CSS code.
. *Save* the settings.

[WARNING]
.CSS modifications necessary?
====
You may have to customize the CSS depending on your individual settings and your online store's design.
====

[source,xml]

----
/* FIX SUM BOX */

#PlentyWebOrderOverviewOrderSumBox {
display: table;
}
#PlentyWebOrderOverviewOrderSumBox > div {
display: table-row;
}
#PlentyWebOrderOverviewOrderSumBox > div > span {
display: table-cell;
vertical-align: top;
padding: 5px 0;
border-bottom: 1px solid #CCCCCC;
}
#PlentyWebOrderOverviewOrderSumBox > div > span.PlentyCurrencyContainer {
padding-left: 30px;
}

/* SHOPPING CART SOLUTION */

/* general */
.PlentyWebClear {
clear: both;
}

/* therms/conditions & privacy */
#PlentyWebOrderOverviewAGBPrivacyContainer {
margin-bottom: 0;
}

/* SHIPPING DETAILS */

/* containers */
#PlentyWebOrderOverviewInvoiceContainer,
#PlentyWebOrderOverviewShippingContainer,
#PlentyWebOrderOverviewShippingMethodContainer,
#PlentyWebOrderOverviewPaymentMethodContainer,
#PlentyWebOrderOverviewSchedulerContainer,
#PlentyWebOrderOverviewAGBPrivacyContainer,
#PlentyWebOrderOverviewReferenceContainer,
#PlentyWebOrderOverviewNotesContainer {
border: 1px solid;
border-color: #EEEEEE !important;
margin: 16px 0 0;
min-height: 140px;
}
#PlentyWebOrderOverviewReferenceContainer,
#PlentyWebOrderOverviewNotesContainer {
min-height: 1px;
height: auto;
}
#PlentyWebOrderOverviewAGBPrivacyContainer {
height: auto;
min-height: 0;
}
/* containers half width */
#PlentyWebOrderOverviewInvoiceContainer,
#PlentyWebOrderOverviewShippingContainer,
#PlentyWebOrderOverviewShippingMethodContainer,
#PlentyWebOrderOverviewPaymentMethodContainer,
#PlentyWebOrderOverviewSchedulerContainer {
width: 46%;
}
/* containers right */
#PlentyWebOrderOverviewShippingContainer,
#PlentyWebOrderOverviewShippingMethodContainer {
float: right;
clear: right;
}
/* individual style */
#PlentyWebOrderOverviewPaymentMethodContainer {
margin-bottom: 16px;
}
#PlentyWebOrderOverviewAGBPrivacyContainer > span > h3 {
font-size: 14px;
font-weight: bold;
}
/* header */
#PlentyWebOrderOverviewInvoiceContainer > span,
#PlentyWebOrderOverviewShippingContainer > span,
#PlentyWebOrderOverviewShippingMethodContainer > span,
#PlentyWebOrderOverviewPaymentMethodContainer > span,
#PlentyWebOrderOverviewSchedulerContainer > span,
#PlentyWebOrderOverviewAGBPrivacyContainer > span,
.PlentyWebItemContainerHeader {
display: block;
background: #F3F3F3;
border-bottom: 1px solid #888888;
color: #444444;
font-size: 14px;
line-height: 17px;
padding: 0;
}
/* header label */
.PlentyWebItemContainerHeaderTitle,
#PlentyWebOrderOverviewAGBandWithdrawal > h3 {
display: inline-block;
padding: 10px 10px 7px;
font-size: 16px;
font-weight: 400;
line-height: 18px;
}
/* button */
.PlentyWebButtonsRightContainer {
display: block !important; /*to overwrite element style*/
float: right;
margin-right: 5px;
padding-bottom: 5px;
position: relative;
top: 1px;
}
/* hide old button */
.PlentyWebOrderOverviewChangeContainerBottom {
display: none;
}
/* content container */
#PlentyWebOrderOverviewInvoiceDataContainer,
#PlentyWebOrderOverviewShippingDataContainer,
#PlentyWebOrderOverviewShippingMethodDataContainer,
#PlentyWebOrderOverviewPaymentMethodDataContainer,
#PlentyWebOrderOverviewSchedulerDataContainer {
margin-top: 20px;
}
/* textarea / input */
#PlentyWebOrderOverviewNotesTextareaBox,
#PlentyWebOrderOverviewReferenceInputBox {
padding: 5px 10px;
}
#PlentyWebOrderOverviewNotesTextareaContainer,
#PlentyWebOrderOverviewReferenceInputContainer {
display: block;
margin: 3px 4px;
}
#PlentyWebOrderOverviewNotesTextareaContainer > textarea,
#PlentyWebOrderOverviewReferenceInputContainer > input {
height: 100px;
width: 100%;
margin-left: -4px;
padding: 2px 3px;
font-family: inherit;
font-size: inherit;
line-height: 16px;
}
#PlentyWebOrderOverviewNotesTextareaContainer > textarea {
height: 100px;
resize: vertical !important;
}

/* ITEMS CONTAINER */

/* background color all container */
#PlentyWebOrderOverviewItemsContainer {
background: #F4F4F4;
}

/* items container */
#PlentyWebOrderOverviewItemsContainer {
min-height: 0;
width: auto;
float: none;
clear: both;
border: 1px solid #CCCCCC;
margin-top: 16px;
padding: 0 10px 10px;
}
/* header */
#PlentyWebOrderOverviewItemsTop {
border: none;
border-bottom: 1px solid #444444;
background: #CCCCCC;
margin: 0 -10px 10px;
padding: 0;
}
/* header label */
#PlentyWebOrderOverviewItems {
display: inline-block;
padding: 10px 10px 7px;
margin-top: 0;
font-size: 16px;
font-weight: bold;
line-height: 18px;
}
/* header button */
#PlentyWebOrderOverviewItemsTop > #PlentyWebOrderOverviewItemsChangeContainer {
display: block;
float: right;
margin-right: 5px;
padding-bottom: 5px;
position: relative;
top: 1px;
}
/* items container */
#PlentyWebOrderOverviewItemsBox {
margin-bottom: 0;
}
/* sum box */
#PlentyWebOrderOverviewOrderSumBox {
margin: 0 0 0 50%;
width: 50%;
padding-bottom: 1px;
text-align: left;
}
/* text after sum */
#PlentyWebOrderOverviewNoticeTotals,
#PlentyWebOrderOverviewNoticeNonEUDelivery,
#PlentyWebOrderOverviewNoticeEUDelivery {
margin: 0 0 0 50%;
}
/* button container */
#PlentyWebOrderOverviewSubmitContainer {
border: none;
background: none;
margin-top: 0;
padding: 8px 0 0;
}

/* ITEMS LIST */

/* main */
#PlentyWebOrderOverviewItemsBox {
border: none;
border-bottom: 1px solid #cccccc;
}
/* header */
#PlentyWebOrderOverviewItemsHeader {
background-color: transparent;
}
/* header cells */
.ItemsHeadline {
border-bottom-color: #888888;
}
/* list container */
#PlentyWebOrderOverviewItemsMain .ItemsRow > div {
border-bottom-color: #cccccc;
}

/* SUM BOX */

/* container */
#PlentyWebOrderOverviewOrderSumBox {
}
/* column width */
#PlentyWebOrderOverviewOrderSumBox > div > span:first-child {
width: 70%;
}
/* price sum */
#PlentyWebOrderTotalAmount {
font-size: 19px;
}
/* note vat */
#PlentyWebOrderOverviewOrderSumBox .PlentyDataAdditional {
font-size: 0.48em; /*.7*/
font-weight: normal;
}
/* note vat scheduler */
#PlentyTotalAmountSubscriptionTitle .PlentyDataAdditional {
font-size: 0.7em;
}
/* line */
#PlentyWebOrderOverviewOrderSumBox > div > span {
border-bottom-color: #E4E4E4;
}
/* no line */
#PlentyWebOrderOverviewOrderSumBox > div#PlentyWebOrderOverviewGoodsValueGross > span,
#PlentyWebOrderOverviewOrderSumBox > div#PlentyWebOrderOverviewShippingCostsGross > span {
border-bottom: none;
}
/* main line */
#PlentyWebOrderOverviewOrderSumBox > div#PlentyWebOrderTotalAmount > span {
border-color: #000000;
}

/* TEXT AFTER SUM BOX */

#PlentyWebOrderOverviewNoticeTotals > div,
#PlentyWebOrderOverviewNoticeNonEUDelivery > div,
#PlentyWebOrderOverviewNoticeEUDelivery > div {
font-size: 0.7em;
line-height: 1.6em;
}
#PlentyWebOrderOverviewNoticeTotals > div:first-child,
#PlentyWebOrderOverviewNoticeNonEUDelivery > div:first-child,
#PlentyWebOrderOverviewNoticeEUDelivery > div:first-child {
margin-top: 8px;
}

----
