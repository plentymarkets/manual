= Setting up Ceres checkout in Callisto online stores
:lang: en
:keywords: Online store, client, Standard, Ceres, Plugin, Checkout, order process, Callisto
:position: 40
:author: team-webshop

You want to use the new checkout in your Callisto online store and benefit from its plugin capabilities and individual customisability? No problem - we’ll guide you through the necessary steps. In case you need professional support for the integration of the Ceres checkout in Callisto, our link:https://marketplace.plentymarkets.com/services/CeresCheckout4Callisto_5475[marketplace^]{nbsp}icon:external-link[] can lead you in the right direction.


[#individual-order-process]

== Ceres checkout for Callisto online stores that use the *individual order process*

[NOTE]
.First things first:
====
* This Best Practice describes the setup of the Ceres checkout in a Callisto template. Please copy your design first. Do not make modifications to your active layout.
* This guide applies to Ceres checkouts that have *not* been create with the ShopBuilder.
* To use the Ceres checkout, you need the current version of the Ceres and the IO plugins. You can find both on the plentyMarketplace. Both plugins have to be installed and deployed in a plugin set copy.
* In order to use your payment providers and shipping service providers in the Ceres checkout, you will have to load and install the relevant plugins from the link:https://marketplace.plentymarkets.com/plugins/payment[marketplace^]{nbsp}icon:external-link[]. Please note that there are payment providers that at this point do not offer a plugin alternative and whose services can therefore not be implemented in the Ceres checkout.
====

[IMPORTANT]
.Enable Callisto route patterns for items
====
If you want to run a Callisto online store with the Ceres checkout, we advise you to activate the option *Enable Callisto route patterns for items*. This option helps maintain your SEO ranking. You activate the option in the *Plugin overview » Ceres » Configuration » Global* menu. If you cannot see the setting, you need to **display obsolete entries** with the toggle in the tool bar. 
====

[IMPORTANT]
.Working in a plugin set copy
====
To ensure that the live operations of your online store are not impaired while testing the Ceres checkout, we recommend that you initially make all of your changes in a plugin set copy. <<online-store/best-practices#copying_a_plugin_set, This best practice>> explains how to create a copy for your plugin sets. Test your changes in the <<plugins/plugin-sets#, preview mode>> before you integrate them into your live online store.
====

If you are currently using the *individual order process* in your Callisto online store, you need to integrate the Ceres checkout by 02 June 2020 at the latest. Otherwise, your customers will not be able to place orders in your online store. +

If you follow the step-by-step instruction below, you can integrate the Ceres checkout in your Callisto online store in a few simple steps.

=== Managing routes
Ceres online stores use the logic of the plugin IO. In order to use the checkout with all the correct routes, proceed as follows:

[.instruction]
Carry out settings in the IO plugin:

. Go to *Plugins » Plugin overview*.
. Click on *IO*. +
→ The plugin opens.
. Click on *Configuration* in the directory tree.
. Click on the *Routing* tab.
. Deactivate the checkbox next to *Enable routes*. +
→ All routes are deactivated.
. Activate the routes */checkout*, */confirmation*, */login*, */register*, */password-reset*, */place-order & /execute payment*, */basket*, and */my-account*.
. *Save* the settings.

[.instruction]
Carry out settings in the Ceres plugin:

. Go to *Plugins » Plugin overview*.
. Click on *Ceres*. +
→ The plugin opens.
. Click on *Configuration* in the directory tree. +
→ The *Global* tab is pre-selected.
. Click on *Enable Callisto route pattern for items*. +
→ The Callisto routes are activated.
. *Save* the settings. +
→ The Ceres checkout is now active in your Callisto online store.

=== Adjusting the order process

You need to adjust several categories in order for the checkout process to be working properly. To do so, proceed as follows:

[.instruction]
Creating categories:

. Go to the *Item » Categories* menu.
. Create a new main category with the name *login*.
. Open the category *login*.
. Select the category type *Container*.
. *Save* the settings.
. Create a new main category with the name *checkout*.
. Open the category *checkout*.
. Select the category type *Container*.
. *Save* the settings.

Afterwards, link the new categories to the Callisto order process.

[.instruction]
Adjusting the order process:

. Go to the *CMS » Web design*.
. Click on *Settings*. +
→ The menu *Design settings* opens.
. Click on the tab *Clients*.
. Select the client you want to edit.
. Click on the tab *Order process*.
. Click on *Search* next to *2nd order process step*.
. Select the newly created category *login*.
. Click on *Search* next to *3rd order process step*.
. Select the newly created category *checkout*.
. *Save* the settings.

Now, once you go to the checkout from the basket, you will be forwarded to the Ceres checkout, which offers new functions, such as payment plugins like PayPal.

=== Creating backlinks

You need to adjust the Callisto code in a few places so that users that are not logged in to your store are redirected to the order process after clicking the *To the checkout* button. To do so, proceed as follows:

[.instruction]
Creating backlinks for the shopping cart:

. Go to *Item » Categories*.
. Open the Callisto category.
. Click on the category *Shopping cart*.
. Click on the tab *Description 1*.
. Search for the code `{% if ( $CustomerID ) { Link_Checkout(3); } else { Link_Checkout(2); } %}`
. Replace this code with: `{% if( $CustomerID ) { $_check = Link_Checkout(3); $_backlink = ''; } else { $_check = Link_Checkout(2); $_backlink = '?backlink=/checkout'; } %} $_check.$_backlink`
. *Save* the settings.

You need to include the following code in the line preceding the `$_check.$_backlink` you just added:

[source,plenty]
----
include::assets/checkout_snippet.txt[]

----

*Save* your changes. +

The *de* in the line `{% if $Lang !== 'de' %}` refers to the default language of the online store. If the default language of your online store is not German, you need to adjust the language affix accordingly.

[.instruction]
Creating backlinks for the shopping cart preview:

. Go to the *CMS » Web design » Layout » ItemView » ItemViewBasketPreviewList*.
. Search for the code: `{% if( $CustomerID ) { Link_Checkout(3); } else { Link_Checkout(2); } %}`
. Replace this code with: `{% if( $CustomerID ) { $_check = Link_Checkout(3); $_backlink = ''; } else { $_check = Link_Checkout(2); $_backlink = '?backlink=/checkout'; } %} $_check.$_backlink`
. *Save* the settings.

You need to include the following code in the line preceding the `$_check.$_backlink` you just added:

[source,plenty]
----
include::assets/checkout_snippet.txt[]

----

*Save* your changes. +

The *de* in the line `{% if $Lang !== 'de' %}` refers to the default language of the online store. If the default language of your online store is not German, you need to adjust the language affix accordingly.

[.instruction]
Creating backlinks for the shopping cart overlay:

. Go to the *CMS » Web design » Layout » ItemView » ItemViewItemToBasketConfirmationOverlay*.
. Search for the code: `{% if ( $CustomerID ) { Link_Checkout(3); } else { Link_Checkout(2); } %}`
. Replace this code with: `{% if( $CustomerID ) { $_check = Link_Checkout(3); $_backlink = ''; } else { $_check = Link_Checkout(2); $_backlink = '?backlink=/checkout'; } %} $_check.$_backlink`
. *Save* the settings.

You need to include the following code in the line preceding the `$_check.$_backlink` you just added:

[source,plenty]
----
include::assets/checkout_snippet.txt[]

----

*Save* your changes. +

The *de* in the line `{% if $Lang !== 'de' %}` refers to the default language of the online store. If the default language of your online store is not German, you need to adjust the language affix accordingly. +


Users who have made additional adjustments to their layout need to check whether any other links on their website lead customers to the checkout. These links have to be changed so that they link to the route */checkout*. We are not able to intercept all individual changes to the layout, since these can vary from user to user.

The visual design of the Ceres checkout will differ from your Callisto layout. You can edit the header and footer of the checkout and the shopping cart globally via the <<online-store/shop-builder#95, ShopBuilder>>. With the release of Ceres 3.1, you will be able to edit the entire checkout via the ShopBuilder. You can make further adjustments to the design with the help of a theme.

In a next step, adapt the routes for your legal information.

=== Adjusting the routes to your legal information

The four pieces of legal information - *Terms and conditions*, *Privacy policy*, *Legal disclosure* and *Cancellation rights* have to be connected in a different way in order to be displayed correctly.

[.instruction]
Adjusting the terms and conditions:

. Go to *Item » Categories*.
. Open the Callisto category.
. Copy the category *Terms and conditions* as a main category. +
→ The new main category *Terms and conditions* opens.
. Enter *gtc* as the *URL name* of the category.
. *Save* the settings.

[.instruction]
Adjusting the privacy policy:

. Go to *Item » Categories*.
. Open the Callisto category.
. Copy the category *Privacy policy* as a main category. +
→ The new main category *Privacy policy* opens.
. Enter *privacy-policy* as the *URL name* of the category.
. *Save* the settings.

[.instruction]
Adjusting the legal disclosure:

. Go to *Item » Categories*.
. Open the Callisto category.
. Copy the category *Legal disclosure* as a main category. +
→ The new main category *Legal disclosure* opens.
. Enter *legal-disclosure* as the *URL name* of the category.
. *Save* the settings.

[.instruction]
Adjusting the cancellation rights:

. Go to *Item » Categories*.
. Open the Callisto category.
. Copy the category *Cancellation rights* as a main category. +
→ The new main category *Cancellation rights* opens.
. Enter *cancellation-rights* as the *URL name* of the category.
. *Save* the settings.

After you have saved your legal information, activated the routes as described above, adjusted the categories, created the backlinks and integrated all relevant payment and shipping service providers via plugins, your Ceres checkout is ready for action and you have successfully overcome the hurdles of the Callisto EOL.
