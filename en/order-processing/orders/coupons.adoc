= Coupons
:lang: en
include::{includedir}/_header.adoc[]
:position: 60


**System » Orders » Coupons**

== General information about coupons

**Coupons** (gift cards) are a popular way to increase sales and customers accept them gladly especially during the Christmas shopping season. plentymarkets has a comprehensive and sophisticated coupon module. Campaigns can be created with various possibilities for discounts. A coupon is a particular code (string of characters), which belongs to a campaign and which can either be redeemed once or multiple times. Coupons are redeemed during the order process. In doing so, the corresponding discount value will be displayed.

[IMPORTANT]
.Comprehensive instructions
====
This page of the manual only relates to the **System » Orders » Coupons** menu. For comprehensive instructions on creating a coupon, refer to the **<<order-processing/orders/coupons#, Orders » Coupons>>** page of the manual.
====

== Backend settings

Go to **System » Orders » Coupons** and select the **free text field** that you want to use for **coupon campaigns** (image 1, red arrow). After you have saved the setting, the field **Kampagne ID** will be displayed in the item's **Fields** tab (image 2, red arrow). Please note that the name of the field is automatically assigned and can not be changed.

image::order-processing/orders/assets/EN-Settings-Orders-Coupons-01.png[]

__Image 1: selecting a **free text field**__

[.instruction]
Selecting a free text field:

. Go to **System » Orders » Coupons**.
. Select the desired **campaign field** from the drop-down menu.
. Click on the **save icon** to save the settings. +
→ The **Kampagne ID** field will be displayed in the item's **Fields** tab.

image::order-processing/orders/assets/EN-Settings-Orders-Coupons-02.png[]

__Image 2: **Kampagne ID** field in the editing window of an item__

Coupons and gift cards are a great way to simultaneously attract new customers, increase loyalty and generate revenue. Gift cards are a very popular item, especially during the holiday shopping season. plentymarkets has a sophisticated coupon module in the menu **Orders » Coupons**. Use this menu to create coupon campaigns with various types of discounts.

[#10]
== Possible uses for coupons

Coupons all have codes which belong to a campaign and which can either be redeemed once or multiple times. Coupons are redeemed during the order process. The discount value is displayed at this time. Coupons can be sent to customers as special offer codes within emails or gift cards can be sold as items in your online store. The buyer then receives the coupon code as a PDF document.

The following overview shows various possibilities for using coupons:

[cols="a,a,a,a,a"]
|====
|Coupon |Usage |Via email |Online store |PDF

|Code
|Redemption
|yes
|yes
|no

|Coupon
|Sale and redemption
|yes
|yes
|yes

|Voucher
|Sale
|yes
|no
|yes
|====

__Table 1: possible uses__

[#15]
== Preparing items for purchase with coupons

Before you begin working with coupons, decide which of your items should be purchasable with a coupon or gift card.

[.instruction]
Allowing items to be purchased with a coupon:

. Go to **Item » Edit item**.
. Open the item that should be purchasable with a coupon.
. Click on the <<item/managing-items#40, **Global**>> tab.
. Set the **Coupon** option to **Permitted**.
. **Save** the settings.  +
→ It will be possible for the customer to purchase this item with a coupon.

Set the **Coupon** option to **Not permitted** if you want to prevent the item from being paid with a coupon. If the customer places such an item in the shopping cart, then the coupon's value will not be applied to this item. It makes sense to prevent some items from being paid for with a coupon, e.g. special offers or other items that should not be discounted further. If you want to make an item available for purchase with a coupon only, then select the setting **Purchasable with coupon only**.

[#20]
== Creating a campaign

Since every coupon belongs to a campaign, such a campaign has to be created first. You can create new campaigns by opening the menu **Orders » Coupons** and clicking on **New campaign**. First, configure the basic options for this campaign in the **Settings** tab and click on **Save**. The campaign will be created and <<order-processing/orders/coupons#50, **displayed in the overview**>>. Previously created campaigns include two additional tabs: <<order-processing/orders/coupons#60, **Codes**>> and <<order-processing/orders/coupons#140, **Templates**>>.

[.instruction]
Creating a campaign:

. Go to **Orders » Coupons**.
. Click on **New campaign**.
. Pay attention to the explanations given in table 2 and carry out the settings as desired.
. **Save** the settings.  +
→ The new campaign will be created and will appear in the overview.

[NOTE]
.Settings are automatically displayed and hidden
====
Settings in this menu will automatically be displayed or hidden depending on the coupon type that is selected. Different settings are required for the <<order-processing/orders/coupons#22, **coupon types "Coupon" and "Voucher"**>>. Table 2 explains all of the settings.
====

[cols="a,a"]
|====
|Setting |Explanation

2+|Campaign[#21]

|**Name**
|The **title** of the campaign.

|**Description**
|A **description** of the campaign.

|**Concept: Code**
|Select the number of codes from the first drop-down menu:  +
**One code** = One coupon code will be generated per campaign which can be redeemed multiple times.  +
**Several codes** = Individual coupon codes will be generated which can only be redeemed once.

|**Concept: Redemptions**
|Select how coupons should be redeemed from the second drop-down menu:  +
**Several redemptions per customer** = A customer can redeem the entire coupon amount multiple times.  +
**Caution**: If the coupon is sent to several customers, then they can all redeem the coupon as often as desired. This option can result in high costs to your business once all of the amounts are totaled!  +
**One redemption per customer** = A customer can either redeem the entire coupon amount one time or partial amounts. If the coupon is sent to several customers, then they will all be able to redeem a partial amount as often as desired. However, as soon as one customer has redeemed the entire coupon amount, it will no longer be possible for any other customers to redeem the coupon.  +
**Note**: If customers are not registered, but log in with a guest account, they will be treated as new customers in the system. If the coupon amount is not used up completely, then the coupon can be used several times because one redemption is possible per customer - i.e. new customer, new coupon.  +
**Caution**: All of your customers can simultaneously redeem partial amounts that are below the entire coupon amount. However, once a customer has redeemed the entire coupon amount the coupon will no longer be redeemable. This option can result in high costs to your business once all of the amounts are totaled!  +
**Redemption until the value is depleted** = The coupon can be used until its value has been depleted. If a customer redeems partial amounts, then all of the partial amounts put together may only be as high as the entire coupon amount itself. The coupon can not be redeemed by multiple customers.  +
**One single redemption** = Only one redemption is possible. No further redemptions will be possible, even if only a small, partial amount was used.

|**Use**
|Select **single orders**, <<order-processing/orders/scheduler#, **subscriptions**>> or both.

|**Minimum order value**
|The minimum order value that needs to be reached in order for the coupon to be redeemed.

2+|Validity

|**Starting date**
|The date when the campaign should be activated.

|**Ending date**
|The date when the campaign should be deactivated.

|**Code validity in weeks**
|Decide how many weeks the coupon codes should remain valid. For example, enter 12 if you want the coupon codes to be valid for 12 weeks. There is a difference between the validity selected here and the starting / ending dates selected above. For example, the validity can be one year (entry: 52) and the campaign can be started and ended as many times as desired throughout the year.

2+|Coupon[#22]

|**Coupon type**
|Select **Coupon** or **Voucher**.  +
The difference here is that **coupons** are redeemed in the online store and **vouchers** are redeemed through third parties. Vouchers are especially popular in the hotel industry where they are simultaneously used as reservations.  +
**Note**: Not all of the options will be displayed if **Voucher** is selected as the coupon type. You will only see the options that are relevant to vouchers.

|**Code assignment**
|Only visible if you selected **Voucher** as the coupon type.  +
Decide whether you would prefer to **Generate new code(s)** or **Use existing code(s)**.

|**Coupon variety**
|Select **Coupon for special offers** or **Gift card**. This determines how coupons are redeemed and displayed in PDF documents.  +
Select **Gift card** for campaigns with coupons that are sold in the online store.  +
This setting also influences how the coupon is calculated in the online store. <<order-processing/orders/coupons#25, **An example demonstrates how coupons influence the calculation of the invoice total**>>.

|**Code length**
|Select the number of characters for the coupon code. Coupon codes can be **6**, **16** or **24** characters long.

|**Discount type**
|Select the type of discount.  +
**Fixed amount** = Enter a fixed discount value.  +
**Percentage** = Enter a percentage that should be deducted from the invoice amount. For example, enter 10 if a 10 percent discount should be given on the invoice.  +
**Piece** = Enter a number of items, e.g. 3 items for the price of 2.  +
**Shipping** = Free shipping is applied to the order.

|**Discount value**
|Enter the discount value for the coupon. If you enter a fixed discount value, then select whether the **shipping costs** should be included as well.

2+|Filter

|**Items coming from price comparison portals**
|**Permit** = Coupons are also valid for items coming from <<omni-channel/multi-channel#, **price comparison portals**>>, i.e. items that are offered simultaneously on other markets.  +
**Do not permit** = Coupons can not be used for items coming from price comparison portals (default).

|**Categories**
|Select the categories that the coupon should be redeemable for. If a category is selected, then all of its sub-categories are selected as well.

|**Items**
|Add up to 20 items. This allows you to create coupon campaigns that can only be redeemed for specific items. Enter the item ID in the text field and click on the green plus icon. This creates a new entry in the item list. The list displays the item ID and a delete icon. Repeat these steps as many times as necessary until all of the items have been added.  +
**Link** = Click on the item ID to open the item data record.  +
**Delete icon** = Deletes the item from the list.

|**Clients (stores)**
|Select <<omni-channel/online-store/setting-up-clients#, **Clients (stores)**>>. The coupon will be valid for the selected stores. You need to select at least one client.

|**Customer classes**
|Select <<crm/managing-customer-data#100, **Customer classes**>>. The coupon will be valid for the selected classes. You need to select at least one customer class.

|**Customer types**
|Select <<crm/managing-customer-data#300, **Customer types**>>. The coupon will be valid for the selected types. You need to select at least one customer type.

2+|Email template

|**Variable**
|Select a variable for <<crm/sending-emails#, **email templates**>> (see below). The option **No variable** is selected by default. Once a variable has been selected, it can no longer be used for other campaigns.
|====

__Table 2: settings for a new coupon campaign__

[#25]
=== Example for calculating coupons for special offers and gift cards

The **Coupon variety** is selected in the **Coupon** area within the **Settings** tab. The coupon value will be calculated differently depending on which coupon variety is selected. For example, **coupons for special offers** are calculated similarly to discounts.

[TIP]
.Example
====
A customer receives a coupon for €15 and then purchases items in the online store totaling €25 excluding VAT. The customer purchases 2 items. One of the items costs €17.95 and is taxed at a rate of 19% VAT. The other item costs €7.05 and is taxed at a rate of 7% VAT. If the customer uses a **gift card**, then the coupon value will be subtracted from the total including taxes. If the customer uses a **coupon for special offers**, then the coupon value will be subtracted first and then the remaining amount will be taxed.
====

[cols="a,a,a"]
|====
| |Gift card |Coupon for special offers

|**Amount before subtracting the coupon value**
|€28.91 including VAT
|€25 excluding VAT

|**Amount after subtracting the coupon value**
|€13.91 including VAT
|€10 excluding VAT

€11.56 including VAT

|**Remaining amount to be paid by the customer**
|€13.91
|€11.56
|====

__Table 3: comparison of coupons for special offers and gift cards__

[#50]
== Searching for campaigns

The **Campaigns** tab provides you with an overview of the most important information about existing campaigns.

[cols="a,a"]
|====
|Option |Explanation

|**End**
|Shows the date when the campaign will be deactivated. This is not the same thing as the code validity, which is described in table 2 under **Code validity in weeks**.

|**Coupon variety**
|Refer to the explanations in table 2 and to the example underneath table 2 for further information about the coupon varieties **Coupon for special offers** and **Gift card**.

|**Concept**
|The concept specifies whether a coupon can only be redeemed once or multiple times. Pay attention to the information given in table 2.

|**Redemptions**
|The red number stands for the number of redeemed coupons. The green number stands for the number of coupons that have not yet been redeemed.

|**Export**
|Click on the green arrow on the right side of a line to export campaign data in a CSV file.
|====

__Table 4: important values in the campaign overview__

Search for campaigns by selecting the desired search parameters in the **Filter** tab and clicking on **Search**. If you do not change the default filter settings, then all of the campaigns will be searched for and displayed. Use the search filters **ID** and **Coupon code** if you want to search for campaigns that have a specific ID or that contain specific coupon codes.

The menu <<order-processing/orders/managing-sales-orders#order-search, **Orders » Edit orders**>> also includes a search filter for coupon codes.

[#60]
== Generating coupon codes

The coupon generator is found in the **Codes** tab. There are two ways to generate coupon codes with the coupon generator. They are described below.

[IMPORTANT]
.Valid characters for coupon codes
====
Coupon codes may contain any combination of lower and upper case letters, numbers and the special characters _ and -.
====

[#70]
=== Manually generating coupon codes

Use this function to generate several coupon codes at the same time. The codes are automatically generated and added to the code list.

[.instruction]
Manually generating coupon codes:

. Go to **Orders » Coupons**.
. Click on the campaign for which you want to generate coupon codes.
. Click on the **Codes** tab.
. Use the left box to enter the **quantity** of coupon codes that you want to generate.
. **Save** the settings. +
→ The coupon codes will be generated and added to the list of coupon codes further below.

[IMPORTANT]
.More codes than redemptions
====
The number of open coupons can exceed the maximum number of redemptions. As such, there may still be open coupon codes left over once the maximum number of redemptions has been reached. These codes can no longer be redeemed.
====

[#80]
=== Manually entering external coupon codes or coming up with your own codes

Here, you can add your own codes to the list of coupon codes. On the one hand, these can be codes that you received and that were not generated here. On the other hand, these can be individual codes that you came up with on your own.

[.instruction]
Manually entering coupon codes:

. Go to **Orders » Coupons**.
. Click on the campaign for which you want to enter a coupon code.
. Click on the **Codes** tab.
. Use the right box to enter a **Code** between 6 and 24 characters.
. **Save** the settings.  +
→ The coupon codes will be generated and added to the list of coupon codes further below.

[#90]
=== Editing coupon codes with the data exchange

Use the data format **<<basics/data-exchange/data-formats/campaigncoupon#, CampaignCoupon>>** to quickly **<<basics/data-exchange/exporting-data#, export>>**, edit and **<<basics/data-exchange/importing-data#, import>>** coupon codes.
The data exchange allows you to import large quantities of coupon codes at once rather than to enter them manually one after the other.

[#100]
== Inserting coupon codes directly into emails

Coupon codes can automatically be embedded in emails. When sending an email, a new coupon code will always be generated and sent.
As such, every customer can be sent an automatically generated coupon code with the newsletter as well.  +
The particular campaign first has to be assigned a <<omni-channel/online-store/cms-syntax#basics-template-variables, **template variable**>> for this purpose, e.g. **CouponCode1**.

Then, the template variable **$CouponCode1** can be entered into an <<crm/sending-emails#1200, **email template**>>.
A new coupon will automatically be created for the selected campaign every time the email is sent.

[IMPORTANT]
.One variable per campaign
====
Each template variable can only be assigned to one campaign.
====

[.instruction]
Assigning a template variable emplate fo a campaign.

. Go to **Orders » Coupons**.
. Click on the campaign that you want to add a variable to.  +
→ The **settings** tab of a campaign der Kampagne includes a small **Email template** section.
. Select a **variable** from the drop-down menu.
. **Save** the settings.

[#110]
== Selling coupons

Before you can sell coupons, for example as gift cards in your online store, you first need to create a <<order-processing/orders/coupons#20, **coupon campaign**>> and set the coupon variety to **Gift card** (table 2).
Additional prerequisites are that you configure a free text field and a coupon template for the campaign.
Pay attention to the explanations given in this chapter and carry out the settings as desired.

[#120]
=== Creating items for coupons

Now create an **<<item/managing-items#, item for the coupon>>** and give it the name **Coupon1**, for example. Enter a price and a short description. Link the coupon item to a category. If needed, create an individual category for coupons. +
These parameters will be displayed in the online store just like for any other item.

[#130]
=== Linking the coupon item to a campaign

<<item/managing-items#70, **Free text fields**>> are used to link campaigns to coupon items.
Proceed as described below to link the coupon item to the free text field **Kampagne ID**.

First, define a free text field.

[.instruction]
Defining the free text fields:

. Go to **System » Item » Free text fields**.
. Enter **Kampagne ID** as field name.
. Select the data type **number**.
. Enter the character length.
. **Save** the settings.

[WARNING]
.Only Kampagne ID may be entered as name.
====
Pay attention to the exact writing of the name, including capital and small letters. The space between Kampagne and ID is also required. No other names or spellings are allowed.
====

Next define the free text field as campaign field.

[.instruction]
Define campaign field:

. Go to **System » Orders » Coupons**.
. Select **Kampagne ID** as **campaing field**.
. **Save** the settings.

Link your campaign to a coupon item.

[.instruction]
Linking the coupon item to a campaign:

. Go to **Item » Edit item**.
. Open the coupon item.
. Click on the **Fields** tab.
. Find the free text field that was created for coupon campaigns in the menu <<order-processing/orders/coupons#, **System » Orders » Coupons**>>. In this field, enter the ID of the campaign that you want to link to this item.
. **Save** the settings.

[#140]
=== Configuring coupon templates

You can create a coupon template for a campaign within its **Templates** tab. In other words, you can save a different template for each campaign. The template is the background that is displayed on coupons that you create and save as PDF files. Use the **Coupon layout** submenu to specify which elements should be displayed on the coupon and where they should be positioned. To do so, proceed as follows.

[TIP]
.PDF version
====
plentymarkets currently supports PDF versions 1.4 and lower.
====

[.instruction]
Saving a coupon template:

. Go to **Orders » Coupons**.
. Click on the campaign for which you want to edit the template.
. Click on the **Templates** tab.
. Open the **Coupon template** submenu.
. Click on **Browse...** next to the words **Document template Upload**.
. Select the desired document.
. **Save** the settings.  +
**Tip:** You will see a message confirming that the upload was successful. Please contact our support if you do not see a confirmation message and you receive an error message when clicking on **Display template**. In some cases, the module for selling coupons may not have been activated in your system.
. Open the **Coupon layout** submenu.
. Enter values for the **X** and **Y coordinates**.
. **Save** the settings. +
**Tip:** You will see a message confirming that the information was saved. Click on **Display preview** to get an idea of what the coupon will look like. Correct the values as needed until you are satisfied with the result.

[cols="a,a"]
|====
|Setting
|Explanation

|**Character set**
|Choose between the character sets **ISO-8859-1** and **Unicode**.

|**Coordinates and font sizes**
|Enter the coordinates and select the font sizes for the coupon texts.
|====

__Table 5: options for configuring coupon templates__

[TIP]
.Coordinates
====
The **x coordinate** defines the left page margin. The **y coordinate** defines the top margin.
====

[#150]
=== Generating coupons

Customers can buy coupons the same way that they buy normal items. As soon as your customer has purchased the coupon, he or she can enter the text for the coupon template.

[TIP]
.Tip: Note
====
In order for a customer to save a personalized text for a coupon, he or she will have to click on the **Change** button within the **My account** area of the online store. Inform your customers of this procedure by saving instructions in the item description.
====

Once your customer has purchased the coupon, he or she can edit the coupon text as follows.

[.instruction]
Editing the coupon text in the My account area:

. Log into the online store.
. Open the **My account** area and then navigate to the **Order history** area.
. Open the order containing the coupon.
. Click on **Change** for the particular item.
. Enter a **Recipient**, **Sender** and **Text** here.  +
→ The information that is entered will be displayed on the coupon template.

Once the customer has paid for the coupon, the PDF template will be made available to download. This can be recognized by the PDF symbol.

After the PDF document was created by clicking on the **Create a PDF** button, the customer can directly print or save the coupon.

[#160]
=== Automatically sending coupons as PDF attachments

It is useful to send coupons in the form of PDF attachments, e.g. if you offer gift cards or travel vouchers in your online store.

If you sell coupons (gift cards) that you do not want to provide as PDF attachments in the My account area, but would rather send via email, then use an **event procedure** to generate and send the coupons. You need to have an <<crm/sending-emails#1200, **email template**>> that you use for sending the email. Open the template and select the type **Voucher** from the **PDF attachment** drop-down menu. The coupon will automatically be attached to the email template as a PDF attachment.

[TIP]
.Tip: Requirements for sending a coupon with an event procedure
====
You need a coupon campaign for this purpose. You have to save the campaign for the item in question using a free text field.
====

[.instruction]
Setting up an email template:

. Go to **<<crm/sending-emails#, System » Client » Select client » Email » Templates>>**.
. Click on **New email template**.
. Enter a name for the template in the **New email template** window, e.g. **Travel voucher**.
. Select an **owner** or select the setting **All** from the drop-down menu.  +
→ The email template will be created, sorted in the list and opened.
. Select **Voucher** as the PDF attachment.
. Click on the **email message** tab.
. Enter the **Subject** and **Content**.
. Use template variables to add information like the name of the customer. However, do not insert the coupon template variable **CouponCode**, as you wish to send the coupon as an attachment.
. **Save** the settings.

[.instruction]
Sending coupons with an event procedure:

. Go to **<<basics/automation/event-procedures#, Settings » Orders » Event procedures>>**.
. Click on the **green plus icon** in the lower left corner to create a new event procedure.
. Enter a **name**, e.g. **Generate &amp; send coupon**.
. Select the option **Payment &gt; Complete** as the **event**.
. **Save** the settings.  +
→ The event procedure will be created.
. Click on the **green plus icon** to create a **filter** of the filter type **Order &gt; Order type**.  +
→ The filter will be created.
. Mark **Order** in the order type filter.
. Click on the **green plus icon** to create a **filter** of the filter type **Item &gt; Item is included**.  +
→ The filter will be created.
. Within the filter, click on **Add** and enter the ID of the item which the event procedure should take effect for.
. Click on the **green plus icon** to add a **procedure** of the procedure type **Documents &gt; Generate gift card**.  +
→ This procedure will only be carried out for paid orders.
. Click on the **green plus icon** to add a **procedure** of the procedure type **Order &gt; Change status**.
. Select the desired **status** in the procedure.
. Click on the **green plus icon** to add a **procedure** of the procedure type **Customer &gt; Send email**.
. Within the procedure select your **desired email template** and select **Customer** as the recipient.
. Place a check mark next to the option **Active**.
. **Save** the settings.

[#170]
=== Displaying the coupon total on invoices

Each coupon that is sold will be displayed as an individual stock unit on the invoice. In order for the total value of redeemed coupons to be displayed on the invoices, you need to take a look at the invoice's layout and make sure that you entered text into the field name next to the words **<<order-processing/orders/settings/documents#1, Coupon value (net)>>**.
