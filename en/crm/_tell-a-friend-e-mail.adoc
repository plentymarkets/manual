= Tell-A-Friend email
:lang: en
include::{includedir}/_header.adoc[]
:position: 30

The Tell-A-Friend function in the menu **System » System settings » Client » Select client » Email » Templates** makes it possible for your customers to send an email that recommends an item in your online store. Customers can recommend an item by filling out a form in the online store. The form contains fields for the customer's own name, the recipient's name and email address and a personalized message.

[WARNING]
.Legal security
====
Ask your legal adviser for information about any legal aspects that you need to be aware of before implementing this function.
====

== Setting up an email template

Go to **<<crm/sending-emails#1200, System » System settings » Client » Select client » Email » Templates>>** and create a new template that you would like to use for sending Tell-A-Friend emails. The fields **Your name**, **Name of the recipient** and **Message** are embedded into the email template with the template variables **$****EmailFrom**, **$****CustomerFullName** and **$EmailMessage**. Save a text for the email template. Be sure to include these template variables as well as a variable for displaying the item.

[TIP]
.Example text
====
**$EmailFrom** wants **$CustomerFullName** to look at the following item: **$EmailMessage****$ItemURLTellAFriend**
====

The template variable **$EmailMessage** displays the text that the customer entered into the form's **Message** field in the online store. The template variable **$ItemURLTellAFriend** links to the corresponding item in the online store.

== Saving a template to be sent automatically

Now open the **Automatic email** menu and select the Tell-A-Friend template for the option **Tell-A-Friend**. To do so, proceed as follows.

[.instruction]
Saving a template to be sent automatically:

. Go to <<crm/sending-emails#2300, **System » System settings » Client » Select client » Email » Automatic**>>.
. Select the desired template from the **Tell-A-Friend** drop-down list.
. *Save* the settings.

== Inserting the template variable in the online store

In order for customers to see the Tell-A-Friend form when they view items in the online store, you will need to open the appropriate template and insert the **$TellAFriendBox** template variable. To do so, proceed as follows.

image::crm/assets/EN-Marketing-Tell-A-Friend-E-mail-01.png[]

__Image 1: Tell-A-Friend form in the online store__

[.instruction]
Inserting the template variable in the online store:

. Go to **CMS » Web design » Layout » ItemView » ItemViewSingleItem**.
. Insert the template variable **$TellAFriendBox** into the template.
. *Save* the settings.

[IMPORTANT]
.Note the placement in the template
====
The Tell-A-Friend form must not be inserted within another form. In other words, do not insert the template variable **$TellAFriendBox** between the template variables **$FormOpenOrder** and **$FormCloseOrder**.
====

== Inserting a link to the form

The link to the form can be placed wherever you would like within **ItemViewSingleItem**. For example, you could insert the link directly underneath the **$TellAFriendBox** template variable.

The link contains the text that is displayed along with the item in the online store. The example below includes the text **Recommend this item**. The form opens when visitors click on the link.

**&lt;div onclick="$p('TellAFriend').style.display='block';" style="cursor:pointer;"&gt;Recommend this item&lt;/div&gt;**
