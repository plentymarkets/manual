= DHL Shipping (Versenden)
:lang: en
include::{includedir}/_header.adoc[]
:keywords: DHL Shipping, DHL Versenden, DHL Shipping (Versenden), DHL Shipping Versenden, DHL plugin, Plugin DHL, DHL business customer portal, DHL BCP, DHL assistant, DHL Shipping assistant, DHL Versenden assistant
:description: Learn how to set up the “DHL Shipping (Versenden)” plugin in plentymarkets.
:position: 100
:url: fulfilment/shipping-service-provider-plugins/plugin-dhl-shipping-versenden
:id: X5EPVD8
:author: team-fulfillment

[IMPORTANT]
.Setting up the DHL Shipping (Versenden) plugin
====
You need a plugin to link plentymarkets to DHL Shipping (Versenden). Visit the link:https://marketplace.plentymarkets.com/en/plugins/integration/dhlshipping_4871[plentyMarketplace^]{nbsp}icon:external-link[] to download the DHL Shipping (Versenden) plugin.
====

[#register-with-dhl]
== Registering with DHL

In order to set up the interface for DHL Shipping (Versenden) in your plentymarkets system and use the function _Versenden_ (shipping) in the DHL business customer portal, you have to be registered with link:https://www.dhl.de/en/geschaeftskunden/paket/kunde-werden/angebot-dhl-geschaeftskunden-online.html[DHL^]{nbsp}icon:external-link[]. You receive the data from DHL that you need for the settings in plentymarkets.

[#set-up-dhl-shipping-versenden]
== Setting up DHL Shipping (Versenden) in plentymarkets

[TIP]
.Simply setting up DHL Shipping (Versenden) with the help of assistants
====
You need a plugin to link plentymarkets to DHL Shipping (Versenden). Visit the link:https://marketplace.plentymarkets.com/en/plugins/integration/dhlshipping_4871[plentyMarketplace^]{nbsp}icon:external-link[] to download the DHL Shipping (Versenden) plugin. +
Two DHL Shipping (Versenden) assistants that allow an easy setup are then available in the *Setup » Assistants* menu in the *Integration* area.

Before you complete the two DHL Shipping (Versenden) assistants, you need to complete the *Shipping settings* assistant. This assistant is available in your plentymarkets system by default. You can find it in the *Setup » Assistants* menu in the *Integration* area. With this assistant, you carry out the following settings:

* determine a name for the shipping setting (i.e. the shipping profile)
* activate existing regions or create a new region
* determine the shipping costs and select the calculation type
* *_Note:_* Afterwards, go to *Setup » Orders » Shipping » Settings* and click on the *Shipping profiles* tab to carry out further settings for the shipping profile. Further information on these settings are provided below on this manual page.

Afterwards, you complete the two DHL Shipping (Versenden) assistants:

* DHL Shipping (Versenden): Basic settings +
→ In this assistant, you prepare all the data that you later need in the *DHL Shipping (Versenden): Settings combination* assistant.
* DHL Shipping (Versenden): Settings combination +
→ In this assistant, you link the settings that you saved in the *DHL Shipping (Versenden): Basic settings* assistant.


====

Further down on this page, it is described which data you enter in the assistants.

[#preparatory-settings]
== Carrying out the preparatory settings

First, you have to carry out some preparatory settings in the plentymarkets back end:

* <<fulfilment/preparing-the-shipment#100, Set up countries of delivery>>

** You can set up the countries of delivery in the *Shipping settings* assistant or in the back end.

* <<fulfilment/preparing-the-shipment#400, Create regions>>
** You can create regions in the *Shipping settings* assistant or in the back end.

* create the <<fulfilment/preparing-the-shipment#800, shipping service provider>> *DHL Shipping (Versenden)*
** Currently, you can create the shipping service provider only in the back end and not in an assistant.

* create a <<fulfilment/preparing-the-shipment#1000, shipping profile>> and the <<fulfilment/preparing-the-shipment#1500, table of shipping charges>> for *DHL Shipping (Versenden)* +
** You set up some of the shipping settings in the *Shipping settings* assistant. The remaining settings have to be carried out in the back end in the *Setup » Orders » Shipping » Settings* menu in the *Shipping profiles* tab. +
→ icon:exclamation-triangle[role="red"] *_Important:_* Not all functions and settings have been transferred from the shipping profile to the *Shipping settings* assistant yet. Note the explanations in the <<#assistant-shipping-settings, Completing the *Shipping settings* assistant>> chapter.

[#complete-dhl-assistants]
== Completing the assistants

As soon as you have <<plugins/installing-added-plugins#installing-plugins, installed>> the plugin in a plugin set, the *DHL Shipping (Versenden): Basic settings* and the *DHL Shipping (Versenden): Settings combination* assistants are available in the *Setup » Assistants* menu in the *Integration* area.

Now complete the assistants in the following order:

1. *Shipping settings* (this assistant is available by default in your plentymarkets system)
2. *DHL Shipping (Versenden): Basic settings*
3. *DHL Shipping (Versenden): Settings combination*

[#assistant-shipping-settings]
=== Completing the *Shipping settings* assistant

In this assistant, you carry out the following settings:

* You enter a back end and a front end name for the shipping setting. These names can be selected per language. +
→ Later, you link this name in the *DHL Shipping (Versenden): Settings combination* assistant.

* You select the plugin of the shipping service provider for which you want to set up shipping costs. +
→ The DHL Shipping (Versenden) plugin must have been downloaded in the link:https://marketplace.plentymarkets.com/en/plugins/integration/dhlshipping_4871[plentyMarketplace^]{nbsp}icon:external-link[] before you can see it here.

* You select a region, enter the shipping costs and select the calculation type for the selected countries. Furthermore, you can determine the value of items from which no shipping costs will be calculated.

[IMPORTANT]
.Carry out further settings for the shipping settings in the back end
====
If you have completed the *Shipping settings* assistant, the shipping profile also appears in the *Setup » Orders » Shipping » Settings* menu in the *Shipping profile* tab. +
The following settings are available once the assistant has been completed:

* the name of the shipping profile is saved
* the shipping service provider is saved
* the option *Activate for new items* is activated
* all clients (stores) are activated
* all order referrers are activated
* the shipping costs are saved
* the region is saved

If you want to carry out further settings such as blocking customer classes or payment methods or activating the option for the agreement upon data transmission to shipping service providers, you have to go to *Setup » Orders » Shipping » Settings* and carry out these settings in the *Shipping profiles* tab.

icon:exclamation-triangle[role="red"] This workaround is still necessary because not all functions and settings have been transferred from the shipping profile to the assistant yet. We will implement the missing settings in the assistant step by step.
====

When you completed the *Shipping settings* assistant and open it again, the following information is displayed:

* In the tile view:

** Back end name
** Region
** Shipping service provider


* In the table overview:

** Back end name
** Region
** Shipping service provider
** Front end name
** ID of the shipping profile

[#dhl-assistant-basic-settings]
=== Completing the *DHL Shipping (Versenden): Basic settings* assistant

This assistant has several steps to complete. These steps are explained in the following.

[discrete]
==== Login details

In this step, you save your login details for the DHL business customer portal. You can save multiple login details when you have multiple clients (shops) and/or concluded more than one contract with DHL. In the second assistant *DHL Shipping (Versenden): Settings combination*, you can link this data.

Furthermore, you can determine for each of your logins whether shipping labels should always be generated, also when shipping orders with non-codable addresses are created, e.g. when the address data is not complete or not available at all. DHL corrects the incorrect data and bills you for this service. Afterwards, the order can be registered successfully.

If the option *Force label generation* is not activated – i.e. the button is red icon:toggle-off[role="red"]–, non-codable shipping orders are rejected by DHL when trying to register them with DHL Versenden and an error message is displayed. The order is not registered and no shipping label is generated in your plentymarkets system.

*_Note:_*

* The login name may not contain any umlauts. Even if a login name with umlauts is accepted by the website, the interface may still reject it.

* The maximum password length is 20 characters. Although DHL technically allows you to use a longer password, you may only use a maximum of 20 characters via the plentymarkets interface. If you use a password that is longer than 20 characters, errors occur.

[discrete]
==== Shipper data

In this step, you enter your shipper data. The data is shown as sender address on the shipping label.

Do you want to display your company logo on the shipping label? To do so, select the option *Use shipper reference from the DHL business customer portal*. DHL then uses both address data that you saved in the DHL business customer portal and the company logo that you uploaded there. Only the sender reference is transferred to DHL, but not the sender data from plentymarkets.




*_Note:_* If you activate the *Show polling data* area at the bottom of this assistant step, the *Account reference* and *Sender reference* fields are visible. Entering the account reference and the sender reference in this area is only necessary if you register your shipments via the _polling format_. The account reference and the sender reference are not relevant for the transmission via the interface.

[discrete]
==== Billing number

In this step, you save your DHL billing number in accordance with your DHL contract.

The billing number consists of 14 digits in total and is composed of 3 components: EKP (customer number), product and subscription. The first 10 digits are the EKP, the 11th and 12th digit are the product and the 13th and 14th digit are the subscription. 

*_Example of a billing number:_* `1234567890 53 01`

* `1234567890` is the EKP (customer number)
* `53` is the product _DHL Paket International_
* `01` is the subscription

The following DHL products are available in the assistant:

* 01 - DHL Paket +
* 53 - DHL Paket International +
* 54 - DHL Europaket +
* 55 - DHL Paket Connect +
* 62 - DHL Warenpost
* 86 - DHL Paket Austria +
* 87 - DHL Paket Connect (Austria) +
* 82 - DHL Paket Austria International

[discrete]
==== Product and service selection

In this step, you select the products and services. Note that this is only a pre-selection of the products and services. The selected products and services are then available in the *DHL Shipping (Versenden): Settings combination* assistant. There, you link them with the login details, the billing number, the shipper address and the shipping setting. Note that you have to be activated at DHL for the selected products and services.

[IMPORTANT]
.DHL Wunschpaket services only visible after having purchased the DHL Wunschpaket plugin
====
The DHL Wunschpaket services *Preferred day*, *Preferred location* and *Preferred neighbour* are only available in this area once you have downloaded the DHL Wunschpaket plugin in the link:https://marketplace.plentymarkets.com/en/plugins/integration/dhlwunschpaket_5435[plentyMarketplace^]{nbsp}icon:external-link[] and installed it in a plugin set. +
Also for this plugin, there is an assistant available in the *Setup » Assistants* menu in the *Integration* area allowing you to simply and quickly set up the services.
====

[discrete]
==== Summary

In this step, a summary of all entries that you made in the single steps is listed. You can check the settings, adjust them, if needed, and complete the assistant afterwards.

[#dhl-assistant-settings-combination]
=== Completing the *DHL Shipping (Versenden): Settings combination* assistant

In this assistant, you link the settings that you saved in the*Shipping settings* and *DHL Shipping (Versenden): Basic settings* assistants. You link your login details with the DHL billing number, the services, the shipper address, the shipping region and the shipping setting. Furthermore, you can determine in this assistant whether your customers can use a finder in your online store to select the address of a packstation or a post office as delivery address and whether you want to transfer a minimum package weight to DHL to register the order. In case of international deliveries, you select in this assistant also the franking and the shipping type.

Depending on which products and services you selected in the assistant *DHL Shipping (Versenden): Basic settings* before, these services are available in this assistant based on this selection.

[IMPORTANT]
.Checking the default shipping method and shipping profile
====
Check which options you have selected for *Default shipping method* and *Default shipping profile* in the *Setup » Client* » _Select client_ » *Orders* menu.
====

When you completed the *DHL Shipping (Versenden): Settings combination* assistant and open it again, the following information is displayed:

* In the tile view:

** Shipping setting
** Region
** Billing number

* In the table overview:

** Shipping setting
** Region
** Billing number
** Login name
** Services
** Shipping profile ID

[#data-transfer]
== Information about data transfer

If you activated the option *Agreement upon data transfer* in the DHL Shipping (Versenden) shipping profile in the *Setup » Orders » Shipping » Setting* menu in the *Shipping profiles* tab, a checkbox is visible for your customers in the checkout of your Ceres online store. Your customers decide whether they agree that their data is transferred to the shipping service provider or not.

* If the customer agrees that their data is transferred, the email address of the customer is transferred to the shipping service provider.
* If the customer does _not_ agree that their data is transferred, the alternative email address that you entered in the shipping profile is transferred.
* If the customer does _not_ agree that their data is transferred and you did not enter an alternative email address in the shipping profile, an error message is displayed and the order cannot be registered with DHL. +
Therefore, it is important that you enter alternative values for the email address and the telephone number in the shipping profile. Otherwise, it is not possible to successfully register the order with DHL when selecting certain services (e.g. retail outlet routing) in the shipping settings of the plugin.

[IMPORTANT]
.Upload polling file in case of DHL failure
====
If there is a failure of the interface on the part of DHL, it is possible to use the polling format *DHL Shipping (Versenden)* as an alternative. Generate the polling file containing the orders that should be registered either with a process and plentyBase or go to the *Orders » Shipping centre* menu. Afterwards, you can upload this file to the DHL business customer portal via the template *DHL plentymarkets Importformat*. +
Note that the following services _cannot_ be transmitted to DHL via the polling format:

* Return immediately, 2nd attempt of delivery, Verpackungsrücknahme, Unzustellbarkeitsnachricht (when selecting the product 01 - DHL Paket) +
* immediate, after deadline abandonment (when selecting the product 53 - DHL Paket International) +
* DHL Wunschpaket services
====

[#service-retail-outlet-routing]
== Using the Retail Outlet Routing service

Thanks to the Retail Outlet Routing service your undeliverable item (in case the recipient is unknown) gets a second change to reach the recipient: Rather than being returned immediately to you, the undeliverable item will be held at the nearest outlet that has a parcel collection point for collection by the recipient. Your recipient will be informed of this by email. If the item is collected by the recipient, the time and costs involved in returning it can be avoided.

In order that your customers can use the Retail Outlet Routing service, the following settings have to be carried out:

* Go to *Setup » Orders » Shipping » Settings* and click on the *Shipping profiles* tab. Then activate the option *Agreement upon data transfer* in the shipping profile and select an option how the data (email address and phone number) is to be transferred.
* Go to the *DHL Shipping (Versenden): Basic settings* assistant and activate the service *Retail Outlet Routing* in the *Product and services selection* step.

[#service-ident-check]
== Using the Ident check service

Make sure that your parcels are only delivered to the recipient in person – after the DHL driver has checked the identity and - where applicable- the age against the identity card and documented it.

In order that your customers can use the Ident check service (minimum age 16 or 18), the following setting is important:

* Go to the *DHL Shipping (Versenden): Basic settings* assistant and activate the service *Ident check* in the *Product and services selection* step.

[#dhl-warenpost]
== Using DHL Warenpost

Many items are too small to send them in parcels or packages. If you send many of those items, DHL Warenpost might be a convenient solution for you. DHL Warenpost can only be used for deliveries within Germany.

In order that you can offer your customers DHL Warenpost, the item and package data have to be correctly saved and transmitted to the shipping service provider. According to DHL, the following dimensions have to be maintained:

* Minimum dimension: Length: 10.0 cm, width: 7.0 cm, height: 0.1 cm
* Maximum dimension: Length: 35.3 cm, width: 25.0 cm, height: 5.0 cm
* Maximum weight: 1000 g

When registering the order, DHL checks the maximum dimensions and the maximum weight. The minimum dimensions are not checked by DHL when the order is registered.

The following sub-chapters describe the settings that you need to carry out in the <<#dhl-warenpost-settings-back-end, plentymarkets back end>>, in the <<#dhl-warenpost-settings-assistants, assistants>> and in the <<#dhl-warenpost-settings-gkp, DHL business customer portal>>:

[#dhl-warenpost-settings-back-end]
=== Settings in the back end

* It is recommended to save the weight of the variations that you want to send with DHL Warenpost in the variation’s *Dimensions* area.
* In order to ensure that the dimensions are not exceeded, you can use one of the two options that can be set up in the settings of the shipping package. You can find these options in the *Setup » Orders » Shipping » Shipping packages* menu in the drop-down list *Volume*.

[[image-dhl-shipping-warenpost-shipping-package]]
.Shipping package for DHL Warenpost: Volume
image::fulfilment/assets/dhl-shipping-warenpost-shipping-package.png[width=640, height=360]

The two options regarding the volume that you can select in the shipping package are explained in detail in the following:

[discrete]
==== take from the shipping package

In order that the packages in the shipping centre are always generated with the correct dimensions and the order can be successfully registered with DHL Warenpost, you can use the option *take from the shipping package* and save the permissible maximum dimensions (length, width, height) in cm.

[[image-dhl-shipping-warenpost-dimensions]]
.Shipping package for DHL Warenpost: Dimensions
image::fulfilment/assets/dhl-shipping-warenpost-shipping-package-dimensions.png[width=640, height=360]

If you select the settings mentioned above, the dimensions of the shipping package and the gross weight of all variations in the order are transferred to the shipping service provider.

[discrete]
==== take from the item data (total)

*_Note:_* If you select the option *take from item data (total)*, _the weight only_ is transferred to the shipping service provider. The logic does not transfer the other dimensions (length, width, height).

You can, however, have the volume calculated based on a volume limitation in the shipping profile. To do so, select in the region of the corresponding shipping profile the limitation type *Maximum (cubic metres)* and save the calculated volume from the maximum dimensions in m³ that is prescribed for Warenpost by DHL:
`353 mm x 250 mm x 50 mm = 0,0044 m³`. +
Another possibility is to select the limitation type *Maximum (g)* in the region of the shipping profile and to save the calculated maximum weight of 1000 g that is prescribed for Warenpost by DHL.

You can select the shipping package as standard package in the corresponding region of the current shipping profile in the *Table of shipping charges* tab:

[[image-dhl-shipping-warenpost-standard-package]]
.Shipping package for DHL Warenpost as standard package in the shipping profile
image::fulfilment/assets/dhl-shipping-warenpost-standard-package.png[width=640, height=360]


[#dhl-warenpost-settings-assistants]
=== Settings in the assistants

* Go to the *DHL Shipping (Versenden): Basic settings* assistant and select the product *62 - Warenpost* in the *Billing number* step.

* Go to the *DHL Shipping (Versenden): Basic settings* assistant and activate the product *Warenpost* in the *Product and services selection* step.

* Go to the *DHL Shipping (Versenden): Settings combination* assistant and select the billing number for Warenpost and the appropriate services that you want to link with this shipping setting.

[#dhl-warenpost-settings-gkp]
=== Settings in the DHL business customer portal

Go to the DHL business customer portal and select the appropriate size for the shipping labels:

[[image-dhl-shipping-warenpost]]
.Label sizes required for Warenpost
image::fulfilment/assets/dhl-warenpost-label-size-german.png[width=640, height=360]

In the DHL business customer portal, go to the section *Ship > Basic settings > General settings* and set up the printer settings for your shipping labels. You can activate that the label size 100 x 70 mm is used for Warenpost. Note that it is not possible to print the additional name information for this label size: Sender name 2, sender name 3 and recipient name 3 _cannot_ be printed on the label.

You can also use the common label in the format of 100 x 200 mm for Warenpost.

For further information, refer to the link:https://www.dhl.de/en/geschaeftskunden/paket/leistungen-und-services/dhl-warenpost.html[DHL website^]{nbsp}icon:external-link[].

[#dhl-shipping-user-rights]
== Assigning user rights for back end users

In order to use the DHL Shipping plugin, you have to activate some rights for users with *Back end* access in their user account.

Note that the function *Ship* has to be activated for the user in the DHL business customer portal.

[.instruction]
Assigning user rights for back end users:

. Go to *Setup » Settings » User » Rights » User*.
. Use the search function (icon:search[role="blue"]) and open the user account that should be edited.
. In the *Authorisations* area, activate the rights as listed in <<#table-user-rights-back-end-user>>.
. *Save* (icon:save[role="green"]) the settings.

[[table-user-rights-back-end-user]]
.Assigning user rights for back end users
[cols="1,3"]
|====
|Setting |Explanation

| *Orders > Show*
|Authorises the back end user to see orders.

| *Orders > Update*
|Authorises the back end user to update orders.

| *Orders > Shipping > Shipping package*
|Authorises the back end user to see, update, create and delete the shipping packages as well as the items within the shipping package.

| *Orders > Shipping > Package type > Show*
|Authorises the back end user to see package types.

| *Orders > Order properties > Show*
|Authorises the back end user to see order properties.

| *Orders > Documents > Create*
|Authorises the back end user to create documents, such as shipping labels and export documents via a process and plentyBase.

|====

[#activate-test-mode]
== Activating the test mode

By default, the productive mode is activated in the *DHL Shipping (Versenden)* plugin. You can activate the test mode for the plugin in order to check the settings.

*_Important:_* In order to be able to test the settings, login details for a test account (DHL developer portal) are required.

Proceed as described below to activate the test mode for the plugin.

[.instruction]
Activating the test mode:

. Go to *Plugins » Plugin set overview*.
. Click in the line of the plugin set where the DHL Shipping (Versenden) plugin is located on *Edit plugin set* (icon:pencil[role="yellow"]).
. Click in the line *DHL Shipping (Versenden)* on *Settings* (icon:cog[]).
. Click on *Configuration > General*.
. Select the setting *Test* from the drop-down list *Mode*.
. *Save* (icon:save[role="green"]) the setting.
