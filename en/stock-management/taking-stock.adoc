= Taking stock
:lang: en
include::{includedir}/_header.adoc[]
:keywords: inventory taking, stock-taking, inventory, stocktaking
:position: 70
:url: stock-management/taking-stock

Taking stock, or taking inventory, is the process of checking how much stock is in a warehouse at a particular time. Both the target and the actual stock are analyzed in the process. This is done with the help of a stock index, which lists the stock of every item.

This page teaches you how to take stock. You will learn how to use the **Data exchange** menu to take stock. Then you will also learn how the **stocktaking mode** works and how to use this mode to completely delete and rebook your entire stock.

[IMPORTANT]
.Stocktaking only with Dynamic import and Dynamic export
====
Stocktaking can only be performed using the *Dynamic import* and the *Dynamic export*.
====

[#100]
== Registering stocktaking with the export and import functions

The stocktaking via data exchange requires several steps. First you need to export the current stock quantities saved in your system. Next you need to edit the stock quantities so that they reflect the actual quantities available in your warehouse and then you need to reimport the corrected data into your system. You can either work in the file that you exported or you can make a copy of that file to ecit the actual quantities.

[IMPORTANT]
.Getting to know the data format Stock and testing the data exchange
====
Please pay attention to the notes specified on the <<data/export-import/data-formats/stock#, Stock>> data format page of the manual – especially before you start to overwrite the stock quantities in your system. To test the import use a test file that only contains one variation and overwrite the stock of that variation. This way you can easily check the result and see if it turned out as desired.
====

[#200]
=== Exporting stock

In the first step, go to **Data » Dynamic export** and use the data format **Stock** to export your current stock.

[TIP]
.The stock export is for one warehouse only
====
The data format **Stock** can only export the stock of one warehouse at a time. You can select the warehouse from the warehouseID filter. Click on the **Filter** tab of the data format. If you do not select any warehouse, then the warehouse with the lowest ID will be selected by default.
====

[.instruction]
Carrying out the data export:

. Go to <<data/export-import/exporting-data#, Data » Dynamic export>>. +
→ The overview opens.
. Open the submenu for the data format <<data/export-import/data-formats/stock#, Stock>> by clicking on the *plus*. If the submenu is not available yet, set up the  <<data/export-import/data-formats#, data format>> Stock by clicking on *New data format*.
. Place a check mark for the following data formats: VariationID, LocationID, Batch (optional), BestBeforeDate (optional), PurchasePrice, Stock, WarehouseID.
. On the right, carry out further settings to limit the export to specific data.
. *Save* the settings.
. Click on the **Filter** tab.
. Select a warehouse from the **WarehouseID** drop-down list.  +
→ The warehouse with the lowest warehouse ID is selected by default.
. **Save** the settings.
. Click on the gear wheel *Export data* in order to export a CSV file.

[TIP]
.The difference between the data field **WarehouseID** and the filter **Warehouse**
====
The **WarehouseID** filter lets you define from which warehouse the stock will be exported. The **WarehouseID** data field contains the ID of a warehouse. The **WarehouseID** data field does not influence the content of the export.
====

You will receive a CSV file, which you will need to edit and then import again afterwards.

[#300]
=== Editing stock quantities

Now you need to edit the file that you just exported. When taking stock you need to count the actual stock in your warehouse and compare it to the quantities saved as physical stock in your system. The quantities displayed in **Stock** column of your **Stock** data export are the physical stock saved in your system.

[.instruction]
Making changes to the stock file:

. Determine the actual stock.
. Open the stock file that you exported.
. Enter the actual stock into the **Stock** column.
. Save the changes to the file.

[#400]
=== Importing stocks

The file now contains the corrected stock values and needs to be imported back into your plentymarkets system. A CSV file or text file is used for the import.

[WARNING]
.The physical stock will be overwritten!
====
The import will overwrite the current physical stock and this means the stock that was overwritten can not be restored. Reserved stock quantities remain untouched and will not be imported. If you do not want to import your entire stock, because you only need to add incoming stock to correct your stock quantities, you can also add incoming stock via data import. Use the special format <<data/export-import/data-formats/incomingitems#, IncomingItems>> to add incoming stock.
====

[.instruction]
Carrying out the data import:

. Go to <<data/export-import/importing-data#, Data » Dynamic import>>.
. Pay attention to the explanations given in table 1 and select the settings as desired.
. Click on **Import**.

.Import settings for dynamic import
[cols="1,3"]
|====
|Setting |Explanation

|**Field separator**
|Select the separator.

|**Format**
|Select the data format Stock. +
If you have set up several stock formats and the file contains the warehouse ID column then the import will only change the stock quantities for the warehouse specified by the ID.

|**Warehouse**
|If the file that you want to import does not include a **WarehouseID** column, then the import will overwrite the stock of the warehouse that you have selected here. If the file includes a **WarehouseID** column and the ID in the column is 1 or higher, then your setting will not have an impact on the import. Instead the import will be carried out based on the ID. The ID allows you to import stock for several warehouses at once.

|**Barcode**
|The barcode is an optional field for synchronisation. Select the barcode format that should be used to synchronise the variation included in your file with the variations in your system. If the information included in the file do not match a variation in your system, then the row in the file will be skipped. It is not necessary to select a barcode for data synchronisation if the variation ID is included in the file. The variation ID is unique and is therefore enough to match the data.

|**File**
|Select the file that you wish to import.
|====

You can see detailed information about the data import in the **Data » Dynamic import » Submenu: Processing status** menu.

You can see the corrections that you made during the stocktaking process by opening the item and clicking on **Tab: Stock » Tab: Item movement**.
In addition the import will be listed as an entry in the **Stock » Incoming items** menu. You can open the entry to see a list of the item that were changed (image 1).

.List of variations that received stock
image::stock-management/assets/EN-taking-stock-01.png[]

[#500]
== Taking stock while stocktaking mode is active

There is an option in the warehouse settings called **Active stocktaking mode**. You can use it to freeze the stock of a warehouse while you are busy taking stock. While the stocktaking mode is active the physical stock remains the same and no item movements will be registered nor will stock be newly calculated.  +
Taking stock while the stocktaking mode is active can be carried out in 4 steps. First you need to activate the stocktaking mode. Next you need to export the current stock. Then you need to clear all stock and book the new stock quantities in. While the stocktaking mode is active your system will not change the stock quantities saved in a variation's data record. When you have booked in the new stock quantities and then you deactivate the stocktaking mode, your new stock quantities will be saved for variations. The old stock quantity will be overwritten. While stocktaking mode is active your reserved stock will still be calculated correctly. This means that stock will be reserved whenever you receive a new order. When you use the stocktaking mode, you need to know the following:

* While the stocktaking mode is active, the physical stock remains frozen and this may lead to overselling.
* Nonetheless, you should not book out stock either if the stocktaking mode is active, because the stock will not be calculated.

[WARNING]
.Deactivate the stocktaking mode only if you have already booked in the new stock quantities
====
If you deactivate the stocktaking mode while your stock is cleared, listings and offers on markets may be deactivated. To avoid that offers are aborted you need to book in the new stock quantities first and then deactivate the stocktaking mode.
====

[#600]
=== Activating the stocktaking mode

Activate the stocktaking mode for the warehouse that you want to carry out the stocktaking in. The stocktaking mode will freeze all stock quantities of the warehouse.

[.instruction]
Activating the stocktaking mode:

. Go to **System » System settings » Stock » Warehouse » Select warehouse » Submenu: Settings**.
. Place a check mark next to the option **active stocktaking mode**.
. **Save** the setting.

.Activating the stocktaking mode
image::stock-management/assets/EN-taking-stock-02.png[]

[IMPORTANT]
.A warehouse that is in stocktaking mode will be labeled
====
Additional information is added to the name of your warehouse. Depending on how long the warehouse's name is, either **(INVENTORY MOD)**, **(INVENTORY)** or **(I)** is added to the end of the name. This way, you can tell that the warehouse is currently in stocktaking mode.
====

.Identifying a warehouse that is in stocktaking mode
image::stock-management/assets/EN-taking-stock-03.png[]

[#700]
=== Exporting stock

Activate the stocktaking mode for the warehouse that you want to carry out the stocktaking in. To do so, use the data format **Stock**. You need one export per warehouse.

[.instruction]
Exporting stock:

. Go to <<data/export-import/exporting-data#, Data » Dynamic export>>.
. Click on the **New data format** tab.
. Select the data format type **Stock**.
. Enter a name for the data format.
. Pay attention to the explanations given in table 2 and select the settings as desired.  +
→ Further data fields and filters are optional.

.Data fields that are required for stocktaking
[cols="1,3,3"]
|====
|Field |Description |Import procedure

|**VariationID**
|Contains the ID of a variation and is required for stock synchronisation.
|Import

|**Stock**
|Contains the physical stock and the import procedure setting **Import** ensures that the physical stock will be overwritten if the file is imported.
|Import

|**WarehouseID**
|Contains the ID of a warehouse and ensures that the stock can be assigned to a warehouse.
|Import

|**LocationID**
|Contains the ID of a storage location and ensures that the stock can be assigned to a storage location.
|Import

|**VariationString**
|Contains the name of a variation. This data field can often help to easily identify variations.
|Import

3+|Filter tab of the data format

|**WarehouseID**
|Defines the warehouse that the stock is exported from. If you do not select any warehouse, then the stock of the warehouse with the lowest ID will be exported.
|
|====

[#800]
=== Clearing stock while stocktaking mode is active

As a first step you will now clear all your stocks and item movements. The reserved stock quantities are preserved. Make a copy of the file that you just exported.

[TIP]
.Export serves as backup of your stock quantities before you clear them
====
This process deletes all of the stock and item movements! This means that the warehouse will be completly cleared of any digital stock. Therefore, be sure to copy your stock export and to leave the original without any changes until you have successfully completed the process (see section 2.1). This file can help you to restore your stock if an error occurs.
====

[.instruction]
Clearing stock:

. Open the copy of your stock export.
. Enter 0 into the **Stock** data field of each variation.
. Save the file.
. Go to **Data » Dynamic import**.
. Under **format**, select the data format Stock, which you used for your export.
. Pay attention to the information given in table 3.
. Select the **file** that is filled with 0 for the stock.
. Click on **Import**.

.Dynamic import of the format **Stock**
[cols="1,3"]
|====
|Setting |Explanation

|**Field separator**
|Select a separator

|**Format**
|Select the data format Stock. +
If you have set up several stock formats and the file contains the warehouse ID column then the import will only change the stock quantities for the warehouse specified by the ID.

|**Warehouse**
|Can be left empty because the WarehouseID column should be included in the data export and therefore also in the import file.  +
If the file that you want to import does not include a **WarehouseID** column, then the import will overwrite the stock of the warehouse that you have selected here. If the file includes a **WarehouseID** column and the ID in the column is 1 or higher, then your setting will not have an impact on the import. Instead the import will be carried out based on the ID. The ID allows you to import stock for several warehouses at once.

|**Barcode**
|Can remain empty for this import.  +
The barcode is an optional field for synchronisation. Select the barcode format that should be used to synchronise the variation included in your file with the variations in your system. If the information included in the file do not match a variation in your system, then the row in the file will be skipped. It is not necessary to select a barcode for data synchronisation if the variation ID is included in the file. The variation ID is unique and is therefore enough to match the data.

|**File**
|Select the file that you wish to import.
|====

[#900]
=== Booking stock

Now you will import the stock quantities that you counted during the stocktaking into your system. To do so, use the data format Stock. Open the stock file that you filled in 0 for every stock. Enter the current physical stock of each variation into the stock column and save the file with the current stock quantities. The physical stock must be entered into the **Stock** column.

[.instruction]
Booking stock:

. Open the copy of your stock export.
. Enter the actual stock quantity into the **Stock** data field of each variation.
. Save the file that now contains the current stock.
. Go to **Data » Dynamic import**.
. Select the same data format Stock that you have used for the export.
. Pay attention to the information given in table 3.
. Select the **file** that is filled with your current stock quantities.
. Click on **Import**.

[#1000]
=== Deactivating the stocktaking mode

Last you need to deactivate the stocktaking mode and when you do this, the stock that you just imported will be saved for each variation.

[.instruction]
Deactivating the stocktaking mode:

. Go to **System » System settings » Stock » Warehouse » Select warehouse » Submenu: Settings**.
. Remove the check mark next to the option **Stocktaking mode active**.
. **Save** the setting.  +
→ Your physical stock will be recalculated.

Deactivate the stocktaking mode only if you have really completed all steps of the stocktaking process. If you deactivate the stocktaking mode early, stock may be calculated wrong and offers and markets may be ended without your intention to actually end them.

== Taking stock with the plentymarkets app

In plentymarkets 7 you can also take stock using the plentymarkets app. Users must be assigned the right to take stock. In addition, <<stock-management/setting-up-a-warehouse, barcodes must be saved for your storage locations>>. You can activate the stocktaking mode to freeze stock during stocktaking. However, because the new stock data is saved to the variation automatically, you do not need to activate the stocktaking mode.

[TIP]
.Hardware for plentymarkets app
====
Check the <<basics/first-steps/system-requirements#_managing_stock_with_the_plentymarkets_app, system requirements>> page of the manual to see current hardware recommendations for stocktaking using the plentymarkets app.
====

=== Preparing app stocktaking

Carry out the settings described below to prepare stocktaking using the plentymarkets app.

[TIP]
.Label your storage locations
====
To take stock using the plentymarkets app, you must assign barcodes to your storage locations. You can speed up stocktaking by *<<Stock-management/setting-up-a-warehouse#800, labelling your storage locations>>*. During stocktaking, you can just scan the storage location's label.
====

==== Exporting stock with the data format Stock

To check all stock discrepancies resulting from stocktaking at once, export your stock data using the data format <<data/export-import/data-formats/stock#, Stock>> before the stocktaking process. Export the data again after stocktaking is complete and compare the stock data.

==== Assigning rights for stocktaking

Users with admin rights can take stock using the plentymarkets app by default. Users with the user classes *Variable* and *Logistics* must be assigned the necessary rights.

[.instruction]
Assigning rights for app stocktaking:

. Go to *System » System settings » Settings » User*.
. Open the account.
. Open the *Mobile* tab.
. In the *Visible functions* area, activate the option *Stocktaking*.
. *Save* the settings.
. Open the *Richts* tab.
. Click on *Managing menu and REST API rights*. +
→ The *Rights* view opens.
. In the *Authorization* column, activate the right *Stock » Warehouse » Storage location » Show storage location*.
. *Save* the settings.

==== Personalising app stocktaking

Users can personalise the stocktaking process using the plentymarkets app settings.

[.instruction]
Personalising stocktaking with the plentymarkets app:

. Log into the plentymarkets App.
. In the menu bar, tap the *menu symbol*.
. Tap *Settings*.
. Tap *Stocktaking*. +
→ The *Stocktaking* settings menu opens.
. Carry out the settings. Note <<table-stocktaking-app-settings>>. +
*_Tip:_* The settings are saved when you exit the menu.

[[table-stocktaking-app-settings]]
.Stocktaking; app settings
[cols="1,2"]
|====
|Setting |Explanation

2+|Storage location search

|*Set focus on barcode*
|Activate to set the cursor in the *Barcode* field of the storage location search. If your storage locations are labelled, users can start scanning the storage location's label straight away.

2+|Item search

|*Set focus on barcode*
|Activate to set the cursor in the *Barcode* field of the item search. If your items are labelled, users can start scanning the item's label straight away.

|*Scan items individually*
|Select whether the quantity is to be entered by scanning the individual items or by entering the count result manually. +
Activated = Each piece of an item must be scanned individually. +
**__Tip:__** The scanned quantity can be corrected manually. Tap the item and enter the correct quantity. +
Deactivated = After scanning an item's label, users enter the counted amount using the keypad.

|*Allow manual item search* +
|Select if items can be searched manually. +
Activated = Items can either be found by scanning the item label or by using the keypad to enter search criteria. +
Deactivated = Items cannot be searched for manually. Items can be opened by scanning the item label only.

|*Main warehouse only* +
(version 1.9.3 and higher)
|Select if the item suggestions are to be filtered. +
Deactivated (default setting) = Items are not filtered. If the same item is stored at more than one storage location, all storage locations are listed for selection. +
Activated = Only items are listed for selection where the main warehouse is identical to the current stocktaking warehouse.

2+|Save stock

|*Show Save button*
|Deactivate to hide the *Save stock* button. +
Activated = The stock present at a storage location can be saved either by tapping the *Save stock* button or by scanning the storage location's label. +
Deactivated = The stock present at a storage location can be saved by scanning the storage location's label.

|*Show confirmation dialog*
|Activate to show a confirmation dialog before the new stock quantity is saved. +
Activated = Users must confirm before the stock details are saved. +
Deactivated = Stock details are saved immediately.
|====

=== Stocktaking with the plentymarkets app

When you take stock with the plentymarkets app, you can either scan each piece of an item individually or enter the counted quantity using the keypad.  The option *Scan items individually* controls how the stock taking is performed.

[IMPORTANT]
.Stock at a storage location is set to zero if not counted
====
Count or scan all items present at a storage location. If you store different items at the same storage location, any stock of items that you do not count or scan during stocktaking will be set to zero. Example: +
The stock information for storage location 1 in plentymarkets is 10 x item A, 10 x item B and 2 x item C. During stocktaking, 10 x item A and 10 x item B is scanned. Item C is not scanned. +
→ The app books item A x 10, item B x 10 and item C x 0. As such, stock for item C is set to zero. +
If you only start creating further storage locations during stocktaking, these storage locations are not set to zero. This applies only for storage locations that are edited.
====

==== Scanning each piece of an item individually

Users do not have to count the stock. Instead, they can scan the labels of each piece of an item individually until they have scanned all pieces of an item present at the storage location. The quantity is updated incrementally in the background. You need to activate the *Scan items individually* option to take stock by scanning each piece individually.

[.instruction]
Scanning each piece of an item individually:

. Open the plentymarkets App.
. In the menu bar, tap the *menu symbol*.
. Tap *Stocktaking*. +
→ The *Stocktaking* view opens.
. Scan the label of the storage location. +
→ The storage location is selected. The quantity is booked to this storage location.
. Scan the label of each piece until you have scanned all items of the storage location. +
*_Tip:_* If the storage location contains more than one type of item, the quantity of the correct item is increased automatically during scanning. +
*_Note:_* To correct the scanned quantity manually, tap the item and enter the correct quantity. +
→ If best before dates, batches or both are managed for the variation in the selected warehouse, you are asked to enter a date, a batch or both.
. *_Optional:_* Select the best before date and/or enter the batch and tap *Add item*. +
→ The stock is booked in.
. To finish the count, scan the storage location's label again or tap *Save stock* if the button is shown. +
→ The counted quantity is saved. +
→ The counted stock is imported to the *Stock » Storage location management* menu of the plentymarkets back end. +
→ The stock information is saved in the *Item » Managing items* menu of the variation.

==== Entering the counted quantity

Instead of scanning the levels of each piece stored at a storage location, users also can count how many pieces of an item are present at the storage location and enter the result manually. You need to deactivate the *Scan items individually* option to take stock by counting.

[.instruction]
Entering the counted quantity:

. Open the plentymarkets App.
. In the menu bar, tap the *menu symbol*.
. Tap *Stocktaking*. +
→ The *Stocktaking* view opens.
. Scan the label of the storage location. +
→ The storage location is selected. The quantity is booked to this storage location.
. Scan the label of an item or search the item manually. +
→ The *Enter quantity* window is displayed.
. Enter the quantity that you counted for the item.
. To finish the count, scan the storage location's label again or tap *Save stock* if the button is shown. +
→ The counted quantity is saved. +
→ The counted stock is imported to the *Stock » Storage location management* menu of the plentymarkets back end. +
→ The stock information is saved in the *Item » Managing items* menu of the variation.
